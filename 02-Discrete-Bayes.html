<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<title>02-Discrete-Bayes</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<style type="text/css">
    /*!
*
* Twitter Bootstrap
*
*//*! normalize.css v3.0.2 | MIT License | git.io/normalize */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-size:10px;-webkit-tap-highlight-color:transparent}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,optgroup,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0;vertical-align:middle}svg:not(:root){overflow:hidden}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}pre,textarea{overflow:auto}code,kbd,pre,samp{font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */@media print{*,:after,:before{background:0 0!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href)")"}abbr[title]:after{content:" (" attr(title)")"}a[href^="javascript:"]:after,a[href^="#"]:after{content:""}blockquote,pre{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}img{max-width:100%!important}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}select{background:#fff!important}.navbar{display:none}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000!important}.label{border:1px solid #000}.table{border-collapse:collapse!important}.table td,.table th{background-color:#fff!important}.table-bordered td,.table-bordered th{border:1px solid #ddd!important}}@font-face{font-family:'Glyphicons Halflings';src:url(../components/bootstrap/fonts/glyphicons-halflings-regular.eot);src:url(../components/bootstrap/fonts/glyphicons-halflings-regular.eot?#iefix)format('embedded-opentype'),url(../components/bootstrap/fonts/glyphicons-halflings-regular.woff2)format('woff2'),url(../components/bootstrap/fonts/glyphicons-halflings-regular.woff)format('woff'),url(../components/bootstrap/fonts/glyphicons-halflings-regular.ttf)format('truetype'),url(../components/bootstrap/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular)format('svg')}.glyphicon{position:relative;top:1px;display:inline-block;font-family:'Glyphicons Halflings';font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.glyphicon-asterisk:before{content:"\2a"}.glyphicon-plus:before{content:"\2b"}.glyphicon-eur:before,.glyphicon-euro:before{content:"\20ac"}.glyphicon-minus:before{content:"\2212"}.glyphicon-cloud:before{content:"\2601"}.glyphicon-envelope:before{content:"\2709"}.glyphicon-pencil:before{content:"\270f"}.glyphicon-glass:before{content:"\e001"}.glyphicon-music:before{content:"\e002"}.glyphicon-search:before{content:"\e003"}.glyphicon-heart:before{content:"\e005"}.glyphicon-star:before{content:"\e006"}.glyphicon-star-empty:before{content:"\e007"}.glyphicon-user:before{content:"\e008"}.glyphicon-film:before{content:"\e009"}.glyphicon-th-large:before{content:"\e010"}.glyphicon-th:before{content:"\e011"}.glyphicon-th-list:before{content:"\e012"}.glyphicon-ok:before{content:"\e013"}.glyphicon-remove:before{content:"\e014"}.glyphicon-zoom-in:before{content:"\e015"}.glyphicon-zoom-out:before{content:"\e016"}.glyphicon-off:before{content:"\e017"}.glyphicon-signal:before{content:"\e018"}.glyphicon-cog:before{content:"\e019"}.glyphicon-trash:before{content:"\e020"}.glyphicon-home:before{content:"\e021"}.glyphicon-file:before{content:"\e022"}.glyphicon-time:before{content:"\e023"}.glyphicon-road:before{content:"\e024"}.glyphicon-download-alt:before{content:"\e025"}.glyphicon-download:before{content:"\e026"}.glyphicon-upload:before{content:"\e027"}.glyphicon-inbox:before{content:"\e028"}.glyphicon-play-circle:before{content:"\e029"}.glyphicon-repeat:before{content:"\e030"}.glyphicon-refresh:before{content:"\e031"}.glyphicon-list-alt:before{content:"\e032"}.glyphicon-lock:before{content:"\e033"}.glyphicon-flag:before{content:"\e034"}.glyphicon-headphones:before{content:"\e035"}.glyphicon-volume-off:before{content:"\e036"}.glyphicon-volume-down:before{content:"\e037"}.glyphicon-volume-up:before{content:"\e038"}.glyphicon-qrcode:before{content:"\e039"}.glyphicon-barcode:before{content:"\e040"}.glyphicon-tag:before{content:"\e041"}.glyphicon-tags:before{content:"\e042"}.glyphicon-book:before{content:"\e043"}.glyphicon-bookmark:before{content:"\e044"}.glyphicon-print:before{content:"\e045"}.glyphicon-camera:before{content:"\e046"}.glyphicon-font:before{content:"\e047"}.glyphicon-bold:before{content:"\e048"}.glyphicon-italic:before{content:"\e049"}.glyphicon-text-height:before{content:"\e050"}.glyphicon-text-width:before{content:"\e051"}.glyphicon-align-left:before{content:"\e052"}.glyphicon-align-center:before{content:"\e053"}.glyphicon-align-right:before{content:"\e054"}.glyphicon-align-justify:before{content:"\e055"}.glyphicon-list:before{content:"\e056"}.glyphicon-indent-left:before{content:"\e057"}.glyphicon-indent-right:before{content:"\e058"}.glyphicon-facetime-video:before{content:"\e059"}.glyphicon-picture:before{content:"\e060"}.glyphicon-map-marker:before{content:"\e062"}.glyphicon-adjust:before{content:"\e063"}.glyphicon-tint:before{content:"\e064"}.glyphicon-edit:before{content:"\e065"}.glyphicon-share:before{content:"\e066"}.glyphicon-check:before{content:"\e067"}.glyphicon-move:before{content:"\e068"}.glyphicon-step-backward:before{content:"\e069"}.glyphicon-fast-backward:before{content:"\e070"}.glyphicon-backward:before{content:"\e071"}.glyphicon-play:before{content:"\e072"}.glyphicon-pause:before{content:"\e073"}.glyphicon-stop:before{content:"\e074"}.glyphicon-forward:before{content:"\e075"}.glyphicon-fast-forward:before{content:"\e076"}.glyphicon-step-forward:before{content:"\e077"}.glyphicon-eject:before{content:"\e078"}.glyphicon-chevron-left:before{content:"\e079"}.glyphicon-chevron-right:before{content:"\e080"}.glyphicon-plus-sign:before{content:"\e081"}.glyphicon-minus-sign:before{content:"\e082"}.glyphicon-remove-sign:before{content:"\e083"}.glyphicon-ok-sign:before{content:"\e084"}.glyphicon-question-sign:before{content:"\e085"}.glyphicon-info-sign:before{content:"\e086"}.glyphicon-screenshot:before{content:"\e087"}.glyphicon-remove-circle:before{content:"\e088"}.glyphicon-ok-circle:before{content:"\e089"}.glyphicon-ban-circle:before{content:"\e090"}.glyphicon-arrow-left:before{content:"\e091"}.glyphicon-arrow-right:before{content:"\e092"}.glyphicon-arrow-up:before{content:"\e093"}.glyphicon-arrow-down:before{content:"\e094"}.glyphicon-share-alt:before{content:"\e095"}.glyphicon-resize-full:before{content:"\e096"}.glyphicon-resize-small:before{content:"\e097"}.glyphicon-exclamation-sign:before{content:"\e101"}.glyphicon-gift:before{content:"\e102"}.glyphicon-leaf:before{content:"\e103"}.glyphicon-fire:before{content:"\e104"}.glyphicon-eye-open:before{content:"\e105"}.glyphicon-eye-close:before{content:"\e106"}.glyphicon-warning-sign:before{content:"\e107"}.glyphicon-plane:before{content:"\e108"}.glyphicon-calendar:before{content:"\e109"}.glyphicon-random:before{content:"\e110"}.glyphicon-comment:before{content:"\e111"}.glyphicon-magnet:before{content:"\e112"}.glyphicon-chevron-up:before{content:"\e113"}.glyphicon-chevron-down:before{content:"\e114"}.glyphicon-retweet:before{content:"\e115"}.glyphicon-shopping-cart:before{content:"\e116"}.glyphicon-folder-close:before{content:"\e117"}.glyphicon-folder-open:before{content:"\e118"}.glyphicon-resize-vertical:before{content:"\e119"}.glyphicon-resize-horizontal:before{content:"\e120"}.glyphicon-hdd:before{content:"\e121"}.glyphicon-bullhorn:before{content:"\e122"}.glyphicon-bell:before{content:"\e123"}.glyphicon-certificate:before{content:"\e124"}.glyphicon-thumbs-up:before{content:"\e125"}.glyphicon-thumbs-down:before{content:"\e126"}.glyphicon-hand-right:before{content:"\e127"}.glyphicon-hand-left:before{content:"\e128"}.glyphicon-hand-up:before{content:"\e129"}.glyphicon-hand-down:before{content:"\e130"}.glyphicon-circle-arrow-right:before{content:"\e131"}.glyphicon-circle-arrow-left:before{content:"\e132"}.glyphicon-circle-arrow-up:before{content:"\e133"}.glyphicon-circle-arrow-down:before{content:"\e134"}.glyphicon-globe:before{content:"\e135"}.glyphicon-wrench:before{content:"\e136"}.glyphicon-tasks:before{content:"\e137"}.glyphicon-filter:before{content:"\e138"}.glyphicon-briefcase:before{content:"\e139"}.glyphicon-fullscreen:before{content:"\e140"}.glyphicon-dashboard:before{content:"\e141"}.glyphicon-paperclip:before{content:"\e142"}.glyphicon-heart-empty:before{content:"\e143"}.glyphicon-link:before{content:"\e144"}.glyphicon-phone:before{content:"\e145"}.glyphicon-pushpin:before{content:"\e146"}.glyphicon-usd:before{content:"\e148"}.glyphicon-gbp:before{content:"\e149"}.glyphicon-sort:before{content:"\e150"}.glyphicon-sort-by-alphabet:before{content:"\e151"}.glyphicon-sort-by-alphabet-alt:before{content:"\e152"}.glyphicon-sort-by-order:before{content:"\e153"}.glyphicon-sort-by-order-alt:before{content:"\e154"}.glyphicon-sort-by-attributes:before{content:"\e155"}.glyphicon-sort-by-attributes-alt:before{content:"\e156"}.glyphicon-unchecked:before{content:"\e157"}.glyphicon-expand:before{content:"\e158"}.glyphicon-collapse-down:before{content:"\e159"}.glyphicon-collapse-up:before{content:"\e160"}.glyphicon-log-in:before{content:"\e161"}.glyphicon-flash:before{content:"\e162"}.glyphicon-log-out:before{content:"\e163"}.glyphicon-new-window:before{content:"\e164"}.glyphicon-record:before{content:"\e165"}.glyphicon-save:before{content:"\e166"}.glyphicon-open:before{content:"\e167"}.glyphicon-saved:before{content:"\e168"}.glyphicon-import:before{content:"\e169"}.glyphicon-export:before{content:"\e170"}.glyphicon-send:before{content:"\e171"}.glyphicon-floppy-disk:before{content:"\e172"}.glyphicon-floppy-saved:before{content:"\e173"}.glyphicon-floppy-remove:before{content:"\e174"}.glyphicon-floppy-save:before{content:"\e175"}.glyphicon-floppy-open:before{content:"\e176"}.glyphicon-credit-card:before{content:"\e177"}.glyphicon-transfer:before{content:"\e178"}.glyphicon-cutlery:before{content:"\e179"}.glyphicon-header:before{content:"\e180"}.glyphicon-compressed:before{content:"\e181"}.glyphicon-earphone:before{content:"\e182"}.glyphicon-phone-alt:before{content:"\e183"}.glyphicon-tower:before{content:"\e184"}.glyphicon-stats:before{content:"\e185"}.glyphicon-sd-video:before{content:"\e186"}.glyphicon-hd-video:before{content:"\e187"}.glyphicon-subtitles:before{content:"\e188"}.glyphicon-sound-stereo:before{content:"\e189"}.glyphicon-sound-dolby:before{content:"\e190"}.glyphicon-sound-5-1:before{content:"\e191"}.glyphicon-sound-6-1:before{content:"\e192"}.glyphicon-sound-7-1:before{content:"\e193"}.glyphicon-copyright-mark:before{content:"\e194"}.glyphicon-registration-mark:before{content:"\e195"}.glyphicon-cloud-download:before{content:"\e197"}.glyphicon-cloud-upload:before{content:"\e198"}.glyphicon-tree-conifer:before{content:"\e199"}.glyphicon-tree-deciduous:before{content:"\e200"}.glyphicon-cd:before{content:"\e201"}.glyphicon-save-file:before{content:"\e202"}.glyphicon-open-file:before{content:"\e203"}.glyphicon-level-up:before{content:"\e204"}.glyphicon-copy:before{content:"\e205"}.glyphicon-paste:before{content:"\e206"}.glyphicon-alert:before{content:"\e209"}.glyphicon-equalizer:before{content:"\e210"}.glyphicon-king:before{content:"\e211"}.glyphicon-queen:before{content:"\e212"}.glyphicon-pawn:before{content:"\e213"}.glyphicon-bishop:before{content:"\e214"}.glyphicon-knight:before{content:"\e215"}.glyphicon-baby-formula:before{content:"\e216"}.glyphicon-tent:before{content:"\26fa"}.glyphicon-blackboard:before{content:"\e218"}.glyphicon-bed:before{content:"\e219"}.glyphicon-apple:before{content:"\f8ff"}.glyphicon-erase:before{content:"\e221"}.glyphicon-hourglass:before{content:"\231b"}.glyphicon-lamp:before{content:"\e223"}.glyphicon-duplicate:before{content:"\e224"}.glyphicon-piggy-bank:before{content:"\e225"}.glyphicon-scissors:before{content:"\e226"}.glyphicon-bitcoin:before,.glyphicon-btc:before,.glyphicon-xbt:before{content:"\e227"}.glyphicon-jpy:before,.glyphicon-yen:before{content:"\00a5"}.glyphicon-rub:before,.glyphicon-ruble:before{content:"\20bd"}.glyphicon-scale:before{content:"\e230"}.glyphicon-ice-lolly:before{content:"\e231"}.glyphicon-ice-lolly-tasted:before{content:"\e232"}.glyphicon-education:before{content:"\e233"}.glyphicon-option-horizontal:before{content:"\e234"}.glyphicon-option-vertical:before{content:"\e235"}.glyphicon-menu-hamburger:before{content:"\e236"}.glyphicon-modal-window:before{content:"\e237"}.glyphicon-oil:before{content:"\e238"}.glyphicon-grain:before{content:"\e239"}.glyphicon-sunglasses:before{content:"\e240"}.glyphicon-text-size:before{content:"\e241"}.glyphicon-text-color:before{content:"\e242"}.glyphicon-text-background:before{content:"\e243"}.glyphicon-object-align-top:before{content:"\e244"}.glyphicon-object-align-bottom:before{content:"\e245"}.glyphicon-object-align-horizontal:before{content:"\e246"}.glyphicon-object-align-left:before{content:"\e247"}.glyphicon-object-align-vertical:before{content:"\e248"}.glyphicon-object-align-right:before{content:"\e249"}.glyphicon-triangle-right:before{content:"\e250"}.glyphicon-triangle-left:before{content:"\e251"}.glyphicon-triangle-bottom:before{content:"\e252"}.glyphicon-triangle-top:before{content:"\e253"}.glyphicon-console:before{content:"\e254"}.glyphicon-superscript:before{content:"\e255"}.glyphicon-subscript:before{content:"\e256"}.glyphicon-menu-left:before{content:"\e257"}.glyphicon-menu-right:before{content:"\e258"}.glyphicon-menu-down:before{content:"\e259"}.glyphicon-menu-up:before{content:"\e260"}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body{margin:0;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:13px;line-height:1.42857143;color:#000;background-color:#fff}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7;text-decoration:none}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:dotted thin;outline:-webkit-focus-ring-color auto 5px;outline-offset:-2px}figure{margin:0}.carousel-inner>.item>a>img,.carousel-inner>.item>img,.img-responsive,.thumbnail a>img,.thumbnail>img{display:block;max-width:100%;height:auto}.img-rounded{border-radius:3px}.img-thumbnail{padding:4px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:2px;-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;display:inline-block;max-width:100%;height:auto}.img-circle{border-radius:50%}hr{margin-top:18px;margin-bottom:18px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[role=button]{cursor:pointer}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-weight:400;line-height:1;color:#777}.h1,.h2,.h3,h1,h2,h3{margin-top:18px;margin-bottom:9px}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small{font-size:65%}.h4,.h5,.h6,h4,h5,h6{margin-top:9px;margin-bottom:9px}.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-size:75%}.h1,h1{font-size:33px}.h2,h2{font-size:27px}.h3,h3{font-size:23px}.h4,h4{font-size:17px}.h5,h5{font-size:13px}.h6,h6{font-size:12px}p{margin:0 0 9px}.lead{margin-bottom:18px;font-size:14px;font-weight:300;line-height:1.4}@media (min-width:768px){.lead{font-size:19.5px}}.small,small{font-size:92%}.mark,mark{background-color:#fcf8e3;padding:.2em}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}.text-nowrap{white-space:nowrap}.text-lowercase{text-transform:lowercase}.text-uppercase{text-transform:uppercase}.text-capitalize{text-transform:capitalize}.text-muted{color:#777}.text-primary{color:#337ab7}a.text-primary:hover{color:#286090}.text-success{color:#3c763d}a.text-success:hover{color:#2b542c}.text-info{color:#31708f}a.text-info:hover{color:#245269}.text-warning{color:#8a6d3b}a.text-warning:hover{color:#66512c}.text-danger{color:#a94442}a.text-danger:hover{color:#843534}.bg-primary{color:#fff;background-color:#337ab7}a.bg-primary:hover{background-color:#286090}.bg-success{background-color:#dff0d8}a.bg-success:hover{background-color:#c1e2b3}.bg-info{background-color:#d9edf7}a.bg-info:hover{background-color:#afd9ee}.bg-warning{background-color:#fcf8e3}a.bg-warning:hover{background-color:#f7ecb5}.bg-danger{background-color:#f2dede}a.bg-danger:hover{background-color:#e4b9b9}.page-header{padding-bottom:8px;margin:36px 0 18px;border-bottom:1px solid #eee}ol,ul{margin-top:0;margin-bottom:9px}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none;margin-left:-5px}.list-inline>li{display:inline-block;padding-left:5px;padding-right:5px}dl{margin-top:0;margin-bottom:18px}dd,dt{line-height:1.42857143}dt{font-weight:700}dd{margin-left:0}@media (min-width:541px){.dl-horizontal dt{float:left;width:160px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}}abbr[data-original-title],abbr[title]{cursor:help;border-bottom:1px dotted #777}.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:9px 18px;margin:0 0 18px;font-size:inherit;border-left:5px solid #eee}blockquote ol:last-child,blockquote p:last-child,blockquote ul:last-child{margin-bottom:0}blockquote .small,blockquote footer,blockquote small{display:block;font-size:80%;line-height:1.42857143;color:#777}blockquote .small:before,blockquote footer:before,blockquote small:before{content:'\2014 \00A0'}.blockquote-reverse,blockquote.pull-right{padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0;text-align:right}.blockquote-reverse .small:before,.blockquote-reverse footer:before,.blockquote-reverse small:before,blockquote.pull-right .small:before,blockquote.pull-right footer:before,blockquote.pull-right small:before{content:''}.blockquote-reverse .small:after,.blockquote-reverse footer:after,.blockquote-reverse small:after,blockquote.pull-right .small:after,blockquote.pull-right footer:after,blockquote.pull-right small:after{content:'\00A0 \2014'}address{margin-bottom:18px;font-style:normal;line-height:1.42857143}code,kbd,pre,samp{font-family:monospace}code{padding:2px 4px;font-size:90%;background-color:#f9f2f4;border-radius:2px}kbd{padding:2px 4px;font-size:90%;color:#fff;background-color:#333;border-radius:1px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}kbd kbd{padding:0;font-size:100%;font-weight:700;box-shadow:none}pre{display:block;padding:8.5px;margin:0 0 9px;word-break:break-all;word-wrap:break-word;color:#333;background-color:#f5f5f5;border:1px solid #ccc;border-radius:2px}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0}.pre-scrollable{max-height:340px;overflow-y:scroll}.container{margin-right:auto;margin-left:auto;padding-left:0;padding-right:0}@media (min-width:768px){.container{width:768px}}@media (min-width:992px){.container{width:940px}}@media (min-width:1200px){.container{width:1140px}}.container-fluid{margin-right:auto;margin-left:auto;padding-left:0;padding-right:0}.row{margin-left:0;margin-right:0}.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{position:relative;min-height:1px;padding-left:0;padding-right:0}.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0}@media (min-width:768px){.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0}}@media (min-width:992px){.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0}}@media (min-width:1200px){.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0}}table{background-color:transparent}caption{padding-top:8px;padding-bottom:8px;color:#777;text-align:left}th{text-align:left}.table{width:100%;max-width:100%;margin-bottom:18px}.table>tbody>tr>td,.table>tbody>tr>th,.table>tfoot>tr>td,.table>tfoot>tr>th,.table>thead>tr>td,.table>thead>tr>th{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>td,.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>td,.table>thead:first-child>tr:first-child>th{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>tbody>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>thead>tr>th{padding:5px}.table-bordered,.table-bordered>tbody>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border:1px solid #ddd}.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border-bottom-width:2px}.table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}.table-hover>tbody>tr:hover{background-color:#f5f5f5}table col[class*=col-]{position:static;float:none;display:table-column}table td[class*=col-],table th[class*=col-]{position:static;float:none;display:table-cell}.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>thead>tr>td.active,.table>thead>tr>th.active{background-color:#f5f5f5}.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr.active:hover>th,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover{background-color:#e8e8e8}.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>thead>tr>td.success,.table>thead>tr>th.success{background-color:#dff0d8}.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover{background-color:#d0e9c6}.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>thead>tr>td.info,.table>thead>tr>th.info{background-color:#d9edf7}.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr.info:hover>th,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover{background-color:#c4e3f3}.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>thead>tr>td.warning,.table>thead>tr>th.warning{background-color:#fcf8e3}.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr.warning:hover>th,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover{background-color:#faf2cc}.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>thead>tr>td.danger,.table>thead>tr>th.danger{background-color:#f2dede}.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr.danger:hover>th,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover{background-color:#ebcccc}.table-responsive{overflow-x:auto;min-height:.01%}@media screen and (max-width:767px){.table-responsive{width:100%;margin-bottom:13.5px;overflow-y:hidden;-ms-overflow-style:-ms-autohiding-scrollbar;border:1px solid #ddd}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tfoot>tr>td,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>thead>tr>th{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>th{border-bottom:0}}fieldset{padding:0;margin:0;border:0;min-width:0}legend{display:block;width:100%;padding:0;margin-bottom:18px;font-size:19.5px;line-height:inherit;color:#333;border:0;border-bottom:1px solid #e5e5e5}label{display:inline-block;max-width:100%;margin-bottom:5px}input[type=search]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none}input[type=checkbox],input[type=radio]{margin:4px 0 0;margin-top:1px \9;line-height:normal}input[type=file]{display:block}input[type=range]{display:block;width:100%}select[multiple],select[size]{height:auto}input[type=file]:focus,input[type=checkbox]:focus,input[type=radio]:focus{outline:dotted thin;outline:-webkit-focus-ring-color auto 5px;outline-offset:-2px}output{display:block;padding-top:7px;font-size:13px;line-height:1.42857143;color:#555}.form-control{display:block;width:100%;height:32px;padding:6px 12px;font-size:13px;line-height:1.42857143;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:2px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-control::-moz-placeholder{color:#999;opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eee;opacity:1}.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}textarea.form-control{height:auto}@media screen and (-webkit-min-device-pixel-ratio:0){input[type=date],input[type=time],input[type=datetime-local],input[type=month]{line-height:32px}.input-group-sm input[type=date],.input-group-sm input[type=time],.input-group-sm input[type=datetime-local],.input-group-sm input[type=month],input[type=date].input-sm,input[type=time].input-sm,input[type=datetime-local].input-sm,input[type=month].input-sm{line-height:30px}.input-group-lg input[type=date],.input-group-lg input[type=time],.input-group-lg input[type=datetime-local],.input-group-lg input[type=month],input[type=date].input-lg,input[type=time].input-lg,input[type=datetime-local].input-lg,input[type=month].input-lg{line-height:45px}}.form-group{margin-bottom:15px}.checkbox,.radio{position:relative;display:block;margin-top:10px;margin-bottom:10px}.checkbox label,.radio label{min-height:18px;padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}.checkbox input[type=checkbox],.checkbox-inline input[type=checkbox],.radio input[type=radio],.radio-inline input[type=radio]{position:absolute;margin-left:-20px;margin-top:4px \9}.checkbox+.checkbox,.radio+.radio{margin-top:-5px}.checkbox-inline,.radio-inline{position:relative;display:inline-block;padding-left:20px;margin-bottom:0;vertical-align:middle;font-weight:400;cursor:pointer}.checkbox-inline+.checkbox-inline,.radio-inline+.radio-inline{margin-top:0;margin-left:10px}.checkbox-inline.disabled,.checkbox.disabled label,.radio-inline.disabled,.radio.disabled label,fieldset[disabled] .checkbox label,fieldset[disabled] .checkbox-inline,fieldset[disabled] .radio label,fieldset[disabled] .radio-inline,fieldset[disabled] input[type=checkbox],fieldset[disabled] input[type=radio],input[type=checkbox].disabled,input[type=checkbox][disabled],input[type=radio].disabled,input[type=radio][disabled]{cursor:not-allowed}.form-control-static{padding-top:7px;padding-bottom:7px;margin-bottom:0;min-height:31px}.form-control-static.input-lg,.form-control-static.input-sm{padding-left:0;padding-right:0}.input-sm{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:1px}select.input-sm{height:30px;line-height:30px}select[multiple].input-sm,textarea.input-sm{height:auto}.form-group-sm .form-control{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:1px}select.form-group-sm .form-control{height:30px;line-height:30px}select[multiple].form-group-sm .form-control,textarea.form-group-sm .form-control{height:auto}.form-group-sm .form-control-static{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;min-height:30px}.input-lg{height:45px;padding:10px 16px;font-size:17px;line-height:1.3333333;border-radius:3px}select.input-lg{height:45px;line-height:45px}select[multiple].input-lg,textarea.input-lg{height:auto}.form-group-lg .form-control{height:45px;padding:10px 16px;font-size:17px;line-height:1.3333333;border-radius:3px}select.form-group-lg .form-control{height:45px;line-height:45px}select[multiple].form-group-lg .form-control,textarea.form-group-lg .form-control{height:auto}.form-group-lg .form-control-static{height:45px;padding:10px 16px;font-size:17px;line-height:1.3333333;min-height:35px}.has-feedback{position:relative}.has-feedback .form-control{padding-right:40px}.form-control-feedback{position:absolute;top:0;right:0;z-index:2;display:block;width:32px;height:32px;line-height:32px;text-align:center;pointer-events:none}.input-lg+.form-control-feedback{width:45px;height:45px;line-height:45px}.input-sm+.form-control-feedback{width:30px;height:30px;line-height:30px}.has-success .checkbox,.has-success .checkbox-inline,.has-success .control-label,.has-success .help-block,.has-success .radio,.has-success .radio-inline,.has-success.checkbox label,.has-success.checkbox-inline label,.has-success.radio label,.has-success.radio-inline label{color:#3c763d}.has-success .form-control{border-color:#3c763d;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-success .form-control:focus{border-color:#2b542c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;border-color:#3c763d;background-color:#dff0d8}.has-success .form-control-feedback{color:#3c763d}.has-warning .checkbox,.has-warning .checkbox-inline,.has-warning .control-label,.has-warning .help-block,.has-warning .radio,.has-warning .radio-inline,.has-warning.checkbox label,.has-warning.checkbox-inline label,.has-warning.radio label,.has-warning.radio-inline label{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-warning .form-control:focus{border-color:#66512c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;border-color:#8a6d3b;background-color:#fcf8e3}.has-warning .form-control-feedback{color:#8a6d3b}.has-error .checkbox,.has-error .checkbox-inline,.has-error .control-label,.has-error .help-block,.has-error .radio,.has-error .radio-inline,.has-error.checkbox label,.has-error.checkbox-inline label,.has-error.radio label,.has-error.radio-inline label{color:#a94442}.has-error .form-control{border-color:#a94442;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .form-control:focus{border-color:#843534;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;border-color:#a94442;background-color:#f2dede}.has-error .form-control-feedback{color:#a94442}.has-feedback label~.form-control-feedback{top:23px}.has-feedback label.sr-only~.form-control-feedback{top:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#404040}.form-horizontal .checkbox,.form-horizontal .checkbox-inline,.form-horizontal .radio,.form-horizontal .radio-inline{margin-top:0;margin-bottom:0;padding-top:7px}.form-horizontal .checkbox,.form-horizontal .radio{min-height:25px}.form-horizontal .form-group{margin-left:0;margin-right:0}.form-horizontal .has-feedback .form-control-feedback{right:0}@media (min-width:768px){.form-inline .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .form-control-static{display:inline-block}.form-inline .input-group{display:inline-table;vertical-align:middle}.form-inline .input-group .form-control,.form-inline .input-group .input-group-addon,.form-inline .input-group .input-group-btn{width:auto}.form-inline .input-group>.form-control{width:100%}.form-inline .control-label{margin-bottom:0;vertical-align:middle}.form-inline .checkbox,.form-inline .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.form-inline .checkbox label,.form-inline .radio label{padding-left:0}.form-inline .checkbox input[type=checkbox],.form-inline .radio input[type=radio]{position:relative;margin-left:0}.form-inline .has-feedback .form-control-feedback{top:0}.form-horizontal .control-label{text-align:right;margin-bottom:0;padding-top:7px}.form-horizontal .form-group-lg .control-label{padding-top:14.33px}.form-horizontal .form-group-sm .control-label{padding-top:6px}}.btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:13px;line-height:1.42857143;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:dotted thin;outline:-webkit-focus-ring-color auto 5px;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;text-decoration:none}.btn.active,.btn:active{outline:0;background-image:none;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;pointer-events:none;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default.active,.btn-default.focus,.btn-default:active,.btn-default:focus,.btn-default:hover,.open>.dropdown-toggle.btn-default{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default.active,.btn-default:active,.open>.dropdown-toggle.btn-default{background-image:none}.btn-default.disabled,.btn-default.disabled.active,.btn-default.disabled.focus,.btn-default.disabled:active,.btn-default.disabled:focus,.btn-default.disabled:hover,.btn-default[disabled],.btn-default[disabled].active,.btn-default[disabled].focus,.btn-default[disabled]:active,.btn-default[disabled]:focus,.btn-default[disabled]:hover,fieldset[disabled] .btn-default,fieldset[disabled] .btn-default.active,fieldset[disabled] .btn-default.focus,fieldset[disabled] .btn-default:active,fieldset[disabled] .btn-default:focus,fieldset[disabled] .btn-default:hover{background-color:#fff;border-color:#ccc}.btn-default .badge{color:#fff;background-color:#333}.btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}.btn-primary.active,.btn-primary.focus,.btn-primary:active,.btn-primary:focus,.btn-primary:hover,.open>.dropdown-toggle.btn-primary{color:#fff;background-color:#286090;border-color:#204d74}.btn-primary.active,.btn-primary:active,.open>.dropdown-toggle.btn-primary{background-image:none}.btn-primary.disabled,.btn-primary.disabled.active,.btn-primary.disabled.focus,.btn-primary.disabled:active,.btn-primary.disabled:focus,.btn-primary.disabled:hover,.btn-primary[disabled],.btn-primary[disabled].active,.btn-primary[disabled].focus,.btn-primary[disabled]:active,.btn-primary[disabled]:focus,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary,fieldset[disabled] .btn-primary.active,fieldset[disabled] .btn-primary.focus,fieldset[disabled] .btn-primary:active,fieldset[disabled] .btn-primary:focus,fieldset[disabled] .btn-primary:hover{background-color:#337ab7;border-color:#2e6da4}.btn-primary .badge{color:#337ab7;background-color:#fff}.btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success.active,.btn-success.focus,.btn-success:active,.btn-success:focus,.btn-success:hover,.open>.dropdown-toggle.btn-success{color:#fff;background-color:#449d44;border-color:#398439}.btn-success.active,.btn-success:active,.open>.dropdown-toggle.btn-success{background-image:none}.btn-success.disabled,.btn-success.disabled.active,.btn-success.disabled.focus,.btn-success.disabled:active,.btn-success.disabled:focus,.btn-success.disabled:hover,.btn-success[disabled],.btn-success[disabled].active,.btn-success[disabled].focus,.btn-success[disabled]:active,.btn-success[disabled]:focus,.btn-success[disabled]:hover,fieldset[disabled] .btn-success,fieldset[disabled] .btn-success.active,fieldset[disabled] .btn-success.focus,fieldset[disabled] .btn-success:active,fieldset[disabled] .btn-success:focus,fieldset[disabled] .btn-success:hover{background-color:#5cb85c;border-color:#4cae4c}.btn-success .badge{color:#5cb85c;background-color:#fff}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info.active,.btn-info.focus,.btn-info:active,.btn-info:focus,.btn-info:hover,.open>.dropdown-toggle.btn-info{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info.active,.btn-info:active,.open>.dropdown-toggle.btn-info{background-image:none}.btn-info.disabled,.btn-info.disabled.active,.btn-info.disabled.focus,.btn-info.disabled:active,.btn-info.disabled:focus,.btn-info.disabled:hover,.btn-info[disabled],.btn-info[disabled].active,.btn-info[disabled].focus,.btn-info[disabled]:active,.btn-info[disabled]:focus,.btn-info[disabled]:hover,fieldset[disabled] .btn-info,fieldset[disabled] .btn-info.active,fieldset[disabled] .btn-info.focus,fieldset[disabled] .btn-info:active,fieldset[disabled] .btn-info:focus,fieldset[disabled] .btn-info:hover{background-color:#5bc0de;border-color:#46b8da}.btn-info .badge{color:#5bc0de;background-color:#fff}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning.active,.btn-warning.focus,.btn-warning:active,.btn-warning:focus,.btn-warning:hover,.open>.dropdown-toggle.btn-warning{color:#fff;background-color:#ec971f;border-color:#d58512}.btn-warning.active,.btn-warning:active,.open>.dropdown-toggle.btn-warning{background-image:none}.btn-warning.disabled,.btn-warning.disabled.active,.btn-warning.disabled.focus,.btn-warning.disabled:active,.btn-warning.disabled:focus,.btn-warning.disabled:hover,.btn-warning[disabled],.btn-warning[disabled].active,.btn-warning[disabled].focus,.btn-warning[disabled]:active,.btn-warning[disabled]:focus,.btn-warning[disabled]:hover,fieldset[disabled] .btn-warning,fieldset[disabled] .btn-warning.active,fieldset[disabled] .btn-warning.focus,fieldset[disabled] .btn-warning:active,fieldset[disabled] .btn-warning:focus,fieldset[disabled] .btn-warning:hover{background-color:#f0ad4e;border-color:#eea236}.btn-warning .badge{color:#f0ad4e;background-color:#fff}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger.active,.btn-danger.focus,.btn-danger:active,.btn-danger:focus,.btn-danger:hover,.open>.dropdown-toggle.btn-danger{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger.active,.btn-danger:active,.open>.dropdown-toggle.btn-danger{background-image:none}.btn-danger.disabled,.btn-danger.disabled.active,.btn-danger.disabled.focus,.btn-danger.disabled:active,.btn-danger.disabled:focus,.btn-danger.disabled:hover,.btn-danger[disabled],.btn-danger[disabled].active,.btn-danger[disabled].focus,.btn-danger[disabled]:active,.btn-danger[disabled]:focus,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger,fieldset[disabled] .btn-danger.active,fieldset[disabled] .btn-danger.focus,fieldset[disabled] .btn-danger:active,fieldset[disabled] .btn-danger:focus,fieldset[disabled] .btn-danger:hover{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}.btn-link{color:#337ab7;font-weight:400;border-radius:0}.btn-link,.btn-link.active,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;-webkit-box-shadow:none;box-shadow:none}.btn-link,.btn-link:active,.btn-link:focus,.btn-link:hover{border-color:transparent}.btn-link:focus,.btn-link:hover{color:#23527c;text-decoration:underline;background-color:transparent}.btn-link[disabled]:focus,.btn-link[disabled]:hover,fieldset[disabled] .btn-link:focus,fieldset[disabled] .btn-link:hover{color:#777;text-decoration:none}.btn-group-lg>.btn,.btn-lg{padding:10px 16px;font-size:17px;line-height:1.3333333;border-radius:3px}.btn-group-sm>.btn,.btn-sm{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:1px}.btn-group-xs>.btn,.btn-xs{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:1px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:5px}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.fade{opacity:0;-webkit-transition:opacity .15s linear;-o-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}tr.collapse.in{display:table-row}tbody.collapse.in{display:table-row-group}.collapsing{position:relative;height:0;overflow:hidden;-webkit-transition-property:height,visibility;transition-property:height,visibility;-webkit-transition-duration:.35s;transition-duration:.35s;-webkit-transition-timing-function:ease;transition-timing-function:ease}.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px dashed;border-right:4px solid transparent;border-left:4px solid transparent}.dropdown,.dropup{position:relative}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;font-size:13px;text-align:left;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:2px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175);background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{height:1px;margin:8px 0;overflow:hidden;background-color:#e5e5e5}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.42857143;color:#333;white-space:nowrap}.dropdown-menu>li>a:focus,.dropdown-menu>li>a:hover{text-decoration:none;color:#262626;background-color:#f5f5f5}.dropdown-menu>.active>a,.dropdown-menu>.active>a:focus,.dropdown-menu>.active>a:hover{color:#fff;text-decoration:none;outline:0;background-color:#337ab7}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{color:#777}.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{text-decoration:none;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);cursor:not-allowed}.open>.dropdown-menu{display:block}.open>a{outline:0}.dropdown-menu-right{left:auto;right:0}.dropdown-menu-left{left:0;right:auto}.dropdown-header{display:block;padding:3px 20px;font-size:12px;line-height:1.42857143;color:#777;white-space:nowrap}.dropdown-backdrop{position:fixed;left:0;right:0;bottom:0;top:0;z-index:990}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;border-bottom:4px solid;content:""}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:2px}@media (min-width:541px){.navbar-right .dropdown-menu{left:auto;right:0}.navbar-right .dropdown-menu-left{left:0;right:auto}}.btn-group,.btn-group-vertical{position:relative;display:inline-block;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;float:left}.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:2}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{margin-left:-1px}.btn-toolbar{margin-left:-5px}.btn-toolbar .btn-group,.btn-toolbar .input-group{float:left}.btn-toolbar>.btn,.btn-toolbar>.btn-group,.btn-toolbar>.input-group{margin-left:5px}.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}.btn-group>.btn:first-child{margin-left:0}.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-top-right-radius:0}.btn-group>.btn:last-child:not(:first-child),.btn-group>.dropdown-toggle:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0}.btn-group>.btn-group{float:left}.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;border-top-right-radius:0}.btn-group>.btn-group:last-child:not(:first-child)>.btn:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{padding-left:8px;padding-right:8px}.btn-group>.btn-lg+.dropdown-toggle{padding-left:12px;padding-right:12px}.btn-group.open .dropdown-toggle{-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn-group.open .dropdown-toggle.btn-link{-webkit-box-shadow:none;box-shadow:none}.btn .caret{margin-left:0}.btn-lg .caret{border-width:5px 5px 0}.dropup .btn-lg .caret{border-width:0 5px 5px}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group,.btn-group-vertical>.btn-group>.btn{display:block;float:none;width:100%;max-width:100%}.btn-group-vertical>.btn-group>.btn{float:none}.btn-group-vertical>.btn+.btn,.btn-group-vertical>.btn+.btn-group,.btn-group-vertical>.btn-group+.btn,.btn-group-vertical>.btn-group+.btn-group{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:not(:first-child):not(:last-child){border-radius:0}.btn-group-vertical>.btn:first-child:not(:last-child){border-top-right-radius:2px;border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn:last-child:not(:first-child){border-bottom-left-radius:2px;border-top-right-radius:0;border-top-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group-vertical>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group-vertical>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:last-child:not(:first-child)>.btn:first-child{border-top-right-radius:0;border-top-left-radius:0}.btn-group-justified{display:table;width:100%;table-layout:fixed;border-collapse:separate}.btn-group-justified>.btn,.btn-group-justified>.btn-group{float:none;display:table-cell;width:1%}.btn-group-justified>.btn-group .btn{width:100%}.btn-group-justified>.btn-group .dropdown-menu{left:auto}[data-toggle=buttons]>.btn input[type=checkbox],[data-toggle=buttons]>.btn input[type=radio],[data-toggle=buttons]>.btn-group>.btn input[type=checkbox],[data-toggle=buttons]>.btn-group>.btn input[type=radio]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.input-group{position:relative;display:table;border-collapse:separate}.input-group[class*=col-]{float:none;padding-left:0;padding-right:0}.input-group .form-control{position:relative;z-index:2;float:left;width:100%;margin-bottom:0}.input-group-lg>.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.btn{height:45px;padding:10px 16px;font-size:17px;line-height:1.3333333;border-radius:3px}select.input-group-lg>.form-control,select.input-group-lg>.input-group-addon,select.input-group-lg>.input-group-btn>.btn{height:45px;line-height:45px}select[multiple].input-group-lg>.form-control,select[multiple].input-group-lg>.input-group-addon,select[multiple].input-group-lg>.input-group-btn>.btn,textarea.input-group-lg>.form-control,textarea.input-group-lg>.input-group-addon,textarea.input-group-lg>.input-group-btn>.btn{height:auto}.input-group-sm>.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.btn{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:1px}select.input-group-sm>.form-control,select.input-group-sm>.input-group-addon,select.input-group-sm>.input-group-btn>.btn{height:30px;line-height:30px}select[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.input-group-addon,select[multiple].input-group-sm>.input-group-btn>.btn,textarea.input-group-sm>.form-control,textarea.input-group-sm>.input-group-addon,textarea.input-group-sm>.input-group-btn>.btn{height:auto}.input-group .form-control,.input-group-addon,.input-group-btn{display:table-cell}.input-group .form-control:not(:first-child):not(:last-child),.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:13px;font-weight:400;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:2px}.input-group-addon.input-sm{padding:5px 10px;font-size:12px;border-radius:1px}.input-group-addon.input-lg{padding:10px 16px;font-size:17px;border-radius:3px}.input-group-addon input[type=checkbox],.input-group-addon input[type=radio]{margin-top:0}.input-group .form-control:first-child,.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn-group:not(:last-child)>.btn,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-top-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group .form-control:last-child,.input-group-addon:last-child,.input-group-btn:first-child>.btn-group:not(:first-child)>.btn,.input-group-btn:first-child>.btn:not(:first-child),.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group>.btn,.input-group-btn:last-child>.dropdown-toggle{border-bottom-left-radius:0;border-top-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{position:relative;font-size:0;white-space:nowrap}.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-1px}.input-group-btn>.btn:active,.input-group-btn>.btn:focus,.input-group-btn>.btn:hover{z-index:2}.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group{margin-right:-1px}.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group{margin-left:-1px}.nav{margin-bottom:0;padding-left:0;list-style:none}.nav>li{position:relative;display:block}.nav>li>a{position:relative;display:block;padding:10px 15px}.nav>li>a:focus,.nav>li>a:hover{text-decoration:none;background-color:#eee}.nav>li.disabled>a{color:#777}.nav>li.disabled>a:focus,.nav>li.disabled>a:hover{color:#777;text-decoration:none;background-color:transparent;cursor:not-allowed}.nav .open>a,.nav .open>a:focus,.nav .open>a:hover{background-color:#eee;border-color:#337ab7}.nav .nav-divider{height:1px;margin:8px 0;overflow:hidden;background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:2px 2px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:focus,.nav-tabs>li.active>a:hover{color:#555;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent;cursor:default}.nav-tabs.nav-justified{width:100%;border-bottom:0}.nav-tabs.nav-justified>li{float:none}.nav-tabs.nav-justified>li>a{text-align:center;margin-bottom:5px;margin-right:0;border-radius:2px}.nav-tabs.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-tabs.nav-justified>li{display:table-cell;width:1%}.nav-tabs.nav-justified>li>a{margin-bottom:0;border-bottom:1px solid #ddd;border-radius:2px 2px 0 0}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border-bottom-color:#fff}}.nav-pills>li{float:left}.nav-pills>li>a{border-radius:2px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:focus,.nav-pills>li.active>a:hover{color:#fff;background-color:#337ab7}.nav-stacked>li{float:none}.nav-stacked>li+li{margin-top:2px;margin-left:0}.nav-justified{width:100%}.nav-justified>li{float:none}.nav-justified>li>a{text-align:center;margin-bottom:5px}.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}.nav-tabs-justified{border-bottom:0}.nav-tabs-justified>li>a{margin-right:0;border-radius:2px}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-justified>li{display:table-cell;width:1%}.nav-justified>li>a{margin-bottom:0}.nav-tabs-justified>li>a{border-bottom:1px solid #ddd;border-radius:2px 2px 0 0}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-right-radius:0;border-top-left-radius:0}.navbar{position:relative;min-height:30px;margin-bottom:18px;border:1px solid transparent}.navbar-collapse{overflow-x:visible;padding-right:0;padding-left:0;border-top:1px solid transparent;box-shadow:inset 0 1px 0 rgba(255,255,255,.1);-webkit-overflow-scrolling:touch}.navbar-collapse.in{overflow-y:auto}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:340px}@media (max-device-width:540px)and (orientation:landscape){.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:200px}}.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:0;margin-left:0}.navbar-static-top{z-index:1000;border-width:0 0 1px}.navbar-fixed-bottom,.navbar-fixed-top{position:fixed;right:0;left:0;z-index:1030}@media (min-width:541px){.navbar{border-radius:2px}.navbar-header{float:left}.navbar-collapse{width:auto;border-top:0;box-shadow:none}.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}.navbar-collapse.in{overflow-y:visible}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse{padding-left:0;padding-right:0}.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:0;margin-left:0}.navbar-fixed-bottom,.navbar-fixed-top,.navbar-static-top{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}.navbar-brand{float:left;padding:6px 0;font-size:17px;line-height:18px;height:30px}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-brand>img{display:block}.navbar-toggle{position:relative;float:right;margin-right:0;padding:9px 10px;margin-top:-2px;margin-bottom:-2px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:2px}.navbar-toggle:focus{outline:0}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media (min-width:541px){.navbar>.container .navbar-brand,.navbar>.container-fluid .navbar-brand{margin-left:0}.navbar-toggle{display:none}}.navbar-nav{margin:3px 0}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:18px}@media (max-width:540px){.navbar-nav .open .dropdown-menu{position:static;float:none;width:auto;margin-top:0;background-color:transparent;border:0;box-shadow:none}.navbar-nav .open .dropdown-menu .dropdown-header,.navbar-nav .open .dropdown-menu>li>a{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:18px}.navbar-nav .open .dropdown-menu>li>a:focus,.navbar-nav .open .dropdown-menu>li>a:hover{background-image:none}}@media (min-width:541px){.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:6px;padding-bottom:6px}}.navbar-form{padding:10px 0;border-top:1px solid transparent;border-bottom:1px solid transparent;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.1);box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.1);margin:-1px 0}@media (min-width:768px){.navbar-form .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.navbar-form .form-control{display:inline-block;width:auto;vertical-align:middle}.navbar-form .form-control-static{display:inline-block}.navbar-form .input-group{display:inline-table;vertical-align:middle}.navbar-form .input-group .form-control,.navbar-form .input-group .input-group-addon,.navbar-form .input-group .input-group-btn{width:auto}.navbar-form .input-group>.form-control{width:100%}.navbar-form .control-label{margin-bottom:0;vertical-align:middle}.navbar-form .checkbox,.navbar-form .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.navbar-form .checkbox label,.navbar-form .radio label{padding-left:0}.navbar-form .checkbox input[type=checkbox],.navbar-form .radio input[type=radio]{position:relative;margin-left:0}.navbar-form .has-feedback .form-control-feedback{top:0}}@media (max-width:540px){.navbar-form .form-group{margin-bottom:5px}.navbar-form .form-group:last-child{margin-bottom:0}}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-right-radius:0;border-top-left-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{margin-bottom:0;border-radius:2px 2px 0 0}.navbar-btn{margin-top:-1px;margin-bottom:-1px}.navbar-btn.btn-sm{margin-top:0;margin-bottom:0}.navbar-btn.btn-xs{margin-top:4px;margin-bottom:4px}.navbar-text{margin-top:6px;margin-bottom:6px}@media (min-width:541px){.navbar-form{width:auto;border:0;margin-left:0;margin-right:0;padding-top:0;padding-bottom:0;-webkit-box-shadow:none;box-shadow:none}.navbar-text{float:left;margin-left:0;margin-right:0}.navbar-left{float:left!important;float:left}.navbar-right{float:right!important;float:right;margin-right:0}.navbar-right~.navbar-right{margin-right:0}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:focus,.navbar-default .navbar-brand:hover{color:#5e5e5e;background-color:transparent}.navbar-default .navbar-nav>li>a,.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a:focus,.navbar-default .navbar-nav>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:focus,.navbar-default .navbar-nav>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:focus,.navbar-default .navbar-nav>.disabled>a:hover{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:focus,.navbar-default .navbar-nav>.open>a:hover{background-color:#e7e7e7;color:#555}@media (max-width:540px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-default .btn-link{color:#777}.navbar-default .btn-link:focus,.navbar-default .btn-link:hover{color:#333}.navbar-default .btn-link[disabled]:focus,.navbar-default .btn-link[disabled]:hover,fieldset[disabled] .navbar-default .btn-link:focus,fieldset[disabled] .navbar-default .btn-link:hover{color:#ccc}.navbar-inverse{background-color:#222;border-color:#080808}.navbar-inverse .navbar-brand{color:#9d9d9d}.navbar-inverse .navbar-brand:focus,.navbar-inverse .navbar-brand:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>li>a,.navbar-inverse .navbar-text{color:#9d9d9d}.navbar-inverse .navbar-nav>li>a:focus,.navbar-inverse .navbar-nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:focus,.navbar-inverse .navbar-nav>.active>a:hover{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:focus,.navbar-inverse .navbar-nav>.disabled>a:hover{color:#444;background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:focus,.navbar-inverse .navbar-toggle:hover{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:focus,.navbar-inverse .navbar-nav>.open>a:hover{background-color:#080808;color:#fff}@media (max-width:540px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu .divider{background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#9d9d9d}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#444;background-color:transparent}}.navbar-inverse .navbar-link{color:#9d9d9d}.navbar-inverse .navbar-link:hover{color:#fff}.navbar-inverse .btn-link{color:#9d9d9d}.navbar-inverse .btn-link:focus,.navbar-inverse .btn-link:hover{color:#fff}.navbar-inverse .btn-link[disabled]:focus,.navbar-inverse .btn-link[disabled]:hover,fieldset[disabled] .navbar-inverse .btn-link:focus,fieldset[disabled] .navbar-inverse .btn-link:hover{color:#444}.breadcrumb{padding:8px 15px;margin-bottom:18px;list-style:none;background-color:#f5f5f5;border-radius:2px}.breadcrumb>li{display:inline-block}.breadcrumb>li+li:before{content:"/\00a0";padding:0 5px;color:#5e5e5e}.breadcrumb>.active{color:#777}.pagination{display:inline-block;padding-left:0;margin:18px 0;border-radius:2px}.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;line-height:1.42857143;text-decoration:none;color:#337ab7;background-color:#fff;border:1px solid #ddd;margin-left:-1px}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-bottom-left-radius:2px;border-top-left-radius:2px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-bottom-right-radius:2px;border-top-right-radius:2px}.pagination>li>a:focus,.pagination>li>a:hover,.pagination>li>span:focus,.pagination>li>span:hover{color:#23527c;background-color:#eee;border-color:#ddd}.pagination>.active>a,.pagination>.active>a:focus,.pagination>.active>a:hover,.pagination>.active>span,.pagination>.active>span:focus,.pagination>.active>span:hover{z-index:2;color:#fff;background-color:#337ab7;border-color:#337ab7;cursor:default}.pagination>.disabled>a,.pagination>.disabled>a:focus,.pagination>.disabled>a:hover,.pagination>.disabled>span,.pagination>.disabled>span:focus,.pagination>.disabled>span:hover{color:#777;background-color:#fff;border-color:#ddd;cursor:not-allowed}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:17px}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-bottom-left-radius:3px;border-top-left-radius:3px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-bottom-right-radius:3px;border-top-right-radius:3px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-bottom-left-radius:1px;border-top-left-radius:1px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-bottom-right-radius:1px;border-top-right-radius:1px}.pager{padding-left:0;margin:18px 0;list-style:none;text-align:center}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;border-radius:15px}.pager li>a:focus,.pager li>a:hover{text-decoration:none;background-color:#eee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:focus,.pager .disabled>a:hover,.pager .disabled>span{color:#777;background-color:#fff;cursor:not-allowed}.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}a.label:focus,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}.label:empty{display:none}.btn .label{position:relative;top:-1px}.label-default{background-color:#777}.label-default[href]:focus,.label-default[href]:hover{background-color:#5e5e5e}.label-primary{background-color:#337ab7}.label-primary[href]:focus,.label-primary[href]:hover{background-color:#286090}.label-success{background-color:#5cb85c}.label-success[href]:focus,.label-success[href]:hover{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:focus,.label-info[href]:hover{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:focus,.label-warning[href]:hover{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:focus,.label-danger[href]:hover{background-color:#c9302c}.badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:700;color:#fff;line-height:1;vertical-align:baseline;white-space:nowrap;text-align:center;background-color:#777;border-radius:10px}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.btn-group-xs>.btn .badge,.btn-xs .badge{top:0;padding:1px 5px}a.badge:focus,a.badge:hover{color:#fff;text-decoration:none;cursor:pointer}.list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#337ab7;background-color:#fff}.list-group-item>.badge{float:right}.list-group-item>.badge+.badge{margin-right:5px}.nav-pills>li>a>.badge{margin-left:3px}.jumbotron{padding:30px 15px;margin-bottom:30px;color:inherit;background-color:#eee}.jumbotron .h1,.jumbotron h1{color:inherit}.jumbotron p{margin-bottom:15px;font-size:20px;font-weight:200}.jumbotron>hr{border-top-color:#d5d5d5}.container .jumbotron,.container-fluid .jumbotron{border-radius:3px}.jumbotron .container{max-width:100%}@media screen and (min-width:768px){.jumbotron{padding:48px 0}.container .jumbotron,.container-fluid .jumbotron{padding-left:60px;padding-right:60px}.jumbotron .h1,.jumbotron h1{font-size:58.5px}}.thumbnail{display:block;padding:4px;margin-bottom:18px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:2px;-webkit-transition:border .2s ease-in-out;-o-transition:border .2s ease-in-out;transition:border .2s ease-in-out}.thumbnail a>img,.thumbnail>img{margin-left:auto;margin-right:auto}a.thumbnail.active,a.thumbnail:focus,a.thumbnail:hover{border-color:#337ab7}.thumbnail .caption{padding:9px;color:#000}.alert{padding:15px;margin-bottom:18px;border:1px solid transparent;border-radius:2px}.alert h4{margin-top:0;color:inherit}.alert .alert-link{font-weight:700}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable,.alert-dismissible{padding-right:35px}.alert-dismissable .close,.alert-dismissible .close{position:relative;top:-2px;right:-21px;color:inherit}.alert-success{background-color:#dff0d8;border-color:#d6e9c6;color:#3c763d}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{background-color:#d9edf7;border-color:#bce8f1;color:#31708f}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{background-color:#fcf8e3;border-color:#faebcc;color:#8a6d3b}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{background-color:#f2dede;border-color:#ebccd1;color:#a94442}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.progress{overflow:hidden;height:18px;margin-bottom:18px;background-color:#f5f5f5;border-radius:2px;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.1);box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.progress-bar{float:left;width:0;height:100%;font-size:12px;line-height:18px;color:#fff;text-align:center;background-color:#337ab7;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-webkit-transition:width .6s ease;-o-transition:width .6s ease;transition:width .6s ease}.progress-bar-striped,.progress-striped .progress-bar{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-size:40px 40px}.progress-bar.active,.progress.active .progress-bar{-webkit-animation:progress-bar-stripes 2s linear infinite;-o-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-bar-success{background-color:#5cb85c}.progress-striped .progress-bar-success{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-bar-info{background-color:#5bc0de}.progress-striped .progress-bar-info{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-bar-warning{background-color:#f0ad4e}.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-bar-danger{background-color:#d9534f}.progress-striped .progress-bar-danger{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.media{margin-top:15px}.media:first-child{margin-top:0}.media,.media-body{zoom:1;overflow:hidden}.media-body{width:10000px}.media-object{display:block}.media-right,.media>.pull-right{padding-left:10px}.media-left,.media>.pull-left{padding-right:10px}.media-body,.media-left,.media-right{display:table-cell;vertical-align:top}.media-middle{vertical-align:middle}.media-bottom{vertical-align:bottom}.media-heading{margin-top:0;margin-bottom:5px}.media-list{padding-left:0;list-style:none}.list-group{margin-bottom:20px;padding-left:0}.list-group-item{position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd}.list-group-item:first-child{border-top-right-radius:2px;border-top-left-radius:2px}.list-group-item:last-child{margin-bottom:0;border-bottom-right-radius:2px;border-bottom-left-radius:2px}a.list-group-item{color:#555}a.list-group-item .list-group-item-heading{color:#333}a.list-group-item:focus,a.list-group-item:hover{text-decoration:none;color:#555;background-color:#f5f5f5}.list-group-item.disabled,.list-group-item.disabled:focus,.list-group-item.disabled:hover{background-color:#eee;color:#777;cursor:not-allowed}.list-group-item.disabled .list-group-item-heading,.list-group-item.disabled:focus .list-group-item-heading,.list-group-item.disabled:hover .list-group-item-heading{color:inherit}.list-group-item.disabled .list-group-item-text,.list-group-item.disabled:focus .list-group-item-text,.list-group-item.disabled:hover .list-group-item-text{color:#777}.list-group-item.active,.list-group-item.active:focus,.list-group-item.active:hover{z-index:2;color:#fff;background-color:#337ab7;border-color:#337ab7}.list-group-item.active .list-group-item-heading,.list-group-item.active .list-group-item-heading>.small,.list-group-item.active .list-group-item-heading>small,.list-group-item.active:focus .list-group-item-heading,.list-group-item.active:focus .list-group-item-heading>.small,.list-group-item.active:focus .list-group-item-heading>small,.list-group-item.active:hover .list-group-item-heading,.list-group-item.active:hover .list-group-item-heading>.small,.list-group-item.active:hover .list-group-item-heading>small{color:inherit}.list-group-item.active .list-group-item-text,.list-group-item.active:focus .list-group-item-text,.list-group-item.active:hover .list-group-item-text{color:#c7ddef}.list-group-item-success{color:#3c763d;background-color:#dff0d8}a.list-group-item-success{color:#3c763d}a.list-group-item-success .list-group-item-heading{color:inherit}a.list-group-item-success:focus,a.list-group-item-success:hover{color:#3c763d;background-color:#d0e9c6}a.list-group-item-success.active,a.list-group-item-success.active:focus,a.list-group-item-success.active:hover{color:#fff;background-color:#3c763d;border-color:#3c763d}.list-group-item-info{color:#31708f;background-color:#d9edf7}a.list-group-item-info{color:#31708f}a.list-group-item-info .list-group-item-heading{color:inherit}a.list-group-item-info:focus,a.list-group-item-info:hover{color:#31708f;background-color:#c4e3f3}a.list-group-item-info.active,a.list-group-item-info.active:focus,a.list-group-item-info.active:hover{color:#fff;background-color:#31708f;border-color:#31708f}.list-group-item-warning{color:#8a6d3b;background-color:#fcf8e3}a.list-group-item-warning{color:#8a6d3b}a.list-group-item-warning .list-group-item-heading{color:inherit}a.list-group-item-warning:focus,a.list-group-item-warning:hover{color:#8a6d3b;background-color:#faf2cc}a.list-group-item-warning.active,a.list-group-item-warning.active:focus,a.list-group-item-warning.active:hover{color:#fff;background-color:#8a6d3b;border-color:#8a6d3b}.list-group-item-danger{color:#a94442;background-color:#f2dede}a.list-group-item-danger{color:#a94442}a.list-group-item-danger .list-group-item-heading{color:inherit}a.list-group-item-danger:focus,a.list-group-item-danger:hover{color:#a94442;background-color:#ebcccc}a.list-group-item-danger.active,a.list-group-item-danger.active:focus,a.list-group-item-danger.active:hover{color:#fff;background-color:#a94442;border-color:#a94442}.list-group-item-heading{margin-top:0;margin-bottom:5px}.list-group-item-text{margin-bottom:0;line-height:1.3}.panel{margin-bottom:18px;background-color:#fff;border:1px solid transparent;border-radius:2px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05)}.panel-body{padding:15px}.panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-right-radius:1px;border-top-left-radius:1px}.panel-heading>.dropdown .dropdown-toggle{color:inherit}.panel-title{margin-top:0;margin-bottom:0;font-size:15px;color:inherit}.panel-title>.small,.panel-title>.small>a,.panel-title>a,.panel-title>small,.panel-title>small>a{color:inherit}.panel-footer{padding:10px 15px;background-color:#f5f5f5;border-top:1px solid #ddd;border-bottom-right-radius:1px;border-bottom-left-radius:1px}.panel>.list-group,.panel>.panel-collapse>.list-group{margin-bottom:0}.panel>.list-group .list-group-item,.panel>.panel-collapse>.list-group .list-group-item{border-width:1px 0;border-radius:0}.panel>.list-group:first-child .list-group-item:first-child,.panel>.panel-collapse>.list-group:first-child .list-group-item:first-child{border-top:0;border-top-right-radius:1px;border-top-left-radius:1px}.panel>.list-group:last-child .list-group-item:last-child,.panel>.panel-collapse>.list-group:last-child .list-group-item:last-child{border-bottom:0;border-bottom-right-radius:1px;border-bottom-left-radius:1px}.list-group+.panel-footer,.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}.panel>.panel-collapse>.table,.panel>.table,.panel>.table-responsive>.table{margin-bottom:0}.panel>.panel-collapse>.table caption,.panel>.table caption,.panel>.table-responsive>.table caption{padding-left:15px;padding-right:15px}.panel>.table-responsive:first-child>.table:first-child,.panel>.table:first-child{border-top-right-radius:1px;border-top-left-radius:1px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child,.panel>.table:first-child>thead:first-child>tr:first-child{border-top-left-radius:1px;border-top-right-radius:1px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table:first-child>thead:first-child>tr:first-child th:first-child{border-top-left-radius:1px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table:first-child>thead:first-child>tr:first-child th:last-child{border-top-right-radius:1px}.panel>.table-responsive:last-child>.table:last-child,.panel>.table:last-child{border-bottom-right-radius:1px;border-bottom-left-radius:1px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child{border-bottom-left-radius:1px;border-bottom-right-radius:1px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:first-child{border-bottom-left-radius:1px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:last-child{border-bottom-right-radius:1px}.panel>.panel-body+.table,.panel>.panel-body+.table-responsive,.panel>.table+.panel-body,.panel>.table-responsive+.panel-body{border-top:1px solid #ddd}.panel>.table>tbody:first-child>tr:first-child td,.panel>.table>tbody:first-child>tr:first-child th{border-top:0}.panel>.table-bordered,.panel>.table-responsive>.table-bordered{border:0}.panel>.table-bordered>tbody>tr>td:first-child,.panel>.table-bordered>tbody>tr>th:first-child,.panel>.table-bordered>tfoot>tr>td:first-child,.panel>.table-bordered>tfoot>tr>th:first-child,.panel>.table-bordered>thead>tr>td:first-child,.panel>.table-bordered>thead>tr>th:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,.panel>.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.panel>.table-bordered>tbody>tr>td:last-child,.panel>.table-bordered>tbody>tr>th:last-child,.panel>.table-bordered>tfoot>tr>td:last-child,.panel>.table-bordered>tfoot>tr>th:last-child,.panel>.table-bordered>thead>tr>td:last-child,.panel>.table-bordered>thead>tr>th:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,.panel>.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.panel>.table-bordered>tbody>tr:first-child>td,.panel>.table-bordered>tbody>tr:first-child>th,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:first-child>td,.panel>.table-bordered>thead>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,.panel>.table-responsive>.table-bordered>thead>tr:first-child>th{border-bottom:0}.panel>.table-responsive{border:0;margin-bottom:0}.panel-group{margin-bottom:18px}.panel-group .panel{margin-bottom:0;border-radius:2px}.panel-group .panel+.panel{margin-top:5px}.panel-group .panel-heading{border-bottom:0}.panel-group .panel-heading+.panel-collapse>.list-group,.panel-group .panel-heading+.panel-collapse>.panel-body{border-top:1px solid #ddd}.panel-group .panel-footer{border-top:0}.panel-group .panel-footer+.panel-collapse .panel-body{border-bottom:1px solid #ddd}.panel-default{border-color:#ddd}.panel-default>.panel-heading{color:#333;background-color:#f5f5f5;border-color:#ddd}.panel-default>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ddd}.panel-default>.panel-heading .badge{color:#f5f5f5;background-color:#333}.panel-default>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ddd}.panel-primary{border-color:#337ab7}.panel-primary>.panel-heading{color:#fff;background-color:#337ab7;border-color:#337ab7}.panel-primary>.panel-heading+.panel-collapse>.panel-body{border-top-color:#337ab7}.panel-primary>.panel-heading .badge{color:#337ab7;background-color:#fff}.panel-primary>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#337ab7}.panel-success{border-color:#d6e9c6}.panel-success>.panel-heading{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.panel-success>.panel-heading+.panel-collapse>.panel-body{border-top-color:#d6e9c6}.panel-success>.panel-heading .badge{color:#dff0d8;background-color:#3c763d}.panel-success>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#d6e9c6}.panel-info{border-color:#bce8f1}.panel-info>.panel-heading{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.panel-info>.panel-heading+.panel-collapse>.panel-body{border-top-color:#bce8f1}.panel-info>.panel-heading .badge{color:#d9edf7;background-color:#31708f}.panel-info>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#bce8f1}.panel-warning{border-color:#faebcc}.panel-warning>.panel-heading{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.panel-warning>.panel-heading+.panel-collapse>.panel-body{border-top-color:#faebcc}.panel-warning>.panel-heading .badge{color:#fcf8e3;background-color:#8a6d3b}.panel-warning>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#faebcc}.panel-danger{border-color:#ebccd1}.panel-danger>.panel-heading{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.panel-danger>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ebccd1}.panel-danger>.panel-heading .badge{color:#f2dede;background-color:#a94442}.panel-danger>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ebccd1}.embed-responsive{position:relative;display:block;height:0;padding:0;overflow:hidden}.embed-responsive .embed-responsive-item,.embed-responsive embed,.embed-responsive iframe,.embed-responsive object,.embed-responsive video{position:absolute;top:0;left:0;bottom:0;height:100%;width:100%;border:0}.embed-responsive-16by9{padding-bottom:56.25%}.embed-responsive-4by3{padding-bottom:75%}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:2px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.05);box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,.15)}.well-lg{padding:24px;border-radius:3px}.well-sm{padding:9px;border-radius:1px}.close{float:right;font-size:19.5px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.5;filter:alpha(opacity=50)}button.close{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.modal-open{overflow:hidden}.modal{display:none;overflow:hidden;position:fixed;top:0;right:0;bottom:0;left:0;z-index:1050;-webkit-overflow-scrolling:touch;outline:0}.modal.fade .modal-dialog{-webkit-transition:-webkit-transform .3s ease-out;-moz-transition:-moz-transform .3s ease-out;-o-transition:-o-transform .3s ease-out;transition:transform .3s ease-out}.modal.in .modal-dialog{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);-o-transform:translate(0,0);transform:translate(0,0)}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal-dialog{position:relative;width:auto;margin:10px}.modal-content{position:relative;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:3px;-webkit-box-shadow:0 3px 9px rgba(0,0,0,.5);box-shadow:0 3px 9px rgba(0,0,0,.5);background-clip:padding-box;outline:0}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade{opacity:0;filter:alpha(opacity=0)}.modal-backdrop.in{opacity:.5;filter:alpha(opacity=50)}.modal-header{padding:15px;border-bottom:1px solid #e5e5e5;min-height:16.43px}.modal-header .close{margin-top:-2px}.modal-title{margin:0;line-height:1.42857143}.modal-body{position:relative;padding:15px}.modal-footer{padding:15px;text-align:right;border-top:1px solid #e5e5e5}.modal-footer .btn+.btn{margin-left:5px;margin-bottom:0}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.modal-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (min-width:768px){.modal-dialog{width:600px;margin:30px auto}.modal-content{-webkit-box-shadow:0 5px 15px rgba(0,0,0,.5);box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm{width:300px}}@media (min-width:992px){.modal-lg{width:900px}}.tooltip{position:absolute;z-index:1070;display:block;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:12px;font-weight:400;line-height:1.4;opacity:0;filter:alpha(opacity=0)}.tooltip.in{opacity:.9;filter:alpha(opacity=90)}.tooltip.top{margin-top:-3px;padding:5px 0}.tooltip.right{margin-left:3px;padding:0 5px}.tooltip.bottom{margin-top:3px;padding:5px 0}.tooltip.left{margin-left:-3px;padding:0 5px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;text-decoration:none;background-color:#000;border-radius:2px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-left .tooltip-arrow{bottom:0;right:5px;margin-bottom:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-right .tooltip-arrow{bottom:0;left:5px;margin-bottom:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#000}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#000}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom-left .tooltip-arrow{top:0;right:5px;margin-top:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom-right .tooltip-arrow{top:0;left:5px;margin-top:-5px;border-width:0 5px 5px;border-bottom-color:#000}.popover{position:absolute;top:0;left:0;z-index:1060;display:none;max-width:276px;padding:1px;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:13px;font-weight:400;line-height:1.42857143;text-align:left;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);border-radius:3px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2);white-space:normal}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{margin:0;padding:8px 14px;font-size:13px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-radius:2px 2px 0 0}.popover-content{padding:9px 14px}.popover>.arrow,.popover>.arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover>.arrow{border-width:11px}.popover>.arrow:after{border-width:10px;content:""}.popover.top>.arrow{left:50%;margin-left:-11px;border-bottom-width:0;border-top-color:#999;border-top-color:rgba(0,0,0,.25);bottom:-11px}.popover.top>.arrow:after{content:" ";bottom:1px;margin-left:-10px;border-bottom-width:0;border-top-color:#fff}.popover.right>.arrow{top:50%;left:-11px;margin-top:-11px;border-left-width:0;border-right-color:#999;border-right-color:rgba(0,0,0,.25)}.popover.right>.arrow:after{content:" ";left:1px;bottom:-10px;border-left-width:0;border-right-color:#fff}.popover.bottom>.arrow{left:50%;margin-left:-11px;border-top-width:0;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,.25);top:-11px}.popover.bottom>.arrow:after{content:" ";top:1px;margin-left:-10px;border-top-width:0;border-bottom-color:#fff}.popover.left>.arrow{top:50%;right:-11px;margin-top:-11px;border-right-width:0;border-left-color:#999;border-left-color:rgba(0,0,0,.25)}.popover.left>.arrow:after{content:" ";right:1px;border-right-width:0;border-left-color:#fff;bottom:-10px}.carousel{position:relative}.carousel-inner{position:relative;overflow:hidden;width:100%}.carousel-inner>.item{display:none;position:relative;-webkit-transition:.6s ease-in-out left;-o-transition:.6s ease-in-out left;transition:.6s ease-in-out left}.carousel-inner>.item>a>img,.carousel-inner>.item>img{line-height:1}@media all and (transform-3d),(-webkit-transform-3d){.carousel-inner>.item{-webkit-transition:-webkit-transform .6s ease-in-out;-moz-transition:-moz-transform .6s ease-in-out;-o-transition:-o-transform .6s ease-in-out;transition:transform .6s ease-in-out;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;-moz-perspective:1000;perspective:1000}.carousel-inner>.item.active.right,.carousel-inner>.item.next{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);left:0}.carousel-inner>.item.active.left,.carousel-inner>.item.prev{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);left:0}.carousel-inner>.item.active,.carousel-inner>.item.next.left,.carousel-inner>.item.prev.right{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);left:0}}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:0;left:0;bottom:0;width:15%;opacity:.5;filter:alpha(opacity=50);font-size:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6)}.carousel-control.left{background-image:-webkit-linear-gradient(left,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);background-image:-o-linear-gradient(left,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);background-image:linear-gradient(to right,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#00000000', GradientType=1)}.carousel-control.right{left:auto;right:0;background-image:-webkit-linear-gradient(left,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);background-image:-o-linear-gradient(left,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);background-image:linear-gradient(to right,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#80000000', GradientType=1)}.carousel-control:focus,.carousel-control:hover{outline:0;color:#fff;text-decoration:none;opacity:.9;filter:alpha(opacity=90)}.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{position:absolute;top:50%;z-index:5;display:inline-block}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{left:50%;margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{right:50%;margin-right:-10px}.carousel-control .icon-next,.carousel-control .icon-prev{width:20px;height:20px;margin-top:-10px;line-height:1;font-family:serif}.carousel-control .icon-prev:before{content:'\2039'}.carousel-control .icon-next:before{content:'\203a'}.carousel-indicators{position:absolute;bottom:10px;left:50%;z-index:15;width:60%;margin-left:-30%;padding-left:0;list-style:none;text-align:center}.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;border:1px solid #fff;border-radius:10px;cursor:pointer;background-color:transparent}.carousel-indicators .active{margin:0;width:12px;height:12px;background-color:#fff}.carousel-caption{position:absolute;left:15%;right:15%;bottom:20px;z-index:10;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6)}.carousel-caption .btn{text-shadow:none}@media screen and (min-width:768px){.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{width:30px;height:30px;margin-top:-15px;font-size:30px}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{margin-left:-15px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{margin-right:-15px}.carousel-caption{left:20%;right:20%;padding-bottom:30px}.carousel-indicators{bottom:20px}}.btn-group-vertical>.btn-group:after,.btn-group-vertical>.btn-group:before,.btn-toolbar:after,.btn-toolbar:before,.clearfix:after,.clearfix:before,.container-fluid:after,.container-fluid:before,.container:after,.container:before,.dl-horizontal dd:after,.dl-horizontal dd:before,.form-horizontal .form-group:after,.form-horizontal .form-group:before,.item_buttons:after,.item_buttons:before,.modal-footer:after,.modal-footer:before,.nav:after,.nav:before,.navbar-collapse:after,.navbar-collapse:before,.navbar-header:after,.navbar-header:before,.navbar:after,.navbar:before,.pager:after,.pager:before,.panel-body:after,.panel-body:before,.row:after,.row:before{content:" ";display:table}.btn-group-vertical>.btn-group:after,.btn-toolbar:after,.clearfix:after,.container-fluid:after,.container:after,.dl-horizontal dd:after,.form-horizontal .form-group:after,.item_buttons:after,.modal-footer:after,.nav:after,.navbar-collapse:after,.navbar-header:after,.navbar:after,.pager:after,.panel-body:after,.row:after{clear:both}.center-block{display:block;margin-left:auto;margin-right:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none!important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-lg,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block,.visible-md,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-sm,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-xs,.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block{display:none!important}@media (max-width:767px){.visible-xs{display:block!important}table.visible-xs{display:table}tr.visible-xs{display:table-row!important}td.visible-xs,th.visible-xs{display:table-cell!important}.visible-xs-block{display:block!important}.visible-xs-inline{display:inline!important}.visible-xs-inline-block{display:inline-block!important}}@media (min-width:768px)and (max-width:991px){.visible-sm{display:block!important}table.visible-sm{display:table}tr.visible-sm{display:table-row!important}td.visible-sm,th.visible-sm{display:table-cell!important}.visible-sm-block{display:block!important}.visible-sm-inline{display:inline!important}.visible-sm-inline-block{display:inline-block!important}}@media (min-width:992px)and (max-width:1199px){.visible-md{display:block!important}table.visible-md{display:table}tr.visible-md{display:table-row!important}td.visible-md,th.visible-md{display:table-cell!important}.visible-md-block{display:block!important}.visible-md-inline{display:inline!important}.visible-md-inline-block{display:inline-block!important}}@media (min-width:1200px){.visible-lg{display:block!important}table.visible-lg{display:table}tr.visible-lg{display:table-row!important}td.visible-lg,th.visible-lg{display:table-cell!important}.visible-lg-block{display:block!important}.visible-lg-inline{display:inline!important}.visible-lg-inline-block{display:inline-block!important}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px)and (max-width:991px){.hidden-sm{display:none!important}}@media (min-width:992px)and (max-width:1199px){.hidden-md{display:none!important}}@media (min-width:1200px){.hidden-lg{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:block!important}table.visible-print{display:table}tr.visible-print{display:table-row!important}td.visible-print,th.visible-print{display:table-cell!important}}.visible-print-block{display:none!important}@media print{.visible-print-block{display:block!important}}.visible-print-inline{display:none!important}@media print{.visible-print-inline{display:inline!important}}.visible-print-inline-block{display:none!important}@media print{.visible-print-inline-block{display:inline-block!important}.hidden-print{display:none!important}}/*!
*
* Font Awesome
*
*//*!
 *  Font Awesome 4.2.0 by @davegandy - http://fontawesome.io - @fontawesome
 *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)
 */@font-face{font-family:'FontAwesome';src:url(../components/font-awesome/fonts/fontawesome-webfont.eot?v=4.2.0);src:url(../components/font-awesome/fonts/fontawesome-webfont.eot?#iefix&v=4.2.0)format('embedded-opentype'),url(../components/font-awesome/fonts/fontawesome-webfont.woff?v=4.2.0)format('woff'),url(../components/font-awesome/fonts/fontawesome-webfont.ttf?v=4.2.0)format('truetype'),url(../components/font-awesome/fonts/fontawesome-webfont.svg?v=4.2.0#fontawesomeregular)format('svg');font-weight:400;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1,1);-ms-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1,-1);-ms-transform:scale(1,-1);transform:scale(1,-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:"\f000"}.fa-music:before{content:"\f001"}.fa-search:before{content:"\f002"}.fa-envelope-o:before{content:"\f003"}.fa-heart:before{content:"\f004"}.fa-star:before{content:"\f005"}.fa-star-o:before{content:"\f006"}.fa-user:before{content:"\f007"}.fa-film:before{content:"\f008"}.fa-th-large:before{content:"\f009"}.fa-th:before{content:"\f00a"}.fa-th-list:before{content:"\f00b"}.fa-check:before{content:"\f00c"}.fa-close:before,.fa-remove:before,.fa-times:before{content:"\f00d"}.fa-search-plus:before{content:"\f00e"}.fa-search-minus:before{content:"\f010"}.fa-power-off:before{content:"\f011"}.fa-signal:before{content:"\f012"}.fa-cog:before,.fa-gear:before{content:"\f013"}.fa-trash-o:before{content:"\f014"}.fa-home:before{content:"\f015"}.fa-file-o:before{content:"\f016"}.fa-clock-o:before{content:"\f017"}.fa-road:before{content:"\f018"}.fa-download:before{content:"\f019"}.fa-arrow-circle-o-down:before{content:"\f01a"}.fa-arrow-circle-o-up:before{content:"\f01b"}.fa-inbox:before{content:"\f01c"}.fa-play-circle-o:before{content:"\f01d"}.fa-repeat:before,.fa-rotate-right:before{content:"\f01e"}.fa-refresh:before{content:"\f021"}.fa-list-alt:before{content:"\f022"}.fa-lock:before{content:"\f023"}.fa-flag:before{content:"\f024"}.fa-headphones:before{content:"\f025"}.fa-volume-off:before{content:"\f026"}.fa-volume-down:before{content:"\f027"}.fa-volume-up:before{content:"\f028"}.fa-qrcode:before{content:"\f029"}.fa-barcode:before{content:"\f02a"}.fa-tag:before{content:"\f02b"}.fa-tags:before{content:"\f02c"}.fa-book:before{content:"\f02d"}.fa-bookmark:before{content:"\f02e"}.fa-print:before{content:"\f02f"}.fa-camera:before{content:"\f030"}.fa-font:before{content:"\f031"}.fa-bold:before{content:"\f032"}.fa-italic:before{content:"\f033"}.fa-text-height:before{content:"\f034"}.fa-text-width:before{content:"\f035"}.fa-align-left:before{content:"\f036"}.fa-align-center:before{content:"\f037"}.fa-align-right:before{content:"\f038"}.fa-align-justify:before{content:"\f039"}.fa-list:before{content:"\f03a"}.fa-dedent:before,.fa-outdent:before{content:"\f03b"}.fa-indent:before{content:"\f03c"}.fa-video-camera:before{content:"\f03d"}.fa-image:before,.fa-photo:before,.fa-picture-o:before{content:"\f03e"}.fa-pencil:before{content:"\f040"}.fa-map-marker:before{content:"\f041"}.fa-adjust:before{content:"\f042"}.fa-tint:before{content:"\f043"}.fa-edit:before,.fa-pencil-square-o:before{content:"\f044"}.fa-share-square-o:before{content:"\f045"}.fa-check-square-o:before{content:"\f046"}.fa-arrows:before{content:"\f047"}.fa-step-backward:before{content:"\f048"}.fa-fast-backward:before{content:"\f049"}.fa-backward:before{content:"\f04a"}.fa-play:before{content:"\f04b"}.fa-pause:before{content:"\f04c"}.fa-stop:before{content:"\f04d"}.fa-forward:before{content:"\f04e"}.fa-fast-forward:before{content:"\f050"}.fa-step-forward:before{content:"\f051"}.fa-eject:before{content:"\f052"}.fa-chevron-left:before{content:"\f053"}.fa-chevron-right:before{content:"\f054"}.fa-plus-circle:before{content:"\f055"}.fa-minus-circle:before{content:"\f056"}.fa-times-circle:before{content:"\f057"}.fa-check-circle:before{content:"\f058"}.fa-question-circle:before{content:"\f059"}.fa-info-circle:before{content:"\f05a"}.fa-crosshairs:before{content:"\f05b"}.fa-times-circle-o:before{content:"\f05c"}.fa-check-circle-o:before{content:"\f05d"}.fa-ban:before{content:"\f05e"}.fa-arrow-left:before{content:"\f060"}.fa-arrow-right:before{content:"\f061"}.fa-arrow-up:before{content:"\f062"}.fa-arrow-down:before{content:"\f063"}.fa-mail-forward:before,.fa-share:before{content:"\f064"}.fa-expand:before{content:"\f065"}.fa-compress:before{content:"\f066"}.fa-plus:before{content:"\f067"}.fa-minus:before{content:"\f068"}.fa-asterisk:before{content:"\f069"}.fa-exclamation-circle:before{content:"\f06a"}.fa-gift:before{content:"\f06b"}.fa-leaf:before{content:"\f06c"}.fa-fire:before{content:"\f06d"}.fa-eye:before{content:"\f06e"}.fa-eye-slash:before{content:"\f070"}.fa-exclamation-triangle:before,.fa-warning:before{content:"\f071"}.fa-plane:before{content:"\f072"}.fa-calendar:before{content:"\f073"}.fa-random:before{content:"\f074"}.fa-comment:before{content:"\f075"}.fa-magnet:before{content:"\f076"}.fa-chevron-up:before{content:"\f077"}.fa-chevron-down:before{content:"\f078"}.fa-retweet:before{content:"\f079"}.fa-shopping-cart:before{content:"\f07a"}.fa-folder:before{content:"\f07b"}.fa-folder-open:before{content:"\f07c"}.fa-arrows-v:before{content:"\f07d"}.fa-arrows-h:before{content:"\f07e"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:"\f080"}.fa-twitter-square:before{content:"\f081"}.fa-facebook-square:before{content:"\f082"}.fa-camera-retro:before{content:"\f083"}.fa-key:before{content:"\f084"}.fa-cogs:before,.fa-gears:before{content:"\f085"}.fa-comments:before{content:"\f086"}.fa-thumbs-o-up:before{content:"\f087"}.fa-thumbs-o-down:before{content:"\f088"}.fa-star-half:before{content:"\f089"}.fa-heart-o:before{content:"\f08a"}.fa-sign-out:before{content:"\f08b"}.fa-linkedin-square:before{content:"\f08c"}.fa-thumb-tack:before{content:"\f08d"}.fa-external-link:before{content:"\f08e"}.fa-sign-in:before{content:"\f090"}.fa-trophy:before{content:"\f091"}.fa-github-square:before{content:"\f092"}.fa-upload:before{content:"\f093"}.fa-lemon-o:before{content:"\f094"}.fa-phone:before{content:"\f095"}.fa-square-o:before{content:"\f096"}.fa-bookmark-o:before{content:"\f097"}.fa-phone-square:before{content:"\f098"}.fa-twitter:before{content:"\f099"}.fa-facebook:before{content:"\f09a"}.fa-github:before{content:"\f09b"}.fa-unlock:before{content:"\f09c"}.fa-credit-card:before{content:"\f09d"}.fa-rss:before{content:"\f09e"}.fa-hdd-o:before{content:"\f0a0"}.fa-bullhorn:before{content:"\f0a1"}.fa-bell:before{content:"\f0f3"}.fa-certificate:before{content:"\f0a3"}.fa-hand-o-right:before{content:"\f0a4"}.fa-hand-o-left:before{content:"\f0a5"}.fa-hand-o-up:before{content:"\f0a6"}.fa-hand-o-down:before{content:"\f0a7"}.fa-arrow-circle-left:before{content:"\f0a8"}.fa-arrow-circle-right:before{content:"\f0a9"}.fa-arrow-circle-up:before{content:"\f0aa"}.fa-arrow-circle-down:before{content:"\f0ab"}.fa-globe:before{content:"\f0ac"}.fa-wrench:before{content:"\f0ad"}.fa-tasks:before{content:"\f0ae"}.fa-filter:before{content:"\f0b0"}.fa-briefcase:before{content:"\f0b1"}.fa-arrows-alt:before{content:"\f0b2"}.fa-group:before,.fa-users:before{content:"\f0c0"}.fa-chain:before,.fa-link:before{content:"\f0c1"}.fa-cloud:before{content:"\f0c2"}.fa-flask:before{content:"\f0c3"}.fa-cut:before,.fa-scissors:before{content:"\f0c4"}.fa-copy:before,.fa-files-o:before{content:"\f0c5"}.fa-paperclip:before{content:"\f0c6"}.fa-floppy-o:before,.fa-save:before{content:"\f0c7"}.fa-square:before{content:"\f0c8"}.fa-bars:before,.fa-navicon:before,.fa-reorder:before{content:"\f0c9"}.fa-list-ul:before{content:"\f0ca"}.fa-list-ol:before{content:"\f0cb"}.fa-strikethrough:before{content:"\f0cc"}.fa-underline:before{content:"\f0cd"}.fa-table:before{content:"\f0ce"}.fa-magic:before{content:"\f0d0"}.fa-truck:before{content:"\f0d1"}.fa-pinterest:before{content:"\f0d2"}.fa-pinterest-square:before{content:"\f0d3"}.fa-google-plus-square:before{content:"\f0d4"}.fa-google-plus:before{content:"\f0d5"}.fa-money:before{content:"\f0d6"}.fa-caret-down:before{content:"\f0d7"}.fa-caret-up:before{content:"\f0d8"}.fa-caret-left:before{content:"\f0d9"}.fa-caret-right:before{content:"\f0da"}.fa-columns:before{content:"\f0db"}.fa-sort:before,.fa-unsorted:before{content:"\f0dc"}.fa-sort-desc:before,.fa-sort-down:before{content:"\f0dd"}.fa-sort-asc:before,.fa-sort-up:before{content:"\f0de"}.fa-envelope:before{content:"\f0e0"}.fa-linkedin:before{content:"\f0e1"}.fa-rotate-left:before,.fa-undo:before{content:"\f0e2"}.fa-gavel:before,.fa-legal:before{content:"\f0e3"}.fa-dashboard:before,.fa-tachometer:before{content:"\f0e4"}.fa-comment-o:before{content:"\f0e5"}.fa-comments-o:before{content:"\f0e6"}.fa-bolt:before,.fa-flash:before{content:"\f0e7"}.fa-sitemap:before{content:"\f0e8"}.fa-umbrella:before{content:"\f0e9"}.fa-clipboard:before,.fa-paste:before{content:"\f0ea"}.fa-lightbulb-o:before{content:"\f0eb"}.fa-exchange:before{content:"\f0ec"}.fa-cloud-download:before{content:"\f0ed"}.fa-cloud-upload:before{content:"\f0ee"}.fa-user-md:before{content:"\f0f0"}.fa-stethoscope:before{content:"\f0f1"}.fa-suitcase:before{content:"\f0f2"}.fa-bell-o:before{content:"\f0a2"}.fa-coffee:before{content:"\f0f4"}.fa-cutlery:before{content:"\f0f5"}.fa-file-text-o:before{content:"\f0f6"}.fa-building-o:before{content:"\f0f7"}.fa-hospital-o:before{content:"\f0f8"}.fa-ambulance:before{content:"\f0f9"}.fa-medkit:before{content:"\f0fa"}.fa-fighter-jet:before{content:"\f0fb"}.fa-beer:before{content:"\f0fc"}.fa-h-square:before{content:"\f0fd"}.fa-plus-square:before{content:"\f0fe"}.fa-angle-double-left:before{content:"\f100"}.fa-angle-double-right:before{content:"\f101"}.fa-angle-double-up:before{content:"\f102"}.fa-angle-double-down:before{content:"\f103"}.fa-angle-left:before{content:"\f104"}.fa-angle-right:before{content:"\f105"}.fa-angle-up:before{content:"\f106"}.fa-angle-down:before{content:"\f107"}.fa-desktop:before{content:"\f108"}.fa-laptop:before{content:"\f109"}.fa-tablet:before{content:"\f10a"}.fa-mobile-phone:before,.fa-mobile:before{content:"\f10b"}.fa-circle-o:before{content:"\f10c"}.fa-quote-left:before{content:"\f10d"}.fa-quote-right:before{content:"\f10e"}.fa-spinner:before{content:"\f110"}.fa-circle:before{content:"\f111"}.fa-mail-reply:before,.fa-reply:before{content:"\f112"}.fa-github-alt:before{content:"\f113"}.fa-folder-o:before{content:"\f114"}.fa-folder-open-o:before{content:"\f115"}.fa-smile-o:before{content:"\f118"}.fa-frown-o:before{content:"\f119"}.fa-meh-o:before{content:"\f11a"}.fa-gamepad:before{content:"\f11b"}.fa-keyboard-o:before{content:"\f11c"}.fa-flag-o:before{content:"\f11d"}.fa-flag-checkered:before{content:"\f11e"}.fa-terminal:before{content:"\f120"}.fa-code:before{content:"\f121"}.fa-mail-reply-all:before,.fa-reply-all:before{content:"\f122"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:"\f123"}.fa-location-arrow:before{content:"\f124"}.fa-crop:before{content:"\f125"}.fa-code-fork:before{content:"\f126"}.fa-chain-broken:before,.fa-unlink:before{content:"\f127"}.fa-question:before{content:"\f128"}.fa-info:before{content:"\f129"}.fa-exclamation:before{content:"\f12a"}.fa-superscript:before{content:"\f12b"}.fa-subscript:before{content:"\f12c"}.fa-eraser:before{content:"\f12d"}.fa-puzzle-piece:before{content:"\f12e"}.fa-microphone:before{content:"\f130"}.fa-microphone-slash:before{content:"\f131"}.fa-shield:before{content:"\f132"}.fa-calendar-o:before{content:"\f133"}.fa-fire-extinguisher:before{content:"\f134"}.fa-rocket:before{content:"\f135"}.fa-maxcdn:before{content:"\f136"}.fa-chevron-circle-left:before{content:"\f137"}.fa-chevron-circle-right:before{content:"\f138"}.fa-chevron-circle-up:before{content:"\f139"}.fa-chevron-circle-down:before{content:"\f13a"}.fa-html5:before{content:"\f13b"}.fa-css3:before{content:"\f13c"}.fa-anchor:before{content:"\f13d"}.fa-unlock-alt:before{content:"\f13e"}.fa-bullseye:before{content:"\f140"}.fa-ellipsis-h:before{content:"\f141"}.fa-ellipsis-v:before{content:"\f142"}.fa-rss-square:before{content:"\f143"}.fa-play-circle:before{content:"\f144"}.fa-ticket:before{content:"\f145"}.fa-minus-square:before{content:"\f146"}.fa-minus-square-o:before{content:"\f147"}.fa-level-up:before{content:"\f148"}.fa-level-down:before{content:"\f149"}.fa-check-square:before{content:"\f14a"}.fa-pencil-square:before{content:"\f14b"}.fa-external-link-square:before{content:"\f14c"}.fa-share-square:before{content:"\f14d"}.fa-compass:before{content:"\f14e"}.fa-caret-square-o-down:before,.fa-toggle-down:before{content:"\f150"}.fa-caret-square-o-up:before,.fa-toggle-up:before{content:"\f151"}.fa-caret-square-o-right:before,.fa-toggle-right:before{content:"\f152"}.fa-eur:before,.fa-euro:before{content:"\f153"}.fa-gbp:before{content:"\f154"}.fa-dollar:before,.fa-usd:before{content:"\f155"}.fa-inr:before,.fa-rupee:before{content:"\f156"}.fa-cny:before,.fa-jpy:before,.fa-rmb:before,.fa-yen:before{content:"\f157"}.fa-rouble:before,.fa-rub:before,.fa-ruble:before{content:"\f158"}.fa-krw:before,.fa-won:before{content:"\f159"}.fa-bitcoin:before,.fa-btc:before{content:"\f15a"}.fa-file:before{content:"\f15b"}.fa-file-text:before{content:"\f15c"}.fa-sort-alpha-asc:before{content:"\f15d"}.fa-sort-alpha-desc:before{content:"\f15e"}.fa-sort-amount-asc:before{content:"\f160"}.fa-sort-amount-desc:before{content:"\f161"}.fa-sort-numeric-asc:before{content:"\f162"}.fa-sort-numeric-desc:before{content:"\f163"}.fa-thumbs-up:before{content:"\f164"}.fa-thumbs-down:before{content:"\f165"}.fa-youtube-square:before{content:"\f166"}.fa-youtube:before{content:"\f167"}.fa-xing:before{content:"\f168"}.fa-xing-square:before{content:"\f169"}.fa-youtube-play:before{content:"\f16a"}.fa-dropbox:before{content:"\f16b"}.fa-stack-overflow:before{content:"\f16c"}.fa-instagram:before{content:"\f16d"}.fa-flickr:before{content:"\f16e"}.fa-adn:before{content:"\f170"}.fa-bitbucket:before{content:"\f171"}.fa-bitbucket-square:before{content:"\f172"}.fa-tumblr:before{content:"\f173"}.fa-tumblr-square:before{content:"\f174"}.fa-long-arrow-down:before{content:"\f175"}.fa-long-arrow-up:before{content:"\f176"}.fa-long-arrow-left:before{content:"\f177"}.fa-long-arrow-right:before{content:"\f178"}.fa-apple:before{content:"\f179"}.fa-windows:before{content:"\f17a"}.fa-android:before{content:"\f17b"}.fa-linux:before{content:"\f17c"}.fa-dribbble:before{content:"\f17d"}.fa-skype:before{content:"\f17e"}.fa-foursquare:before{content:"\f180"}.fa-trello:before{content:"\f181"}.fa-female:before{content:"\f182"}.fa-male:before{content:"\f183"}.fa-gittip:before{content:"\f184"}.fa-sun-o:before{content:"\f185"}.fa-moon-o:before{content:"\f186"}.fa-archive:before{content:"\f187"}.fa-bug:before{content:"\f188"}.fa-vk:before{content:"\f189"}.fa-weibo:before{content:"\f18a"}.fa-renren:before{content:"\f18b"}.fa-pagelines:before{content:"\f18c"}.fa-stack-exchange:before{content:"\f18d"}.fa-arrow-circle-o-right:before{content:"\f18e"}.fa-arrow-circle-o-left:before{content:"\f190"}.fa-caret-square-o-left:before,.fa-toggle-left:before{content:"\f191"}.fa-dot-circle-o:before{content:"\f192"}.fa-wheelchair:before{content:"\f193"}.fa-vimeo-square:before{content:"\f194"}.fa-try:before,.fa-turkish-lira:before{content:"\f195"}.fa-plus-square-o:before{content:"\f196"}.fa-space-shuttle:before{content:"\f197"}.fa-slack:before{content:"\f198"}.fa-envelope-square:before{content:"\f199"}.fa-wordpress:before{content:"\f19a"}.fa-openid:before{content:"\f19b"}.fa-bank:before,.fa-institution:before,.fa-university:before{content:"\f19c"}.fa-graduation-cap:before,.fa-mortar-board:before{content:"\f19d"}.fa-yahoo:before{content:"\f19e"}.fa-google:before{content:"\f1a0"}.fa-reddit:before{content:"\f1a1"}.fa-reddit-square:before{content:"\f1a2"}.fa-stumbleupon-circle:before{content:"\f1a3"}.fa-stumbleupon:before{content:"\f1a4"}.fa-delicious:before{content:"\f1a5"}.fa-digg:before{content:"\f1a6"}.fa-pied-piper:before{content:"\f1a7"}.fa-pied-piper-alt:before{content:"\f1a8"}.fa-drupal:before{content:"\f1a9"}.fa-joomla:before{content:"\f1aa"}.fa-language:before{content:"\f1ab"}.fa-fax:before{content:"\f1ac"}.fa-building:before{content:"\f1ad"}.fa-child:before{content:"\f1ae"}.fa-paw:before{content:"\f1b0"}.fa-spoon:before{content:"\f1b1"}.fa-cube:before{content:"\f1b2"}.fa-cubes:before{content:"\f1b3"}.fa-behance:before{content:"\f1b4"}.fa-behance-square:before{content:"\f1b5"}.fa-steam:before{content:"\f1b6"}.fa-steam-square:before{content:"\f1b7"}.fa-recycle:before{content:"\f1b8"}.fa-automobile:before,.fa-car:before{content:"\f1b9"}.fa-cab:before,.fa-taxi:before{content:"\f1ba"}.fa-tree:before{content:"\f1bb"}.fa-spotify:before{content:"\f1bc"}.fa-deviantart:before{content:"\f1bd"}.fa-soundcloud:before{content:"\f1be"}.fa-database:before{content:"\f1c0"}.fa-file-pdf-o:before{content:"\f1c1"}.fa-file-word-o:before{content:"\f1c2"}.fa-file-excel-o:before{content:"\f1c3"}.fa-file-powerpoint-o:before{content:"\f1c4"}.fa-file-image-o:before,.fa-file-photo-o:before,.fa-file-picture-o:before{content:"\f1c5"}.fa-file-archive-o:before,.fa-file-zip-o:before{content:"\f1c6"}.fa-file-audio-o:before,.fa-file-sound-o:before{content:"\f1c7"}.fa-file-movie-o:before,.fa-file-video-o:before{content:"\f1c8"}.fa-file-code-o:before{content:"\f1c9"}.fa-vine:before{content:"\f1ca"}.fa-codepen:before{content:"\f1cb"}.fa-jsfiddle:before{content:"\f1cc"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-ring:before,.fa-life-saver:before,.fa-support:before{content:"\f1cd"}.fa-circle-o-notch:before{content:"\f1ce"}.fa-ra:before,.fa-rebel:before{content:"\f1d0"}.fa-empire:before,.fa-ge:before{content:"\f1d1"}.fa-git-square:before{content:"\f1d2"}.fa-git:before{content:"\f1d3"}.fa-hacker-news:before{content:"\f1d4"}.fa-tencent-weibo:before{content:"\f1d5"}.fa-qq:before{content:"\f1d6"}.fa-wechat:before,.fa-weixin:before{content:"\f1d7"}.fa-paper-plane:before,.fa-send:before{content:"\f1d8"}.fa-paper-plane-o:before,.fa-send-o:before{content:"\f1d9"}.fa-history:before{content:"\f1da"}.fa-circle-thin:before{content:"\f1db"}.fa-header:before{content:"\f1dc"}.fa-paragraph:before{content:"\f1dd"}.fa-sliders:before{content:"\f1de"}.fa-share-alt:before{content:"\f1e0"}.fa-share-alt-square:before{content:"\f1e1"}.fa-bomb:before{content:"\f1e2"}.fa-futbol-o:before,.fa-soccer-ball-o:before{content:"\f1e3"}.fa-tty:before{content:"\f1e4"}.fa-binoculars:before{content:"\f1e5"}.fa-plug:before{content:"\f1e6"}.fa-slideshare:before{content:"\f1e7"}.fa-twitch:before{content:"\f1e8"}.fa-yelp:before{content:"\f1e9"}.fa-newspaper-o:before{content:"\f1ea"}.fa-wifi:before{content:"\f1eb"}.fa-calculator:before{content:"\f1ec"}.fa-paypal:before{content:"\f1ed"}.fa-google-wallet:before{content:"\f1ee"}.fa-cc-visa:before{content:"\f1f0"}.fa-cc-mastercard:before{content:"\f1f1"}.fa-cc-discover:before{content:"\f1f2"}.fa-cc-amex:before{content:"\f1f3"}.fa-cc-paypal:before{content:"\f1f4"}.fa-cc-stripe:before{content:"\f1f5"}.fa-bell-slash:before{content:"\f1f6"}.fa-bell-slash-o:before{content:"\f1f7"}.fa-trash:before{content:"\f1f8"}.fa-copyright:before{content:"\f1f9"}.fa-at:before{content:"\f1fa"}.fa-eyedropper:before{content:"\f1fb"}.fa-paint-brush:before{content:"\f1fc"}.fa-birthday-cake:before{content:"\f1fd"}.fa-area-chart:before{content:"\f1fe"}.fa-pie-chart:before{content:"\f200"}.fa-line-chart:before{content:"\f201"}.fa-lastfm:before{content:"\f202"}.fa-lastfm-square:before{content:"\f203"}.fa-toggle-off:before{content:"\f204"}.fa-toggle-on:before{content:"\f205"}.fa-bicycle:before{content:"\f206"}.fa-bus:before{content:"\f207"}.fa-ioxhost:before{content:"\f208"}.fa-angellist:before{content:"\f209"}.fa-cc:before{content:"\f20a"}.fa-ils:before,.fa-shekel:before,.fa-sheqel:before{content:"\f20b"}.fa-meanpath:before{content:"\f20c"}/*!
*
* IPython base
*
*/.modal.fade .modal-dialog{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);-o-transform:translate(0,0);transform:translate(0,0)}code{color:#000}pre{font-size:inherit;line-height:inherit}label{font-weight:400}.border-box-sizing{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.corner-all{border-radius:2px}.no-padding{padding:0}.hbox{display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}.hbox>*{-webkit-box-flex:0;-moz-box-flex:0;box-flex:0;flex:none}.vbox{display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}.vbox>*{-webkit-box-flex:0;-moz-box-flex:0;box-flex:0;flex:none}.hbox.reverse,.reverse,.vbox.reverse{-webkit-box-direction:reverse;-moz-box-direction:reverse;box-direction:reverse;flex-direction:row-reverse}.box-flex0,.hbox.box-flex0,.vbox.box-flex0{-webkit-box-flex:0;-moz-box-flex:0;box-flex:0;flex:none;width:auto}.box-flex1,.hbox.box-flex1,.vbox.box-flex1{-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1}.box-flex,.hbox.box-flex,.vbox.box-flex{-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1}.box-flex2,.hbox.box-flex2,.vbox.box-flex2{-webkit-box-flex:2;-moz-box-flex:2;box-flex:2;flex:2}.box-group1{-webkit-box-flex-group:1;-moz-box-flex-group:1;box-flex-group:1}.box-group2{-webkit-box-flex-group:2;-moz-box-flex-group:2;box-flex-group:2}.hbox.start,.start,.vbox.start{-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;justify-content:flex-start}.end,.hbox.end,.vbox.end{-webkit-box-pack:end;-moz-box-pack:end;box-pack:end;justify-content:flex-end}.center,.hbox.center,.vbox.center{-webkit-box-pack:center;-moz-box-pack:center;box-pack:center;justify-content:center}.baseline,.hbox.baseline,.vbox.baseline{-webkit-box-pack:baseline;-moz-box-pack:baseline;box-pack:baseline;justify-content:baseline}.hbox.stretch,.stretch,.vbox.stretch{-webkit-box-pack:stretch;-moz-box-pack:stretch;box-pack:stretch;justify-content:stretch}.align-start,.hbox.align-start,.vbox.align-start{-webkit-box-align:start;-moz-box-align:start;box-align:start;align-items:flex-start}.align-end,.hbox.align-end,.vbox.align-end{-webkit-box-align:end;-moz-box-align:end;box-align:end;align-items:flex-end}.align-center,.hbox.align-center,.vbox.align-center{-webkit-box-align:center;-moz-box-align:center;box-align:center;align-items:center}.align-baseline,.hbox.align-baseline,.vbox.align-baseline{-webkit-box-align:baseline;-moz-box-align:baseline;box-align:baseline;align-items:baseline}.align-stretch,.hbox.align-stretch,.vbox.align-stretch{-webkit-box-align:stretch;-moz-box-align:stretch;box-align:stretch;align-items:stretch}div.error{margin:2em;text-align:center}div.error>h1{font-size:500%;line-height:normal}div.error>p{font-size:200%;line-height:normal}div.traceback-wrapper{text-align:left;max-width:800px;margin:auto}body{position:absolute;left:0;right:0;top:0;bottom:0;overflow:visible}#header{display:none;background-color:#fff;position:relative;z-index:100}#header #header-container{padding-bottom:5px;padding-top:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}#header .header-bar{width:100%;height:1px;background:#e7e7e7;margin-bottom:-1px}#header-spacer{width:100%;visibility:hidden}@media print{#header{display:none!important}#header-spacer{display:none}}#ipython_notebook{padding-left:0;padding-top:1px;padding-bottom:1px}@media (max-width:991px){#ipython_notebook{margin-left:10px}}#noscript{width:auto;padding-top:16px;padding-bottom:16px;text-align:center;font-size:22px;color:red;font-weight:700}#ipython_notebook img{height:28px}#site{width:100%;display:none;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;overflow:auto}@media print{#site{height:auto!important}}.ui-button .ui-button-text{padding:.2em .8em;font-size:77%}input.ui-button{padding:.3em .9em}span#login_widget{float:right}#logout,span#login_widget>.button{color:#333;background-color:#fff;border-color:#ccc}#logout.active,#logout.focus,#logout:active,#logout:focus,#logout:hover,.open>.dropdown-toggle#logout,.open>.dropdown-togglespan#login_widget>.button,span#login_widget>.button.active,span#login_widget>.button.focus,span#login_widget>.button:active,span#login_widget>.button:focus,span#login_widget>.button:hover{color:#333;background-color:#e6e6e6;border-color:#adadad}#logout.active,#logout:active,.open>.dropdown-toggle#logout,.open>.dropdown-togglespan#login_widget>.button,span#login_widget>.button.active,span#login_widget>.button:active{background-image:none}#logout.disabled,#logout.disabled.active,#logout.disabled.focus,#logout.disabled:active,#logout.disabled:focus,#logout.disabled:hover,#logout[disabled],#logout[disabled].active,#logout[disabled].focus,#logout[disabled]:active,#logout[disabled]:focus,#logout[disabled]:hover,fieldset[disabled] #logout,fieldset[disabled] #logout.active,fieldset[disabled] #logout.focus,fieldset[disabled] #logout:active,fieldset[disabled] #logout:focus,fieldset[disabled] #logout:hover,fieldset[disabled] span#login_widget>.button,fieldset[disabled] span#login_widget>.button.active,fieldset[disabled] span#login_widget>.button.focus,fieldset[disabled] span#login_widget>.button:active,fieldset[disabled] span#login_widget>.button:focus,fieldset[disabled] span#login_widget>.button:hover,span#login_widget>.button.disabled,span#login_widget>.button.disabled.active,span#login_widget>.button.disabled.focus,span#login_widget>.button.disabled:active,span#login_widget>.button.disabled:focus,span#login_widget>.button.disabled:hover,span#login_widget>.button[disabled],span#login_widget>.button[disabled].active,span#login_widget>.button[disabled].focus,span#login_widget>.button[disabled]:active,span#login_widget>.button[disabled]:focus,span#login_widget>.button[disabled]:hover{background-color:#fff;border-color:#ccc}#logout .badge,span#login_widget>.button .badge{color:#fff;background-color:#333}.nav-header{text-transform:none}#header>span{margin-top:10px}.modal_stretch .modal-dialog{display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;min-height:80vh}.modal_stretch .modal-dialog .modal-body{max-height:calc(100vh - 200px);overflow:auto;flex:1}@media (min-width:768px){.modal .modal-dialog{width:700px}select.form-control{margin-left:12px;margin-right:12px}}/*!
*
* IPython auth
*
*/.center-nav{display:inline-block;margin-bottom:-4px}/*!
*
* IPython tree view
*
*/.alternate_upload{background-color:none;display:inline}.alternate_upload.form{padding:0;margin:0}.alternate_upload input.fileinput{text-align:center;vertical-align:middle;display:inline;opacity:0;z-index:2;width:12ex;margin-right:-12ex}.alternate_upload .btn-upload{height:22px}ul#tabs{margin-bottom:4px}ul#tabs a{padding-top:6px;padding-bottom:4px}ul.breadcrumb a:focus,ul.breadcrumb a:hover{text-decoration:none}ul.breadcrumb i.icon-home{font-size:16px;margin-right:4px}ul.breadcrumb span{color:#5e5e5e}.list_toolbar{padding:4px 0;vertical-align:middle}.list_toolbar .tree-buttons{padding-top:1px}.dynamic-buttons{padding-top:3px;display:inline-block}.list_toolbar [class*=span]{min-height:24px}.list_header{font-weight:700;background-color:#eee}.list_placeholder{font-weight:700;padding:4px 7px}.list_container{margin-top:4px;margin-bottom:20px;border:1px solid #ddd;border-radius:2px}.list_container>div{border-bottom:1px solid #ddd}.list_container>div:hover .list-item{background-color:red}.list_container>div:last-child{border:none}.list_item:hover .list_item{background-color:#ddd}.list_item a{text-decoration:none}.list_item:hover{background-color:#fafafa}.action_col{text-align:right}.list_header>div,.list_item>div{line-height:22px;padding:4px 7px}.list_header>div input,.list_item>div input{margin-right:7px;margin-left:14px;vertical-align:baseline;line-height:22px;position:relative;top:-1px}.list_header>div .item_link,.list_item>div .item_link{margin-left:-1px;vertical-align:baseline;line-height:22px}.new-file input[type=checkbox]{visibility:hidden}.item_name{line-height:22px;height:24px}.item_icon{font-size:14px;color:#5e5e5e;margin-right:7px;margin-left:7px;line-height:22px;vertical-align:baseline}.item_buttons{line-height:1em;margin-left:-5px}.item_buttons .btn-group,.item_buttons .input-group{float:left}.item_buttons>.btn,.item_buttons>.btn-group,.item_buttons>.input-group{margin-left:5px}.item_buttons .btn{min-width:13ex}.item_buttons .running-indicator{padding-top:4px;color:#5cb85c}.toolbar_info{height:24px;line-height:24px}input.engine_num_input,input.nbname_input{padding-top:3px;padding-bottom:3px;height:22px;line-height:14px;margin:0}input.engine_num_input{width:60px}.highlight_text{color:#00f}#project_name{display:inline-block;padding-left:7px;margin-left:-2px}#project_name>.breadcrumb{padding:0;margin-bottom:0;background-color:transparent;font-weight:700}#tree-selector{padding-right:0}#button-select-all{min-width:50px}#select-all{margin-left:7px;margin-right:2px}.menu_icon{margin-right:2px}.tab-content .row{margin-left:0;margin-right:0}.folder_icon:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f114"}.folder_icon:before.pull-left{margin-right:.3em}.folder_icon:before.pull-right{margin-left:.3em}.notebook_icon:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f02d";position:relative;top:-1px}.notebook_icon:before.pull-left{margin-right:.3em}.notebook_icon:before.pull-right{margin-left:.3em}.running_notebook_icon:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f02d";position:relative;top:-1px;color:#5cb85c}.running_notebook_icon:before.pull-left{margin-right:.3em}.running_notebook_icon:before.pull-right{margin-left:.3em}.file_icon:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f016";position:relative;top:-2px}.file_icon:before.pull-left{margin-right:.3em}.file_icon:before.pull-right{margin-left:.3em}#notebook_toolbar .pull-right{padding-top:0;margin-right:-1px}ul#new-menu{left:auto;right:0}.kernel-menu-icon{padding-right:12px;width:24px;content:"\f096"}.kernel-menu-icon:before{content:"\f096"}.kernel-menu-icon-current:before{content:"\f00c"}#tab_content{padding-top:20px}#running .panel-group .panel{margin-top:3px;margin-bottom:1em}#running .panel-group .panel .panel-heading{background-color:#eee;line-height:22px;padding:4px 7px}#running .panel-group .panel .panel-heading a:focus,#running .panel-group .panel .panel-heading a:hover{text-decoration:none}#running .panel-group .panel .panel-body{padding:0}#running .panel-group .panel .panel-body .list_container{margin-top:0;margin-bottom:0;border:0;border-radius:0}#running .panel-group .panel .panel-body .list_container .list_item{border-bottom:1px solid #ddd}#running .panel-group .panel .panel-body .list_container .list_item:last-child{border-bottom:0}.delete-button,.duplicate-button,.rename-button,.shutdown-button{display:none}.dynamic-instructions{display:inline-block;padding-top:4px}/*!
*
* IPython text editor webapp
*
*/.selected-keymap i.fa{padding:0 5px}.selected-keymap i.fa:before{content:"\f00c"}#mode-menu{overflow:auto;max-height:20em}.edit_app #header{-webkit-box-shadow:0 0 12px 1px rgba(87,87,87,.2);box-shadow:0 0 12px 1px rgba(87,87,87,.2)}.edit_app #menubar .navbar{margin-bottom:-1px}.dirty-indicator{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:20px}.dirty-indicator.pull-left{margin-right:.3em}.dirty-indicator.pull-right{margin-left:.3em}.dirty-indicator-dirty{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:20px}.dirty-indicator-dirty.pull-left{margin-right:.3em}.dirty-indicator-dirty.pull-right{margin-left:.3em}.dirty-indicator-clean{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:20px}.dirty-indicator-clean.pull-left{margin-right:.3em}.dirty-indicator-clean.pull-right{margin-left:.3em}.dirty-indicator-clean:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f00c"}.dirty-indicator-clean:before.pull-left{margin-right:.3em}.dirty-indicator-clean:before.pull-right{margin-left:.3em}#filename{font-size:16pt;display:table;padding:0 5px}#current-mode{padding-left:5px;padding-right:5px}#texteditor-backdrop{padding-top:20px;padding-bottom:20px}@media not print{#texteditor-backdrop{background-color:#eee}}@media print{#texteditor-backdrop #texteditor-container .CodeMirror-gutter,#texteditor-backdrop #texteditor-container .CodeMirror-gutters{background-color:#fff}}@media not print{#texteditor-backdrop #texteditor-container .CodeMirror-gutter,#texteditor-backdrop #texteditor-container .CodeMirror-gutters{background-color:#fff}#texteditor-backdrop #texteditor-container{padding:0;background-color:#fff;-webkit-box-shadow:0 0 12px 1px rgba(87,87,87,.2);box-shadow:0 0 12px 1px rgba(87,87,87,.2)}}/*!
*
* IPython notebook
*
*/.ansibold{font-weight:700}.ansiblack{color:#000}.ansired{color:#8b0000}.ansigreen{color:#006400}.ansiyellow{color:#c4a000}.ansiblue{color:#00008b}.ansipurple{color:#9400d3}.ansicyan{color:#4682b4}.ansigray{color:gray}.ansibgblack{background-color:#000}.ansibgred{background-color:red}.ansibggreen{background-color:green}.ansibgyellow{background-color:#ff0}.ansibgblue{background-color:#00f}.ansibgpurple{background-color:#ff00ff}.ansibgcyan{background-color:#0ff}.ansibggray{background-color:gray}div.cell{border:1px solid transparent;display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;border-radius:2px;box-sizing:border-box;-moz-box-sizing:border-box;border-width:thin;border-style:solid;width:100%;padding:5px;margin:0;outline:0}div.cell.selected{border-color:#ababab}@media print{div.cell.selected{border-color:transparent}}.edit_mode div.cell.selected{border-color:green}.prompt{min-width:14ex;padding:.4em;margin:0;font-family:monospace;text-align:right;line-height:1.21429em}div.inner_cell{display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1}@-moz-document url-prefix(){div.inner_cell{overflow-x:hidden}}div.input_area{border:1px solid #cfcfcf;border-radius:2px;background:#f7f7f7;line-height:1.21429em}div.prompt:empty{padding-top:0;padding-bottom:0}div.unrecognized_cell{padding:5px 5px 5px 0;display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}div.unrecognized_cell .inner_cell{border-radius:2px;padding:5px;font-weight:700;color:red;border:1px solid #cfcfcf;background:#eaeaea}div.unrecognized_cell .inner_cell a,div.unrecognized_cell .inner_cell a:hover{color:inherit;text-decoration:none}@media (max-width:540px){.prompt{text-align:left}div.unrecognized_cell>div.prompt{display:none}}div.code_cell{}div.input{page-break-inside:avoid;display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}@media (max-width:540px){div.input{-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}}div.input_prompt{color:navy;border-top:1px solid transparent}div.input_area>div.highlight{margin:.4em;border:none;padding:0;background-color:transparent}div.input_area>div.highlight>pre{margin:0;border:none;padding:0;background-color:transparent}.CodeMirror{line-height:1.21429em;font-size:14px;height:auto;background:0 0}.CodeMirror-scroll{overflow-y:hidden;overflow-x:auto}.CodeMirror-lines{padding:.4em}.CodeMirror-linenumber{padding:0 8px 0 4px}.CodeMirror-gutters{border-bottom-left-radius:2px;border-top-left-radius:2px}.CodeMirror pre{padding:0;border:0;border-radius:0}.highlight-base,.highlight-variable{color:#000}.highlight-variable-2{color:#1a1a1a}.highlight-variable-3{color:#333}.highlight-string{color:#BA2121}.highlight-comment{color:#408080;font-style:italic}.highlight-number{color:#080}.highlight-atom{color:#88F}.highlight-keyword{color:green;font-weight:700}.highlight-builtin{color:green}.highlight-error{color:red}.highlight-operator{color:#A2F;font-weight:700}.highlight-meta{color:#A2F}.highlight-def{color:#00f}.highlight-string-2{color:#f50}.highlight-qualifier{color:#555}.highlight-bracket{color:#997}.highlight-tag{color:#170}.highlight-attribute{color:#00c}.highlight-header{color:#00f}.highlight-quote{color:#090}.highlight-link{color:#00c}.cm-s-ipython span.cm-keyword{color:green;font-weight:700}.cm-s-ipython span.cm-atom{color:#88F}.cm-s-ipython span.cm-number{color:#080}.cm-s-ipython span.cm-def{color:#00f}.cm-s-ipython span.cm-variable{color:#000}.cm-s-ipython span.cm-operator{color:#A2F;font-weight:700}.cm-s-ipython span.cm-variable-2{color:#1a1a1a}.cm-s-ipython span.cm-variable-3{color:#333}.cm-s-ipython span.cm-comment{color:#408080;font-style:italic}.cm-s-ipython span.cm-string{color:#BA2121}.cm-s-ipython span.cm-string-2{color:#f50}.cm-s-ipython span.cm-meta{color:#A2F}.cm-s-ipython span.cm-qualifier{color:#555}.cm-s-ipython span.cm-builtin{color:green}.cm-s-ipython span.cm-bracket{color:#997}.cm-s-ipython span.cm-tag{color:#170}.cm-s-ipython span.cm-attribute{color:#00c}.cm-s-ipython span.cm-header{color:#00f}.cm-s-ipython span.cm-quote{color:#090}.cm-s-ipython span.cm-link{color:#00c}.cm-s-ipython span.cm-error{color:red}.cm-s-ipython span.cm-tab{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=')right no-repeat}div.output_wrapper{display:-webkit-box;-webkit-box-align:stretch;display:-moz-box;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;z-index:1}div.output_scroll{height:24em;width:100%;overflow:auto;border-radius:2px;-webkit-box-shadow:inset 0 2px 8px rgba(0,0,0,.8);box-shadow:inset 0 2px 8px rgba(0,0,0,.8);display:block}div.output_collapsed{margin:0;padding:0;display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}div.out_prompt_overlay{height:100%;padding:0 .4em;position:absolute;border-radius:2px}div.out_prompt_overlay:hover{-webkit-box-shadow:inset 0 0 1px #000;box-shadow:inset 0 0 1px #000;background:rgba(240,240,240,.5)}div.output_prompt{color:#8b0000}div.output_area{padding:0;page-break-inside:avoid;display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}div.output_area .MathJax_Display{text-align:left!important}div.output_area .rendered_html img,div.output_area .rendered_html table{margin-left:0;margin-right:0}div.output_area img,div.output_area svg{max-width:100%;height:auto}div.output_area img.unconfined,div.output_area svg.unconfined{max-width:none}.output{display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}@media (max-width:540px){div.output_area{-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}}div.output_area pre{margin:0;padding:0;border:0;vertical-align:baseline;color:#000;background-color:transparent;border-radius:0}div.output_subarea{overflow-x:auto;padding:.4em;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1;max-width:calc(100% - 14ex)}div.output_text{text-align:left;color:#000;line-height:1.21429em}div.output_stderr{background:#fdd}div.output_latex{text-align:left}div.output_javascript:empty{padding:0}.js-error{color:#8b0000}div.raw_input_container{font-family:monospace;padding-top:5px}span.raw_input_prompt{}input.raw_input{font-family:inherit;font-size:inherit;color:inherit;width:auto;vertical-align:baseline;padding:0 .25em;margin:0 .25em}input.raw_input:focus{box-shadow:none}p.p-space{margin-bottom:10px}div.output_unrecognized{padding:5px;font-weight:700;color:red}div.output_unrecognized a,div.output_unrecognized a:hover{color:inherit;text-decoration:none}.rendered_html{color:#000}.rendered_html em{font-style:italic}.rendered_html strong{font-weight:700}.rendered_html :link,.rendered_html :visited,.rendered_html u{text-decoration:underline}.rendered_html h1{font-size:185.7%;margin:1.08em 0 0;font-weight:700;line-height:1}.rendered_html h2{font-size:157.1%;margin:1.27em 0 0;font-weight:700;line-height:1}.rendered_html h3{font-size:128.6%;margin:1.55em 0 0;font-weight:700;line-height:1}.rendered_html h4{font-size:100%;margin:2em 0 0;font-weight:700;line-height:1}.rendered_html h5,.rendered_html h6{font-size:100%;margin:2em 0 0;font-weight:700;line-height:1;font-style:italic}.rendered_html h1:first-child{margin-top:.538em}.rendered_html h2:first-child{margin-top:.636em}.rendered_html h3:first-child{margin-top:.777em}.rendered_html h4:first-child,.rendered_html h5:first-child,.rendered_html h6:first-child{margin-top:1em}.rendered_html ul{list-style:disc;margin:0 2em;padding-left:0}.rendered_html ul ul{list-style:square;margin:0 2em}.rendered_html ul ul ul{list-style:circle;margin:0 2em}.rendered_html ol{list-style:decimal;margin:0 2em;padding-left:0}.rendered_html ol ol{list-style:upper-alpha;margin:0 2em}.rendered_html ol ol ol{list-style:lower-alpha;margin:0 2em}.rendered_html ol ol ol ol{list-style:lower-roman;margin:0 2em}.rendered_html ol ol ol ol ol{list-style:decimal;margin:0 2em}.rendered_html *+ol,.rendered_html *+ul{margin-top:1em}.rendered_html hr{color:#000;background-color:#000}.rendered_html pre{margin:1em 2em}.rendered_html code,.rendered_html pre{border:0;background-color:#fff;color:#000;font-size:100%;padding:0}.rendered_html blockquote{margin:1em 2em}.rendered_html table{margin-left:auto;margin-right:auto;border:1px solid #000;border-collapse:collapse}.rendered_html td,.rendered_html th,.rendered_html tr{border:1px solid #000;border-collapse:collapse;margin:1em 2em}.rendered_html td,.rendered_html th{text-align:left;vertical-align:middle;padding:4px}.rendered_html th{font-weight:700}.rendered_html *+table{margin-top:1em}.rendered_html p{text-align:left}.rendered_html *+p{margin-top:1em}.rendered_html img{display:block;margin-left:auto;margin-right:auto}.rendered_html *+img{margin-top:1em}.rendered_html img,.rendered_html svg{max-width:100%;height:auto}.rendered_html img.unconfined,.rendered_html svg.unconfined{max-width:none}div.text_cell{display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}@media (max-width:540px){div.text_cell>div.prompt{display:none}}div.text_cell_render{outline:0;resize:none;width:inherit;border-style:none;padding:.5em .5em .5em .4em;color:#000;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}a.anchor-link:link{text-decoration:none;padding:0 20px;visibility:hidden}h1:hover .anchor-link,h2:hover .anchor-link,h3:hover .anchor-link,h4:hover .anchor-link,h5:hover .anchor-link,h6:hover .anchor-link{visibility:visible}.text_cell.rendered .input_area{display:none}.text_cell.rendered .rendered_html{overflow-x:auto}.text_cell.unrendered .text_cell_render{display:none}.cm-header-1,.cm-header-2,.cm-header-3,.cm-header-4,.cm-header-5,.cm-header-6{font-weight:700;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}.cm-header-1{font-size:185.7%}.cm-header-2{font-size:157.1%}.cm-header-3{font-size:128.6%}.cm-header-4{font-size:110%}.cm-header-5,.cm-header-6{font-size:100%;font-style:italic}/*!
*
* IPython notebook webapp
*
*/@media (max-width:767px){.notebook_app{padding-left:0;padding-right:0}}#ipython-main-app{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;height:100%}div#notebook_panel{margin:0;padding:0;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;height:100%}#notebook{font-size:14px;line-height:20px;overflow-y:hidden;overflow-x:auto;width:100%;padding-top:20px;margin:0;outline:0;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;min-height:100%}@media not print{#notebook-container{padding:15px;background-color:#fff;min-height:0;-webkit-box-shadow:0 0 12px 1px rgba(87,87,87,.2);box-shadow:0 0 12px 1px rgba(87,87,87,.2)}}div.ui-widget-content{border:1px solid #ababab;outline:0}pre.dialog{background-color:#f7f7f7;border:1px solid #ddd;border-radius:2px;padding:.4em .4em .4em 2em}p.dialog{padding:.2em}code,kbd,pre,samp{white-space:pre-wrap}#fonttest{font-family:monospace}p{margin-bottom:0}.end_space{min-height:100px;transition:height .2s ease}.notebook_app #header{-webkit-box-shadow:0 0 12px 1px rgba(87,87,87,.2);box-shadow:0 0 12px 1px rgba(87,87,87,.2)}@media not print{.notebook_app{background-color:#eee}}.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-radius:2px 2px 0 0;width:100%;height:29px;padding-right:4px;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch;-webkit-box-pack:end;-moz-box-pack:end;box-pack:end;justify-content:flex-end;font-size:87%;padding-top:3px}@media print{.edit_mode div.cell.selected{border-color:transparent}div.code_cell{page-break-inside:avoid}#notebook-container{width:100%}.celltoolbar{display:none}}.ctb_hideshow{display:none;vertical-align:bottom}.ctb_global_show .ctb_show.ctb_hideshow{display:block}.ctb_global_show .ctb_show+.input_area,.ctb_global_show .ctb_show+div.text_cell_input,.ctb_global_show .ctb_show~div.text_cell_render{border-top-right-radius:0;border-top-left-radius:0}.ctb_global_show .ctb_show~div.text_cell_render{border:1px solid #cfcfcf}.celltoolbar select{color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;line-height:1.5;border-radius:1px;width:inherit;font-size:inherit;height:22px;padding:0;display:inline-block}.celltoolbar select:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.celltoolbar select::-moz-placeholder{color:#999;opacity:1}.celltoolbar select:-ms-input-placeholder{color:#999}.celltoolbar select::-webkit-input-placeholder{color:#999}.celltoolbar select[disabled],.celltoolbar select[readonly],fieldset[disabled] .celltoolbar select{background-color:#eee;opacity:1}.celltoolbar select[disabled],fieldset[disabled] .celltoolbar select{cursor:not-allowed}textarea.celltoolbar select{height:auto}select.celltoolbar select{height:30px;line-height:30px}select[multiple].celltoolbar select,textarea.celltoolbar select{height:auto}.celltoolbar label{margin-left:5px;margin-right:5px}.completions{position:absolute;z-index:10;overflow:hidden;border:1px solid #ababab;border-radius:2px;-webkit-box-shadow:0 6px 10px -1px #adadad;box-shadow:0 6px 10px -1px #adadad;line-height:1}.completions select{background:#fff;outline:0;border:none;padding:0;margin:0;overflow:auto;font-family:monospace;font-size:110%;color:#000;width:auto}.completions select option.context{color:#286090}#kernel_logo_widget{float:right!important;float:right}#kernel_logo_widget .current_kernel_logo{display:none;margin-top:-1px;margin-bottom:-1px;width:32px;height:32px}#menubar{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;margin-top:1px}#menubar .navbar{border-top:1px;border-radius:0 0 2px 2px;margin-bottom:0}#menubar .navbar-toggle{float:left;padding-top:7px;padding-bottom:7px;border:none}#menubar .navbar-collapse{clear:left}.nav-wrapper{border-bottom:1px solid #e7e7e7}i.menu-icon{padding-top:4px}ul#help_menu li a{overflow:hidden;padding-right:2.2em}ul#help_menu li a i{margin-right:-1.2em}.dropdown-submenu{position:relative}.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px}.dropdown-submenu:hover>.dropdown-menu{display:block}.dropdown-submenu>a:after{font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:block;content:"\f0da";float:right;color:#333;margin-top:2px;margin-right:-10px}.dropdown-submenu>a:after.pull-left{margin-right:.3em}.dropdown-submenu>a:after.pull-right{margin-left:.3em}.dropdown-submenu:hover>a:after{color:#262626}.dropdown-submenu.pull-left{float:none}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px}#notification_area{float:right!important;float:right;z-index:10}.indicator_area{float:right!important;float:right;color:#777;margin-left:5px;margin-right:5px;z-index:10;text-align:center;width:auto}#kernel_indicator{float:right!important;float:right;color:#777;margin-left:5px;margin-right:5px;z-index:10;text-align:center;width:auto;border-left:1px solid}#kernel_indicator .kernel_indicator_name{padding-left:5px;padding-right:5px}#modal_indicator{float:right!important;float:right;color:#777;margin-left:5px;margin-right:5px;z-index:10;text-align:center;width:auto}#readonly-indicator{float:right!important;float:right;color:#777;z-index:10;text-align:center;width:auto;display:none;margin:2px 0 0}.modal_indicator:before{width:1.28571429em;text-align:center}.edit_mode .modal_indicator:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f040"}.edit_mode .modal_indicator:before.pull-left{margin-right:.3em}.edit_mode .modal_indicator:before.pull-right{margin-left:.3em}.command_mode .modal_indicator:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:' '}.command_mode .modal_indicator:before.pull-left{margin-right:.3em}.command_mode .modal_indicator:before.pull-right{margin-left:.3em}.kernel_idle_icon:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f10c"}.kernel_idle_icon:before.pull-left{margin-right:.3em}.kernel_idle_icon:before.pull-right{margin-left:.3em}.kernel_busy_icon:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f111"}.kernel_busy_icon:before.pull-left{margin-right:.3em}.kernel_busy_icon:before.pull-right{margin-left:.3em}.kernel_dead_icon:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f1e2"}.kernel_dead_icon:before.pull-left{margin-right:.3em}.kernel_dead_icon:before.pull-right{margin-left:.3em}.kernel_disconnected_icon:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\f127"}.kernel_disconnected_icon:before.pull-left{margin-right:.3em}.kernel_disconnected_icon:before.pull-right{margin-left:.3em}.notification_widget{z-index:10;background:rgba(240,240,240,.5);margin-right:4px;color:#333;background-color:#fff;border-color:#ccc}.notification_widget.active,.notification_widget.focus,.notification_widget:active,.notification_widget:focus,.notification_widget:hover,.open>.dropdown-toggle.notification_widget{color:#333;background-color:#e6e6e6;border-color:#adadad}.notification_widget.active,.notification_widget:active,.open>.dropdown-toggle.notification_widget{background-image:none}.notification_widget.disabled,.notification_widget.disabled.active,.notification_widget.disabled.focus,.notification_widget.disabled:active,.notification_widget.disabled:focus,.notification_widget.disabled:hover,.notification_widget[disabled],.notification_widget[disabled].active,.notification_widget[disabled].focus,.notification_widget[disabled]:active,.notification_widget[disabled]:focus,.notification_widget[disabled]:hover,fieldset[disabled] .notification_widget,fieldset[disabled] .notification_widget.active,fieldset[disabled] .notification_widget.focus,fieldset[disabled] .notification_widget:active,fieldset[disabled] .notification_widget:focus,fieldset[disabled] .notification_widget:hover{background-color:#fff;border-color:#ccc}.notification_widget .badge{color:#fff;background-color:#333}.notification_widget.warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.notification_widget.warning.active,.notification_widget.warning.focus,.notification_widget.warning:active,.notification_widget.warning:focus,.notification_widget.warning:hover,.open>.dropdown-toggle.notification_widget.warning{color:#fff;background-color:#ec971f;border-color:#d58512}.notification_widget.warning.active,.notification_widget.warning:active,.open>.dropdown-toggle.notification_widget.warning{background-image:none}.notification_widget.warning.disabled,.notification_widget.warning.disabled.active,.notification_widget.warning.disabled.focus,.notification_widget.warning.disabled:active,.notification_widget.warning.disabled:focus,.notification_widget.warning.disabled:hover,.notification_widget.warning[disabled],.notification_widget.warning[disabled].active,.notification_widget.warning[disabled].focus,.notification_widget.warning[disabled]:active,.notification_widget.warning[disabled]:focus,.notification_widget.warning[disabled]:hover,fieldset[disabled] .notification_widget.warning,fieldset[disabled] .notification_widget.warning.active,fieldset[disabled] .notification_widget.warning.focus,fieldset[disabled] .notification_widget.warning:active,fieldset[disabled] .notification_widget.warning:focus,fieldset[disabled] .notification_widget.warning:hover{background-color:#f0ad4e;border-color:#eea236}.notification_widget.warning .badge{color:#f0ad4e;background-color:#fff}.notification_widget.success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.notification_widget.success.active,.notification_widget.success.focus,.notification_widget.success:active,.notification_widget.success:focus,.notification_widget.success:hover,.open>.dropdown-toggle.notification_widget.success{color:#fff;background-color:#449d44;border-color:#398439}.notification_widget.success.active,.notification_widget.success:active,.open>.dropdown-toggle.notification_widget.success{background-image:none}.notification_widget.success.disabled,.notification_widget.success.disabled.active,.notification_widget.success.disabled.focus,.notification_widget.success.disabled:active,.notification_widget.success.disabled:focus,.notification_widget.success.disabled:hover,.notification_widget.success[disabled],.notification_widget.success[disabled].active,.notification_widget.success[disabled].focus,.notification_widget.success[disabled]:active,.notification_widget.success[disabled]:focus,.notification_widget.success[disabled]:hover,fieldset[disabled] .notification_widget.success,fieldset[disabled] .notification_widget.success.active,fieldset[disabled] .notification_widget.success.focus,fieldset[disabled] .notification_widget.success:active,fieldset[disabled] .notification_widget.success:focus,fieldset[disabled] .notification_widget.success:hover{background-color:#5cb85c;border-color:#4cae4c}.notification_widget.success .badge{color:#5cb85c;background-color:#fff}.notification_widget.info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.notification_widget.info.active,.notification_widget.info.focus,.notification_widget.info:active,.notification_widget.info:focus,.notification_widget.info:hover,.open>.dropdown-toggle.notification_widget.info{color:#fff;background-color:#31b0d5;border-color:#269abc}.notification_widget.info.active,.notification_widget.info:active,.open>.dropdown-toggle.notification_widget.info{background-image:none}.notification_widget.info.disabled,.notification_widget.info.disabled.active,.notification_widget.info.disabled.focus,.notification_widget.info.disabled:active,.notification_widget.info.disabled:focus,.notification_widget.info.disabled:hover,.notification_widget.info[disabled],.notification_widget.info[disabled].active,.notification_widget.info[disabled].focus,.notification_widget.info[disabled]:active,.notification_widget.info[disabled]:focus,.notification_widget.info[disabled]:hover,fieldset[disabled] .notification_widget.info,fieldset[disabled] .notification_widget.info.active,fieldset[disabled] .notification_widget.info.focus,fieldset[disabled] .notification_widget.info:active,fieldset[disabled] .notification_widget.info:focus,fieldset[disabled] .notification_widget.info:hover{background-color:#5bc0de;border-color:#46b8da}.notification_widget.info .badge{color:#5bc0de;background-color:#fff}.notification_widget.danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.notification_widget.danger.active,.notification_widget.danger.focus,.notification_widget.danger:active,.notification_widget.danger:focus,.notification_widget.danger:hover,.open>.dropdown-toggle.notification_widget.danger{color:#fff;background-color:#c9302c;border-color:#ac2925}.notification_widget.danger.active,.notification_widget.danger:active,.open>.dropdown-toggle.notification_widget.danger{background-image:none}.notification_widget.danger.disabled,.notification_widget.danger.disabled.active,.notification_widget.danger.disabled.focus,.notification_widget.danger.disabled:active,.notification_widget.danger.disabled:focus,.notification_widget.danger.disabled:hover,.notification_widget.danger[disabled],.notification_widget.danger[disabled].active,.notification_widget.danger[disabled].focus,.notification_widget.danger[disabled]:active,.notification_widget.danger[disabled]:focus,.notification_widget.danger[disabled]:hover,fieldset[disabled] .notification_widget.danger,fieldset[disabled] .notification_widget.danger.active,fieldset[disabled] .notification_widget.danger.focus,fieldset[disabled] .notification_widget.danger:active,fieldset[disabled] .notification_widget.danger:focus,fieldset[disabled] .notification_widget.danger:hover{background-color:#d9534f;border-color:#d43f3a}.notification_widget.danger .badge{color:#d9534f;background-color:#fff}div#pager{background-color:#fff;font-size:14px;line-height:20px;overflow:hidden;display:none;position:fixed;bottom:0;width:100%;max-height:50%;padding-top:8px;-webkit-box-shadow:0 0 12px 1px rgba(87,87,87,.2);box-shadow:0 0 12px 1px rgba(87,87,87,.2);z-index:100;top:auto!important}div#pager pre{line-height:1.21429em;color:#000;background-color:#f7f7f7;padding:.4em}div#pager #pager-button-area{position:absolute;top:8px;right:20px}div#pager #pager-contents{position:relative;overflow:auto;width:100%;height:100%}div#pager #pager-contents #pager-container{position:relative;padding:15px 0;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}div#pager .ui-resizable-handle{top:0;height:8px;background:#f7f7f7;border-top:1px solid #cfcfcf;border-bottom:1px solid #cfcfcf}div#pager .ui-resizable-handle::after{content:'';top:2px;left:50%;height:3px;width:30px;margin-left:-15px;position:absolute;border-top:1px solid #cfcfcf}.quickhelp{display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}.shortcut_key{display:inline-block;width:20ex;text-align:right;font-family:monospace}.shortcut_descr{display:inline-block;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1}span.save_widget{margin-top:6px}span.save_widget span.filename{height:1em;line-height:1em;padding:3px;margin-left:16px;border:none;font-size:146.5%;border-radius:2px}span.save_widget span.filename:hover{background-color:#e6e6e6}span.autosave_status,span.checkpoint_status{font-size:small}@media (max-width:767px){span.save_widget{font-size:small}span.autosave_status,span.checkpoint_status{display:none}}@media (min-width:768px)and (max-width:991px){span.checkpoint_status{display:none}span.autosave_status{font-size:x-small}}.toolbar{padding:0;margin-left:-5px;margin-top:2px;margin-bottom:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.toolbar label,.toolbar select{width:auto;vertical-align:middle;margin-bottom:0;display:inline;font-size:92%;margin-left:.3em;margin-right:.3em;padding:3px 0 0}.toolbar .btn{padding:2px 8px}.toolbar .btn-group{margin-top:0;margin-left:5px}#maintoolbar{margin-bottom:-3px;margin-top:-8px;border:0;min-height:27px;margin-left:0;padding-top:11px;padding-bottom:3px}#maintoolbar .navbar-text{float:none;vertical-align:middle;text-align:right;margin-left:5px;margin-right:0;margin-top:0}.select-xs{height:24px}@-moz-keyframes fadeOut{from{opacity:1}to{opacity:0}}@-webkit-keyframes fadeOut{from{opacity:1}to{opacity:0}}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}.bigtooltip{overflow:auto;height:200px;-webkit-transition-property:height;-webkit-transition-duration:500ms;-moz-transition-property:height;-moz-transition-duration:500ms;transition-property:height;transition-duration:500ms}.smalltooltip{-webkit-transition-property:height;-webkit-transition-duration:500ms;-moz-transition-property:height;-moz-transition-duration:500ms;transition-property:height;transition-duration:500ms;text-overflow:ellipsis;overflow:hidden;height:80px}.tooltipbuttons{position:absolute;padding-right:15px;top:0;right:0}.tooltiptext{padding-right:30px}.ipython_tooltip{max-width:700px;animation:fadeOut 400ms;-webkit-animation:fadeIn 400ms;-moz-animation:fadeIn 400ms;animation:fadeIn 400ms;vertical-align:middle;background-color:#f7f7f7;overflow:visible;border:1px solid #ababab;outline:0;padding:3px 3px 3px 7px;padding-left:7px;font-family:monospace;min-height:50px;-moz-box-shadow:0 6px 10px -1px #adadad;-webkit-box-shadow:0 6px 10px -1px #adadad;box-shadow:0 6px 10px -1px #adadad;border-radius:2px;position:absolute;z-index:1000}.ipython_tooltip a{float:right}.ipython_tooltip .tooltiptext pre{border:0;border-radius:0;font-size:100%;background-color:#f7f7f7}.pretooltiparrow{left:0;margin:0;top:-16px;width:40px;height:16px;overflow:hidden;position:absolute}.pretooltiparrow:before{background-color:#f7f7f7;border:1px solid #ababab;z-index:11;content:"";position:absolute;left:15px;top:10px;width:25px;height:25px;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg)}.terminal-app{background:#eee}.terminal-app #header{background:#fff;-webkit-box-shadow:0 0 12px 1px rgba(87,87,87,.2);box-shadow:0 0 12px 1px rgba(87,87,87,.2)}.terminal-app .terminal{float:left;font-family:monospace;color:#fff;background:#000;padding:.4em;border-radius:2px;-webkit-box-shadow:0 0 12px 1px rgba(87,87,87,.4);box-shadow:0 0 12px 1px rgba(87,87,87,.4)}.terminal-app .terminal,.terminal-app .terminal dummy-screen{line-height:1em;font-size:14px}.terminal-app .terminal-cursor{color:#000;background:#fff}.terminal-app #terminado-container{margin-top:20px}
/*# sourceMappingURL=style.min.css.map */
    </style>
<style type="text/css">
    .highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
    </style>


<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
body {
  overflow: visible;
  padding: 8px;
}

div#notebook {
  overflow: visible;
  border-top: none;
}

@media print {
  div.cell {
    display: block;
    page-break-inside: avoid;
  } 
  div.output_wrapper { 
    display: block;
    page-break-inside: avoid; 
  }
  div.output { 
    display: block;
    page-break-inside: avoid; 
  }
}
</style>

<!-- Custom stylesheet, it must be in the same directory as the html file -->
<link rel="stylesheet" href="custom.css">

<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>
<body>
  <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Discrete-Bayes-Filter">Discrete Bayes Filter<a class="anchor-link" href="#Discrete-Bayes-Filter">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Kalman filter belongs to a family of filters called <em>Bayesian filters</em>. Most textbook treatments of the Kalman filter present the Bayesian formula, perhaps shows how it factors into the Kalman filter equations, but mostly keeps the discussion at a very abstract level.</p>
<p>That approach requires a fairly sophisticated understanding of several fields of mathematics, and it still leaves much of the work of understanding and forming an intuitive grasp of the situation in the hands of the reader.</p>
<p>I will use a different way to develop the topic, to which I owe the work of Dieter Fox and Sebastian Thrun a great debt. It depends on building an intuition on how Bayesian statistics work by tracking an object through a hallway - they use a robot, I use a dog. I like dogs, and they are less predictable than robots which imposes interesting difficulties for filtering. The first published example of this that I can find seems to be Fox 1999 [1], with a fuller example in Fox 2003 [2]. Sebastian Thrun also uses this formulation in his excellent Udacity course Artificial Intelligence for Robotics [3]. In fact, if you like watching videos, I highly recommend pausing reading this book in favor of first few lessons of that course, and then come back to this book for a deeper dive into the topic.</p>
<p>Let's now use a simple thought experiment, much like we did with the g-h filter, to see how we might reason about the use of probabilities for filtering and tracking.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tracking-a-Dog">Tracking a Dog<a class="anchor-link" href="#Tracking-a-Dog">&#182;</a></h2><p>Let's begin with a simple problem. We have a dog friendly workspace, and so people bring their dogs to work. Occasionally the dogs wander out of offices and down the halls. We want to be able to track them. So during a hackathon somebody invented a sonar sensor to attach to the dog's collar. It emits a signal, listens for the echo, and based on how quickly an echo comes back we can tell whether the dog is in front of an open doorway or not. It also senses when the dog walks, and reports in which direction the dog has moved. It connects to the network via wifi and sends an update once a second.</p>
<p>I want to track my dog Simon, so I attach the device to his collar and then fire up Python, ready to write code to track him through the building. At first blush this may appear impossible. If I start listening to the sensor of Simon's collar I might read <strong>door</strong>, <strong>hall</strong>, <strong>hall</strong>, and so on. How can I use that information to determine where Simon is?</p>
<p>To keep the problem small enough to plot easily we will assume that there are only 10 positions in the hallway, which we will number 0 to 9, where 1 is to the right of 0. For reasons that will be clear later, we will also assume that the hallway is circular or rectangular. If you move right from position 9, you will be at position 0.</p>
<p>When I begin listening to the sensor I have no reason to believe that Simon is at any particular position in the hallway. From my perspective he is equally likely to be in any position. Their are 10 positions, so the probability that he is in any given position is 1/10.</p>
<p>Let's represent our belief of his position in a NumPy array. I could use a Python list, but NumPy arrays offer functionality that we will be using soon.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">belief</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="o">/</span><span class="mi">10</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[ 0.1  0.1  0.1  0.1  0.1  0.1  0.1  0.1  0.1  0.1]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In <a href="https://en.wikipedia.org/wiki/Bayesian_probability">Bayesian statistics</a> this is called a <a href="https://en.wikipedia.org/wiki/Prior_probability"><em>prior</em></a>. It is the probability prior to incorporating measurements or other information. More completely, this is called the <em>prior probability distribution</em>. A <a href="https://en.wikipedia.org/wiki/Probability_distribution"><em>probability distribution</em></a> is a collection of all possible probabilities for an event. Probability distributions always to sum to 1 because something had to happen; the distribution lists all possible events and the probability of each.</p>
<p>I'm sure you've used probabilities before - as in "the probability of rain today is 30%". The last paragraph sounds like more of that. But Bayesian statistics was a revolution in probability because it treats probability as a belief about a single event. Let's take an example. I know that if I flip a fair coin infinitely many times I will get 50% heads and 50% tails. This is called <a href="https://en.wikipedia.org/wiki/Frequentist_inference"><em>frequentist statistics</em></a> to distinguish it from Bayesian statistics. Computations are based on the frequency in which events occur.</p>
<p>I flip the coin one more time and let it land. Which way do I believe it landed? Frequentist probability has nothing to say about that; it will merely state that 50% of coin flips land as heads. In some ways it is meaningless to assign a probability to the current state of the coin. It is either heads or tails, we just don't know which. Bayes treats this as a belief about a single event - the strength of my belief or knowledge that this specific coin flip is heads is 50%. Some object to the term "belief"; belief can imply holding something to be true without evidence. In this book it always is a measure of the strength of our knowledge. We'll learn more about this as we go.</p>
<p>Bayesian statistics takes past information (the prior) into account. We observe that it rains 4 times every 100 days. From this I could state that the chance of rain tomorrow is 1/25. This is not how weather prediction is done. If I know it is raining today and the storm front is stalled, it is likely to rain tomorrow. Weather prediction is Bayesian.</p>
<p>In practice statisticians use a mix of frequentist and Bayesian techniques. Sometimes finding the prior is difficult or impossible, and frequentist techniques rule. In this book we can find the prior. When I talk about the probability of something I am referring to the probability that some specific thing is true given past events. When I do that I'm taking the Bayesian approach.</p>
<p>Now let's create a map of the hallway. We'll place the first two doors close together, and then another door further away. We will use 1 for doors, and 0 for walls:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hallway</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I start listening to Simon's transmissions on the network, and the first data I get from the sensor is <strong>door</strong>. For the moment assume the sensor always returns the correct answer. From this I conclude that he is in front of a door, but which one? I have no reason to believe he is in front of the first, second, or third door. What I can do is assign a probability to each door. All doors are equally likely, and there are three of them, so I assign a probability of 1/3 to each door.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">book_format</span> <span class="k">import</span> <span class="n">figsize</span><span class="p">,</span> <span class="n">set_figsize</span>
<span class="kn">import</span> <span class="nn">code.book_plots</span> <span class="k">as</span> <span class="nn">book_plots</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">belief</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">set_figsize</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
16/X/PnzLU7nWy+++KJSU1OVlJRkdRSf2rp1qzZt2qStW7dq+PDhamxs1MKFCzV48GA99NBDVsfz
ic2bNys3N1dxcXEKDQ3V6NGjdf/996uhocHqaG0E3L+E3+eriNA1LV68WFVVVaqpqWnzDQWBIDQ0
VAkJCRo1apSKi4t12223qaSkxOpYPrFnzx7973//0/DhwxUWFqawsDDt3LlT69evV7du3dTS0mJ1
RJ+LiIjQiBEjdPToUauj+ERsbKyGDRvWam3YsGE6ceKERYnM8emnn+r111/X3LlzrY7ic48++qiW
Ll2q6dOna8SIEXrggQdUUFAQUC+aHzx4sGpqanThwgWdPHlSe/fu1ZUrV5SQkGB1tDYCrnB986uI
vslutys9Pd2iVLhRixYt8pStIUOGWB3nB+F2u/Xll19aHcMnfv7zn+v999/XgQMHPH9sNptmzpyp
AwcOKCwszOqIPnf58mUdPnxYsbGxVkfxifT0dM9rf7525MiRgPvPT0VFhbp3764ZM2ZYHcXnLl68
2OYMc3BwcEB9LMTXwsPDFR0drc8++0xvvfWWpk2bZnWkNgLykmJBQYFmzZql1NRUpaenq7y8XA6H
I2CuW0vShQsX9OGHH8owDLndbp04cUIHDhxQ3759FR8fb3W8TnnkkUe0efNmvfbaa4qMjPScrezZ
s6d69OhhcTrfKCws1JQpUxQfH69z587pL3/5i3bu3Bkwn8XVu3fvNpdGe/Toob59+7Y5a+Kvli5d
qqlTp+rmm2+Wy+VSUVGRLl68qNmzZ1sdzScWL16s9PR0rVy5Uvfdd5/279+vdevWafXq1VZH86kN
GzZo5syZAffxOpI0depUrV69WoMGDdKIESO0f/9+lZSUKCcnx+poPrN9+3a53W7dcsstOnr0qB59
9FENHz68a85o9dskzVJeXm4MHjzY6N69u2Gz2Yza2lqrI/nUjh07jKCgICM4OLjVn4ceesjqaJ3W
3lzBwcHG008/bXU0n8nJyTEGDRpkdO/e3YiOjjaysrIMu91udSxT3XHHHQH1sRAzZswwBgwYYNx0
001GXFycce+99xqHDh2yOpZPbdu2zUhOTjbCw8ONoUOHGs8//7zVkXyqpqbGCA4ONurr662OYorz
588bixcvNgYNGmREREQYiYmJxvLly40vv/zS6mg+89e//tVITEw0unfvbvTv399YuHCh8cUXX1gd
q118tQ8AAIDJAu41XAAAAF0NhQsAAMBkFC4AAACTUbgAAABMRuECAAAwGYULAADAZBQuAAAAk1G4
AAAATPZ/d6ybINmTDDQAAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This distribution is called a <a href="https://en.wikipedia.org/wiki/Categorical_distribution"><em>categorical distribution</em></a>, which is a discrete distribution describing the probability of observing $n$ outcomes. It is a <a href="https://en.wikipedia.org/wiki/Multimodal_distribution"><em>multimodal distribution</em></a> because we have multiple beliefs about the position of our dog. Of course we are not saying that we think he is simultaneously in three different locations, merely that we have narrowed down our knowledge to one of these three locations. My (Bayesian) belief is that there is a 33.3% chance of being at door 0, 33.3% at door 1, and a 33.3% chance of being at door 8.</p>
<p>This is an improvement in two ways. I've rejected a number of hallway positions as impossible, and the strength of my belief in the remaining positions has increased from 10% to 33%. This will always happen. As our knowledge improves the probabilities will get closer to 100%.</p>
<p>A few words about the <a href="https://en.wikipedia.org/wiki/Mode_(statistics&amp;#41;"><em>mode</em></a>
of a distribution. Given a set of numbers, such as {1, 2, 2, 2, 3, 3, 4}, the <em>mode</em> is the number that occurs most often. For this set the mode is 2. A set can contain more than one mode. The set {1, 2, 2, 2, 3, 3, 4, 4, 4} contains the modes 2 and 4, because both occur three times. We say the former set is <a href="https://en.wikipedia.org/wiki/Unimodality"><em>unimodal</em></a>, and the latter is <em>multimodal</em>.</p>
<p>Another term used for this distribution is a <a href="https://en.wikipedia.org/wiki/Histogram"><em>histogram</em></a>. Histograms graphically depict the distribution of a set of numbers. The bar chart above is a histogram.</p>
<p>I hand coded the <code>belief</code> array in the code above. How would we implement this in code? We represent doors with 1, and walls as 0, so we will multiply the hallway variable by the percentage, like so;</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">belief</span> <span class="o">=</span> <span class="n">hallway</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[ 0.333  0.333  0.0  0.0  0.0  0.0  0.0  0.0  0.333  0.0]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Extracting-Information-from-Sensor-Readings">Extracting Information from Sensor Readings<a class="anchor-link" href="#Extracting-Information-from-Sensor-Readings">&#182;</a></h2><p>Let's put Python aside and think about the problem a bit. Suppose we were to read the following from Simon's sensor:</p>
<ul>
<li>door</li>
<li>move right</li>
<li>door</li>
</ul>
<p>Can we deduce Simon's location? Of course! Given the hallway's layout there is only one place from which you can get this sequence, and that is at the left end. Therefore we can confidently state that Simon is in front of the second doorway. If this is not clear, suppose Simon had started at the second or third door. After moving to the right, his sensor would have returned 'wall'. That doesn't match the sensor readings, so we know he didn't start there. We can continue with that logic for all the remaining starting positions. The only possibility is that he is now in front of the second door. Our belief is:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">belief</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I designed the hallway layout and sensor readings to give us an exact answer quickly. Real problems are not so clear cut. But this should trigger your intuition - the first sensor reading only gave us low probabilities (0.333) for Simon's location, but after a position update and another sensor reading we know more about where he is. You might suspect, correctly, that if you had a very long hallway with a large number of doors that after several sensor readings and positions updates we would either be able to know where Simon was, or have the possibilities narrowed down to a small number of possibilities. This is possible because a specific pattern of sensor readings can only match a one to a few starting locations.</p>
<p>We could implement this solution now, but instead let us consider a real world complication to the problem.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Noisy-Sensors">Noisy Sensors<a class="anchor-link" href="#Noisy-Sensors">&#182;</a></h2><p>Perfect sensors are rare. Perhaps the sensor would not detect a door if Simon sat in front of it while scratching himself, or misread if he is not facing down the hallway. Thus when I get <strong>door</strong> I cannot use 1/3 as the probability. I have to assign less than 1/3 to each door, and assign a small probability to each blank wall position. Something like</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="o">.</span><span class="mi">31</span><span class="p">,</span> <span class="o">.</span><span class="mi">31</span><span class="p">,</span> <span class="o">.</span><span class="mo">01</span><span class="p">,</span> <span class="o">.</span><span class="mo">01</span><span class="p">,</span> <span class="o">.</span><span class="mo">01</span><span class="p">,</span> <span class="o">.</span><span class="mo">01</span><span class="p">,</span> <span class="o">.</span><span class="mo">01</span><span class="p">,</span> <span class="o">.</span><span class="mo">01</span><span class="p">,</span> <span class="o">.</span><span class="mi">31</span><span class="p">,</span> <span class="o">.</span><span class="mo">01</span><span class="p">]</span>
</pre></div>
<p>At first this may seem insurmountable. If the sensor is noisy it casts doubt on every piece of data. How can we conclude anything if we are always unsure?</p>
<p>The answer, as for the problem above, is with probabilities. We are already comfortable assigning a probabilistic belief to the location of the dog; now we have to incorporate the additional uncertainty caused by the sensor noise.</p>
<p>Lets say we get a reading of <strong>door</strong>, and suppose that testing shows that the sensor is 3 times more likely to be right than wrong. We should scale the probability distribution by 3 where there is a door. If we do that the result will no longer be a probability distribution, but we will learn how to correct that in a moment.</p>
<p>Let's look at that in Python code. Here I use the variable <code>z</code> to denote the measurement. <code>z</code> or <code>y</code> are customary choices in the literature for the measurement.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">update_belief</span><span class="p">(</span><span class="n">hall</span><span class="p">,</span> <span class="n">belief</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">correct_scale</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">hall</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="n">z</span><span class="p">:</span>
            <span class="n">belief</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*=</span> <span class="n">correct_scale</span>

<span class="n">belief</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">reading</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># 1 is &#39;door&#39;</span>
<span class="n">update_belief</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">belief</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">reading</span><span class="p">,</span> <span class="n">correct_scale</span><span class="o">=</span><span class="mf">3.</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sum =&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="n">belief</span><span class="p">))</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>sum = 1.6
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
utXuWJZ54oknFBoaqoULF9odxTSPP/64QkND2/wZNGiQ3bFM5Xa7lZubq4EDByoyMlIpKSnavXu3
3bFMMWzYsHafX2hoqKZPn253NNN4vV498sgjvu/CpKQkPfLII/J6vXZHM825c+dUUFCgoUOHKioq
ShMmTFBDQ4PdsToUlA3X1T6KKBCdO3dOY8aMUVlZmaKiouyOY6pdu3bp17/+tfbs2aPa2lqFh4cr
KytLn376qd3RTJOYmKinnnpKb7/9thobG/XjH/9YM2bMUHNzs93RTLd37149//zzSk1NtTuK6a69
9lp5PB653W653W698847dkcyTUtLizIzMxUSEqKamhodPnxYa9eu1cCBA+2OZoqGhgbf5+Z2u7V/
/36FhITozjvvtDuaaVavXq2Kigo9++yzOnLkiMrKylReXq4nnnjC7mimuffee+V0OrVx40Y1Nzcr
OztbWVlZcrlcdkdrzwhCN910k3Hfffe1GRs+fLjx8MMP25TIWn369DE2bNhgdwzLnDt3zggLCzNe
e+01u6NYasCAAcYf//hHu2OY6tNPPzWSk5ONHTt2GJMmTTIWLFhgdyTTPPbYY8aYMWPsjmGZoqIi
Y8KECXbH+N6sXLnS6N+/v3HhwgW7o5jmJz/5iZGbm9tmbN68ecb06dNtSmSuL774wggPDzf+8Y9/
tBlPS0szHnnkEZtSfbug28P1XR5FhO7ts88+k9frVf/+/e2OYgmv16stW7bo/PnzysjIsDuOqebP
n6+cnBxNnDjR7iiWOHbsmAYPHqykpCTNnj27zcVDge6VV17RTTfdpFmzZik2NlY33HCD1q1bZ3cs
y/zpT3/S3XffrZ49e9odxTQTJkxQbW2tjhw5Ikn697//rTfffFPTpk2zOZk5Ll26pMuXL7f7zCIj
I7vlaURB13CdPn1aly9fVmxsbJvx2NhYud1um1KhKxYtWqSxY8dq/PjxdkcxVXNzs/r27auePXvq
gQce0N/+9jeNHj3a7limef7553Xs2DGtXLnS7iiWGDdunKqqqvT666/rhRdekNvtVkZGhj755BO7
o5ni2LFjKi8vV3JysrZv366CggItX75c5eXldkcz3fbt2/XBBx/oV7/6ld1RTPXQQw/pF7/4hUaN
GqUePXpozJgxys3N1X333Wd3NFP06dNH48eP18qVK3Xq1Cl5vV5t2rRJe/bs6ZaHFP26LQRgl8LC
QtXX1+utt95SSEiI3XFMde211+rAgQNqaWnRX//6V82dO1c7d+7UqFGj7I7WZe+++65+85vf6K23
3lJoaND9v07SV8+M/V/jxo3TsGHDtGHDhqC4BY7X69WNN96okpISSVJqaqreffddrVu3Tg888IDN
6cz1/PPPKz09XSkpKXZHMdWWLVu0ceNGbdmyRaNGjVJTU5MWLlyoYcOG6Z577rE7nik2bdqkvLw8
JSQkKDw8XGPHjtWcOXPU2Nhod7R2gu5fwu/yKCJ0T4sXL1Z1dbVqa2vbPaEgGISHhyspKUk33HCD
SkpKdP3116u0tNTuWKbYs2eP/vvf/2rUqFGKiIhQRESEdu7cqXXr1qlHjx5qbW21O6LpoqKiNHr0
aB09etTuKKaIj4/XyJEj24yNHDlSJ06csCmRNT7++GO9+uqrmj9/vt1RTLds2TItXbpUM2fO1OjR
o3XXXXepsLAwqE6aHzZsmGpra3X+/Hl99NFH2rt3ry5evKikpCS7o7UTdA3X/z6K6H85nU5lZmba
lApXa9GiRb5ma/jw4XbH+V54vV59+eWXdscwxc9+9jO98847OnDggO+Pw+HQ7NmzdeDAAUVERNgd
0XQXLlzQ4cOHFR8fb3cUU2RmZvrO/fnakSNHgu4/P5WVlerVq5dmzZpldxTTff755+32MIeGhgbV
bSG+FhkZqdjYWH3yySd6/fXXNWPGDLsjtROUhxQLCws1d+5cpaenKzMzUxUVFXK5XEFz3FqSzp8/
r/fee0+GYcjr9erEiRM6cOCABgwYoMTERLvjdcmDDz6oTZs26ZVXXlF0dLRvb2WfPn3Uu3dvm9OZ
o6ioSNOmTVNiYqLOnj2rP//5z9q5c2fQ3IurX79+7Q6N9u7dWwMGDGi31yRQLV26VNOnT9c111wj
j8ej4uJiff7555o3b57d0UyxePFiZWZmatWqVbrzzju1f/9+rV27VqtXr7Y7mqnWr1+v2bNnB93t
dSRp+vTpWr16tYYOHarRo0dr//79Ki0tVW5urt3RTLN9+3Z5vV5de+21Onr0qJYtW6ZRo0Z1zxrt
vkzSKhUVFcawYcOMXr16GQ6Hw6irq7M7kql27NhhhISEGKGhoW3+3HPPPXZH67KO6goNDTUef/xx
u6OZJjc31xg6dKjRq1cvIzY21sjOzjacTqfdsSx1yy23BNVtIWbNmmUMHjzY6Nmzp5GQkGDccccd
xqFDh+yOZaqtW7caqampRmRkpDFixAjj2WeftTuSqWpra43Q0FCjoaHB7iiWOHfunLF48WJj6NCh
RlRUlJGcnGysWLHC+PLLL+2OZpq//OUvRnJystGrVy9j0KBBxsKFC43PPvvM7lgd4tE+AAAAFgu6
c7gAAAC6GxouAAAAi9FwAQAAWIyGCwAAwGI0XAAAABaj4QIAALAYDRcAAIDFaLgAAAAs9n+41Q/u
bH9/6gAAAABJRU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is not a probability distribution because it does not sum to 1.0. But the code is doing mostly the right thing - the doors are assigned a number (0.3) that is 3 times higher than the walls (0.1). All we need to do is normalize the result so that the probabilities correctly sum to 1.0. Normalization is done by dividing each element by the sum of all elements in the list. That is easy with NumPy:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">belief</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[8]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>array([ 0.188,  0.188,  0.0625,  0.0625,  0.0625,  0.0625,  0.0625,
        0.0625,  0.188,  0.0625])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>FilterPy implements this in the <code>normalize</code> function:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">filterpy.discrete_bayes</span> <span class="kn">import</span> <span class="n">normalize</span>
<span class="n">normalize</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
</pre></div>
<p>It is a bit odd to say "3 times as likely to be right as wrong". We are working in probabilities, so let's specify the probability of the sensor being correct, and compute the scale factor from that. The equation for that is</p>
$$scale =  \frac{prob_{correct}}{prob_{incorrect}} = \frac{prob_{correct}} {1-prob_{correct}}$$<p>Also, the <code>for</code> loop is cumbersome. NumPy lets you index arrays with boolean arrays. You create a boolean array with logical operators. We can find all the doors in the hallway with:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hallway</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[9]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>array([ True,  True, False, False, False, False, False, False,  True,
       False], dtype=bool)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When you use the boolean array as an index to another array it returns only the elements where the index is <code>True</code>. Thus we can replace the <code>for</code> loop with</p>
<div class="highlight"><pre><span></span><span class="n">belief</span><span class="p">[</span><span class="n">hall</span><span class="o">==</span><span class="n">z</span><span class="p">]</span> <span class="o">*=</span> <span class="n">scale</span>
</pre></div>
<p>and only the elements which equal <code>z</code> will be multiplied by <code>scale</code>. This is roughly 100 times faster than the <code>for</code> loop because the operation is performed in C, not Python.</p>
<p>Here is our improved version:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">filterpy.discrete_bayes</span> <span class="k">import</span> <span class="n">normalize</span>

<span class="k">def</span> <span class="nf">scaled_update</span><span class="p">(</span><span class="n">hall</span><span class="p">,</span> <span class="n">belief</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">z_prob</span><span class="p">):</span> 
    <span class="n">scale</span> <span class="o">=</span> <span class="n">z_prob</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">z_prob</span><span class="p">)</span>
    <span class="n">belief</span><span class="p">[</span><span class="n">hall</span><span class="o">==</span><span class="n">z</span><span class="p">]</span> <span class="o">*=</span> <span class="n">scale</span>
    <span class="n">normalize</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>

<span class="n">belief</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">scaled_update</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">belief</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">z_prob</span><span class="o">=.</span><span class="mi">75</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sum =&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="n">belief</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;probability of door =&#39;</span><span class="p">,</span> <span class="n">belief</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;probability of wall =&#39;</span><span class="p">,</span> <span class="n">belief</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="mi">3</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>sum = 1.0
probability of door = 0.1875
probability of wall = 0.0625
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
AAAAAElFTkSuQmCC
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see from the output that the sum is now 1.0, and that the probability of a door vs wall is still three times larger. The result also fits our intuition that the probability of a door must be less than 0.333, and that the probability of a wall must be greater than 0.0. Finally, it should fit our intuition that we have not yet been given any information that would allow us to distinguish between any given door or wall position, so all door positions should have the same value, and the same should be true for wall positions.</p>
<p>This result is called the <a href="https://en.wikipedia.org/wiki/Posterior_probability"><em>posterior</em></a>, which is short for <em>posterior probability distribution</em>. All this means is a probability distribution <em>after</em> incorporating the measurement information (posterior means 'after' in this context). To review, the <em>prior</em> is the probability distribution before including the measurement's information.</p>
<p>Another term is the <a href="https://en.wikipedia.org/wiki/Likelihood_function"><em>likelihood</em></a>. When we computed <code>belief[hall==z] *= scale</code> we were computing how <em>likely</em> each position was given the measurement. The likelihood is not a probability distribution because it does not sum to one.</p>
<p>The combination of these gives us the equation</p>
$$\mathtt{posterior} = \frac{\mathtt{likelihood} \times \mathtt{prior}}{\mathtt{normalization}}$$<p></p>
<p>It is very important to learn and internalize these terms as most of the literature uses them extensively.</p>
<p>Does <code>scaled_update()</code> perform this computation? It does. Let me recast it into this form:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">scaled_update</span><span class="p">(</span><span class="n">hall</span><span class="p">,</span> <span class="n">belief</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">z_prob</span><span class="p">):</span> 
    <span class="n">scale</span> <span class="o">=</span> <span class="n">z_prob</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">z_prob</span><span class="p">)</span>
    <span class="n">likelihood</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">hall</span><span class="p">))</span>
    <span class="n">likelihood</span><span class="p">[</span><span class="n">hall</span><span class="o">==</span><span class="n">z</span><span class="p">]</span> <span class="o">*=</span> <span class="n">scale</span>
    <span class="k">return</span> <span class="n">normalize</span><span class="p">(</span><span class="n">likelihood</span> <span class="o">*</span> <span class="n">belief</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This function is not fully general. It contains knowledge about the hallway, and how we match measurements to it. We always strive to write general functions. Here we will remove the computation of the likelihood from the function, and require the caller to compute the likelihood themselves.</p>
<p>Here is a full implementation of the algorithm:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">normalize</span><span class="p">(</span><span class="n">likelihood</span> <span class="o">*</span> <span class="n">prior</span><span class="p">)</span>
</pre></div>
<p>Computation of the likelihood varies per problem. For example, the sensor might not return  just 1 or 0, but a <code>float</code> between 0 and 1 indicating the probability of being in front of a door. It might use computer vision and report a blob shape that you then probabilistically match to a door. It might use sonar and return a distance reading. In each case the computation of the likelihood will be different. We will see many examples of this throughout the book, and learn how to perform these calculations.</p>
<p>FilterPy implements <code>update</code>. Here is the previous example in a fully general form:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">filterpy.discrete_bayes</span> <span class="k">import</span> <span class="n">update</span>

<span class="k">def</span> <span class="nf">lh_hallway</span><span class="p">(</span><span class="n">hall</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">z_prob</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; compute likelihood that a measurement matches</span>
<span class="sd">    positions in the hallway.&quot;&quot;&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">z_prob</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">z_prob</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="n">e8</span>

    <span class="n">likelihood</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">hall</span><span class="p">))</span>
    <span class="n">likelihood</span><span class="p">[</span><span class="n">hall</span><span class="o">==</span><span class="n">z</span><span class="p">]</span> <span class="o">*=</span> <span class="n">scale</span>
    <span class="k">return</span> <span class="n">likelihood</span>

<span class="n">belief</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">update</span><span class="p">(</span><span class="n">lh_hallway</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">z_prob</span><span class="o">=.</span><span class="mi">75</span><span class="p">),</span> <span class="n">belief</span><span class="p">)</span>  
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[12]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>array([ 0.188,  0.188,  0.0625,  0.0625,  0.0625,  0.0625,  0.0625,
        0.0625,  0.188,  0.0625])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Incorporating-Movement">Incorporating Movement<a class="anchor-link" href="#Incorporating-Movement">&#182;</a></h2><p>Recall how quickly we were able to find an exact solution when we incorporated a series of measurements and movement updates. However, that occurred in a fictional world of perfect sensors. Might we be able to find an exact solution with noisy sensors?</p>
<p>Unfortunately, the answer is no. Even if the sensor readings perfectly match an extremely complicated hallway map, we cannot be 100% certain that the dog is in a specific position - there is, after all, a tiny possibility that every sensor reading was wrong! Naturally, in a more typical situation most sensor readings will be correct, and we might be close to 100% sure of our answer, but never 100% sure. This may seem complicated, but lets go ahead and program the math.</p>
<p>First let's deal with the simple case - assume the movement sensor is perfect, and it reports that the dog has moved one space to the right. How would we alter our <code>belief</code> array?</p>
<p>I hope that after a moment's thought it is clear that we should shift all the values one space to the right. If we previously thought there was a 50% chance of Simon being at position 3, then after he moved one position to the right we should believe that there is a 50% chance he is at position 4. The hallway is circular, so we will use modulo arithmetic to perform the shift.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">perfect_predict</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">move</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; move the position by `move` spaces, where positive is </span>
<span class="sd">    to the right, and negative is to the left</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">belief</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="n">move</span><span class="p">)</span> <span class="o">%</span> <span class="n">n</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">result</span>
        
<span class="n">belief</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">35</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Before prediction&#39;</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="mi">4</span><span class="p">))</span>

<span class="n">belief</span> <span class="o">=</span> <span class="n">perfect_predict</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;After prediction&#39;</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="mi">4</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that we correctly shifted all values one position to the right, wrapping from the end of the array back to the beginning.</p>
<p>If you execute the next cell by pressing CTRL-Enter in it you can see this in action. This simulates Simon walking around and around the hallway. It does not (yet) incorporate new measurements so the probability distribution does not change.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="o">%</span><span class="k">matplotlib</span> notebook
<span class="n">set_figsize</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
    <span class="c1"># Simon takes one step to the right</span>
    <span class="n">belief</span> <span class="o">=</span> <span class="n">perfect_predict</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
    <span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
    
<span class="c1"># reset to noninteractive plot settings</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">set_figsize</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>



<div id="64af1793-5fa9-4677-bfe7-7eadde389a1a"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#64af1793-5fa9-4677-bfe7-7eadde389a1a');
/* Put everything inside the global mpl namespace */
window.mpl = {};

mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width);
        canvas.attr('height', height);

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'];
    var y0 = fig.canvas.height - msg['y0'];
    var x1 = msg['x1'];
    var y1 = fig.canvas.height - msg['y1'];
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x;
    var y = canvas_pos.y;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area"><div class="prompt"></div>

<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Terminology">Terminology<a class="anchor-link" href="#Terminology">&#182;</a></h2><p>I introduced this terminology in the last chapter, but let's review to help solidify your knowledge.</p>
<p>The <em>system</em> is what we are trying to model or filter. Here the system is our dog. The <em>state</em> is its current configuration or value. In this chapter the state is our dog's position. We rarely know the actual state, so we say our filters produce the <em>estimated state</em> of the system. In practice this often gets called the state, so be careful to understand the context.</p>
<p>One cycle of prediction and updating with a measurement is called the state or system <em>evolution</em>, which is short for <em>time evolution</em> [7]. Another term is <em>system propogation</em>. It refers to how the state of the system changes over time. For filters, time is usually a discrete step, such as 1 second. For our dog tracker the system state is the position of the dog, and the state evolution is the position after a discrete amount of time has passed.</p>
<p>We model the system behavior with the <em>process model</em>. Here, our process model is that the dog moves one or more positions at each time step. This is not a particularly accurate model of how dogs behave. The error in the model is called the <em>system error</em> or <em>process error</em>.</p>
<p>The prediction is our new <em>prior</em>. Time has moved forward and we made a prediction without benefit of knowing the measurements.</p>
<p>Lets work an example. The current position of the dog is 17 m. Our epoch is 2 seconds long, and the dog is traveling at 15 m/s. Where do we predict he will be in two seconds?</p>
<p>Clearly,</p>
$$ \begin{aligned}
\bar x &= 17 + (15*2) \\
&= 47
\end{aligned}$$<p>I use bars over variables to indicate that they are predictions, or priors. We can write the equation for the process model like this:</p>
$$ \bar x_{k+1} = x_k + f_x(\bullet)$$<p>$x_k$ is the current position or state. If the dog is at 17 m then $x_k = 17$.</p>
<p>$f_x(\bullet)$ is the state propagation function for x. It describes how much the $x_k$ changes over one time step. For our example it performs the computation $15 \cdot 2$ so we would define it as</p>
$$f_x(v_x, t) = v_x t$$<p>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Adding-Uncertainty-to-the-Prediction">Adding Uncertainty to the Prediction<a class="anchor-link" href="#Adding-Uncertainty-to-the-Prediction">&#182;</a></h2><p><code>perfect_sensor()</code> assumes perfect measurements, but all sensors have noise. What if the sensor reported that our dog moved one space, but he actually moved two spaces, or zero? This may sound like an insurmountable problem, but let's model it and see what happens.</p>
<p>Assume that the sensor's movement measurement is 80% likely to be correct, 10% likely to overshoot one position to the right, and 10% likely to undershoot to the left. That is, if the movement measurement is 4 (meaning 4 spaces to the right), the dog is 80% likely to have moved 4 spaces to the right, 10% to have moved 3 spaces, and 10% to have moved 5 spaces.</p>
<p>Each result in the array now needs to incorporate probabilities for 3 different situations. For example, consider the reported movement of 2. If we are 100% certain the dog started from position 3, then there is an 80% chance he is at 5, and a 10% chance for either 4 or 6. Let's try coding that:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">predict_move</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">move</span><span class="p">,</span> <span class="n">p_under</span><span class="p">,</span> <span class="n">p_correct</span><span class="p">,</span> <span class="n">p_over</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
    <span class="n">prior</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">prior</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">belief</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="n">move</span><span class="p">)</span> <span class="o">%</span> <span class="n">n</span><span class="p">]</span>   <span class="o">*</span> <span class="n">p_correct</span> <span class="o">+</span>
            <span class="n">belief</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="n">move</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">n</span><span class="p">]</span> <span class="o">*</span> <span class="n">p_over</span> <span class="o">+</span>
            <span class="n">belief</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="n">move</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">n</span><span class="p">]</span> <span class="o">*</span> <span class="n">p_under</span><span class="p">)</span>      
    <span class="k">return</span> <span class="n">prior</span>

<span class="n">belief</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
<span class="n">prior</span> <span class="o">=</span> <span class="n">predict_move</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_belief_vs_prior</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlYAAACcCAYAAAC9SeXkAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAFDxJREFUeJzt3X+w5XV93/Hna1kFxfUWWKAGXFphkYgxkt6sTkTGH8QF
20oMyZQlSLWt0GlwadppSEkbO6kDyVSTCWArGwnWqiUNmJFkKKITDMVW3I0g/oBwAbsuC/IjwpUQ
YZb13T/Od7eXO3v3nL33871779nnY+bOPd/v+ZzP+/M9e3nxPt9z7vemqpAkSdLCrdjfC5AkSRoX
NlaSJEmN2FhJkiQ1YmMlSZLUiI2VJElSIzZWkiRJjdhYaagktybZ1HKOJNcmuWUe81ye5HtJdiY5
fyFrkqR91SIPNd5W7u8F6IC1kX1s7JOsAy4B3gXcAfygh3VJ0t68G3h+fy9CS5eNlfaLqnp6Hg87
EdhZVX/aej2StDdJXlRVO6rqqVZztViXlh7fCtSoVnRvwz2eZDrJ1UlevOvOJB9Ick+SHyb5yySX
Jjlorsn29FZgknOS3NnN8Z0kH0nykl3jgU926/hRkp19Haik8de9pXfNXLnW3f/xJL+Z5GFga7f/
S7M+1rAyyW8leSjJc0m+lWTDrFo/6jLy00meYpBlGlM2VhrVLwKHA6cC5wI/B1wOkOQ/AP+Kwdt0
JwEXAxcAvzHq5EneC3wU+E/dHO8B3g58rBuyEfiXwE7gaOAVCzscSeIXmCPXOr8IrAbeBvxst2/2
34G7HPinDDLqZOBTwKeSvHXWuN8AvgycAvy7doegpSb+rUANk+RW4Djg+Op+YJK8H/g9BqHzOPDu
qrplxmPeA1xRVYfNmGOqqi7otq8Fjqmqd3Tb3wEur6qZrwTfDPw5cFhVTSf5x8DvV9XuM2WSNB9D
cu0I4CbgFVV10h4eN1VVF3Rn1J8ELq6qq2eM+Szw8qo6vdv+EfDxXfmn8eZnrDSqr9YLu/AvAwcD
k8BLgBuSzBx/EPDiJEdU1V/tbeIkqxkE3O8k+cjMuxi8OjwB+IuFH4IkvcBcuXZ8tz0sd04AXgT8
r1n7/xz4tVn7Ns93kVpebKy0ULtC6ReAqT3c//0R5tj1lvRG4Et7uP+hfV+WJC3YMyOMyfAhI8+l
MWBjpVH9dJLMeHX3JuA54C7gWQan0z8/n4mr6rEk24CTquoP2ixXkoaaK9ceGPHx93fjTwO+PWP/
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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It appears to work correctly. Now what happens when our belief is not 100% certain?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">belief</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="mi">4</span><span class="p">,</span> <span class="o">.</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">prior</span> <span class="o">=</span> <span class="n">predict_move</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_belief_vs_prior</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
9XT2RfMsg/0nz9yX/bvONO3LQuuMyrORjVVV7UhyEXArgyNc11bVPUkuHDxd64H3AR9Ncnf3sl+p
qu/t9WwlqSdmmaRJGOtjxFV1C/DyOeuuGXq8hcFHmCVpyTLLJPXNO69LkiQ1YmMlSZLUiI2VJElS
IzZWkiRJjdhYSZIkNWJjJUmS1IiNlSRJUiM2VpIkSY3YWEmSJDViYyVJktSIjZUkSVIjNlaSJEmN
2FhJkiQ1MlZjleSMJPcmuS/JZfOMeUOSO5N8PcltbacpSQtnlknq28pRA5KsAK4G3gw8CmxIcmNV
3Ts0Zgb4EPCWqnokyeq+JixJ+8IskzQJ4xyxWgdsqqrNVbUNuB44a86Yc4FPVdUjAFX1RNtpStKC
mWWSejdOY3UU8NDQ8sPdumEvAw5LcluSDUne2WqCktSIWSapd6mqPQ9I3gGcXlUXdMvnAeuq6pKh
MVcBfx94E3AI8H+Bt1bV/TvHzM7O7iq0adOmlvsgaYlbs2bNrsczMzNZjDm0yjIwz6T92ag8G3mN
FfAIcMzQ8tHdumEPA09U1TPAM0m+APwEcD9akO2HHMaTO8b5MY3v0AO2s3Lr95puU1oGzDJJvRvn
/9gbgBOSHAtsAc4Gzpkz5kbgqiQHAAcBrwF+e74Nrl27dt5iGzduHDmmheVS5/bNT3L5F9pe5nHV
qas55RXH7fXrlsu/2VKpMak6y2FfZmdnW09nXzTPMth/8sx92b/rTNO+LLTOqDwb2VhV1Y4kFwG3
Mrgm69qquifJhYOna31V3ZvkM8DdwA5gfVV9c69nK0k9McskTcJY55iq6hbg5XPWXTNn+QPAB9pN
TZLaMssk9c07r0uSJDViYyVJktSIjZUkSVIjNlaSJEmN2FhJkiQ10vbOk5Ik7QceeOJptmzdvscx
Tx98ODC4H+EoRx6ykuNXr2oyNy0uGytJkvbSlq3buXjsmzc/O3LEVaeu5vjVC5uTlgZPBUqSJDVi
YyVJktSIjZUkSVIjNlaSJEmN2FhJkiQ1YmMlSZLUyFiNVZIzktyb5L4kl+1h3E8l2Zbk59pNUZLa
MMsk9W1kY5VkBXA1cDpwEnBOkhPnGfebwGdaT1KSFsoskzQJ4xyxWgdsqqrNVbUNuB44azfjLgZu
AL7bcH6S1IpZJql34zRWRwEPDS0/3K3bJcmPAj9bVf8VSLvpSVIzZpmk3qWq9jwgeQdwelVd0C2f
B6yrqkuGxvxP4ANV9eUk1wF/WlWfGt7O7OzsrkKbNm1quAvT7fGDD+fyO0d/HcLeeP/JB/GSZ3wz
rslZs2bNrsczMzOL0rC0yjIwz9Q+m83l5WNUno3zXYGPAMcMLR/drRu2Frg+SYDVwJlJtlXVTXs9
42Vi+yGH8eSOtl+1eOgB21m59XtNtylpF7NMUu/G6Qw2ACckORbYApwNnDM8oKqO2/m4e5f3J3sK
orVr185bbOPGjSPHtLDQOrdvfpLLx/4CzvFcdepqTnnFcc9ZN/hW9LZHrFatWsXaHztm9MA5lsvP
ZqnUmFSd5bAvs7OzraezL5pnGUxHni2VGpOq06JG62ze11yG5fNvNi11RuXZyMaqqnYkuQi4lcE1
WddW1T1JLhw8XevnvmSvZylJPTPL9g8PPPE0W7Zu3+OYpw8+HNjZHI125CErOX71qgXPTfuHsc5l
VdUtwMvnrLtmnrH/tMG8JKk5s2z6bdm6nYvHPpsw3hGnq05dzfGr931O2r9453VJkqRGbKwkSZIa
sbGSJElqxMZKkiSpERsrSZKkRmysJEmSGrGxkiRJasTGSpIkqREbK0mSpEZsrCRJkhqxsZIkSWrE
xkqSJKkRGytJkqRGxmqskpyR5N4k9yW5bDfPn5vkq92f25P8ePupStLCmGWS+jaysUqyArgaOB04
CTgnyYlzhj0InFpVPwG8D/j91hOVpIUwyyRNwjhHrNYBm6pqc1VtA64HzhoeUFVfqqrZbvFLwFFt
pylJC2aWSerdOI3VUcBDQ8sPs+ew+efA/1rIpCSpB2aZpN6lqvY8IHkHcHpVXdAtnwesq6pLdjP2
jQwOtb+uqp4cfm52dnZXoU2bNjWY+uJ6/ODDufzOZ5tu8/0nH8RLnvnuotSR+rRmzZpdj2dmZrIY
c2iVZTB9eTZNlms2m8vLx6g8WznGNh4BjhlaPrpb9xxJXgWsB87YXRBJ0iIzyyT1bpzGagNwQpJj
gS3A2cA5wwOSHAN8CnhnVT0waoNr166d97mNGzeOHNPCQuvcvvlJoO27olWrVrH2x455zrpJ1RnH
cvnZLJUak6qzHPZldnZ29KD+Nc8ymI48Wyo1WtRZrtm8r7kM/vwnXWdUno1srKpqR5KLgFsZXJN1
bVXdk+TCwdO1HvgPwGHA7yUJsK2q1u31bCWpJ2aZpEkY54gVVXUL8PI5664Zevwe4D1tpyZJbZll
kvrmndclSZIasbGSJElqxMZKkiSpERsrSZKkRmysJEmSGrGxkiRJasTGSpIkqREbK0mSpEZsrCRJ
khqxsZIkSWrExkqSJKkRGytJkqRGxvoSZkmSNFkPPPE0W7ZuHznu6YMPB+D2zU+OHHvkISs5fvWq
Bc9N87OxkiRpCdqydTsXf+GJvXjFsyNHXHXqao5fve9z0mhjNVZJzgD+C4NTh9dW1W/tZsyVwJnA
VuBdVXVXy4lK0kKZZYtrnCMwHn3RcjeysUqyArgaeDPwKLAhyY1Vde/QmDOB46tqTZLXAB8GTulp
zpK018yyxbd3R2A8+qLlaZyL19cBm6pqc1VtA64Hzpoz5izgYwBVdQcwk+SIpjOVpIUxyyT1bpzG
6ijgoaHlh7t1exrzyG7GSNJiMssk9S5VtecByTuA06vqgm75PGBdVV0yNOZPgCuq6v90y58DfqWq
vrJzzOzs7J4LSdovzMzMZDHqtsoyMM8kDewuz8Y5YvUIcMzQ8tHdurljXjpijCQtJrNMUu/Gaaw2
ACckOTbJgcDZwE1zxtwEnA+Q5BTgqap6rOlMJWlhzDJJvRv5qcCq2pHkIuBW/vYjyvckuXDwdK2v
qpuTvDXJ/Qw+ovzuudtZrMP/kgTtsgzMM0nzG3mNlSRJksaz5L4rMMkZSe5Ncl+Sy3qqcW2Sx5Lc
3cf2uxpHJ/mzJN9I8rUkl4x+1T7VOSjJHUnu7Oq8t486Xa0VSb6SZO7pk5Y1/l+Sr3b78+Ue68wk
+aMk93Q/o9c03v7Lun34Svf3bI+/A7+c5OtJ7k7yie40Vx91Lu1+x3r7fZ4mk8iyrs5U5Nkks6yr
NxV51neWdTUmkmdTk2VVtWT+MGj07geOBZ4H3AWc2EOd1wGvBu7ucV/+DvDq7vELgb/sY1+67b+g
+/sA4EsMPunUR51fBj4O3NTjv9uDwKF9bX+ozkeBd3ePVwIv6rHWCgY3pHxpD9v+0e7f7MBu+Q+B
83uocxJwN3BQ93t2K3Bc3z+n5fpnUlnW1ZqaPJtUlnU1piLPJpllXY1e8myasmypHbEa5wZ+C1ZV
twOjvy9hYTW+U91XYVTVXwP30NP9cKrqb7qHBzH4D6v5+d0kRwNvBT7SettzS9HzkdQkLwJeX1XX
AVTV9qr6fo8lTwMeqKqHRo7cNwcAhyRZCbyAQei19grgjqp6tqp2AF8Afq6HOtNiIlkG05Vnk8gy
mJ48W4Qsg37zbCqybKk1VuPcwG/ZSfJ3GbyjvKOn7a9IcifwHeCzVbWhhzK/A/xbegq6IQV8NsmG
JO/pqcbfA55Icl13aHt9kuf3VAvgHwP/o48NV9WjwAeBbzO4LcBTVfW5Hkp9HXh9kkOTvIDB/5Re
OuI1+7OpzDLoN88mlGUwPXk26SyDnvJsmrJsqTVWUyfJC4EbgEu7d3rNVdUPq+pkBvfceU2SV7bc
fpJ/ADzWvWNN96cvr62qn2Twy/5LSV7XQ42VwE8CH+pq/Q3wqz3UIcnzgLcBf9TT9n+EwZGQYxkc
Sn9hknNb16nB9+n9FvBZ4GbgTmBH6zpa2vrOs76zDKYuzyaWZdBvnk1Tli21xmqcG/gtG93hzBuA
/15VN/ZdrzsEfBtwRuNNvxZ4W5IHGbxTeWOSjzWuAUBVben+fhz4YwanVFp7GHioqjZ2yzcwCKc+
nAn8Rbc/fTgNeLCqvtcd1v408NN9FKqq66pqbVW9AXgKuK+POlNiqrIMJptnPWYZTFeeTTLLoN88
m5osW2qN1Tg38Gul73cqAH8AfLOqfrevAklWJ5npHj8f+Bng3pY1quryqjqmqo5j8DP5s6o6v2UN
gCQv6N4Rk+QQ4C0MDts2VYMbPj6U5GXdqjcD32xdp3MOPZ0G7HwbOCXJwUnCYF/u6aNQkpd0fx8D
vB34ZB91psQkswymIM8mkWUwXXk24SyDfvNsarJs5A1CJ6nmuYFf6zpJPgm8AXhxkm8D79158V/D
Gq8FfhH4WnfNQAGXV9UtLesARwL/LckKBv9mf1hVNzeuMSlHAH+cpBj8bn6iqm7tqdYlwCe6Q9sP
Ms+NIBeiO39/GnBB623vVFVfTnIDg8PZ27q/1/dU7lNJDuvq/MsJXCS7bE0qy2Cq8myasgwml2e9
Zxn0n2fTlGXeIFSSJKmRpXYqUJIkadmysZIkSWrExkqSJKkRGytJkqRGbKwkSZIasbGSJElqxMZK
kiSpERsrSZKkRv4/BhD4+2SIHe0AAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here the results are more complicated, but you should still be able to work it out in your head. The 0.04 is due to the possibility that the 0.4 belief undershot by 1. The 0.38 is due to the following: the 80% chance that we moved 2 positions (0.4 $\times$ 0.8) and the 10% chance that we undershot (0.6 $\times$ 0.1). Overshooting plays no role here because if we overshot both 0.4 and 0.6 would be past this position. <strong>I strongly suggest working some examples until all of this is very clear, as so much of what follows depends on understanding this step.</strong></p>
<p>If you look at the probabilities after performing the update you might be dismayed. In the example above we started with probabilities of 0.4 and 0.6 in two positions; after performing the update the probabilities are not only lowered, but they are strewn out across the map.</p>
<p>This is not a coincidence, or the result of a carefully chosen example - it is always true of the evolution (predict step). If the sensor is noisy we lose some information on every prediction. Suppose we were to perform the prediction an infinite number of times - what would the result be? If we lose information on every step, we must eventually end up with no information at all, and our probabilities will be equally distributed across the <code>belief</code> array. Let's try this with 100 iterations. The plot is animated; recall that you put the cursor in the cell and press Ctrl-Enter to execute the code and see the animation.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> notebook
<span class="n">set_figsize</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">belief</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
    <span class="n">belief</span> <span class="o">=</span> <span class="n">predict_move</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Step </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Final Belief:&#39;</span><span class="p">,</span> <span class="n">belief</span><span class="p">)</span>

<span class="c1"># reset to noninteractive plot settings</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">set_figsize</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>



<div id="10939dfe-e4a5-47dd-ab69-cd53d2f31d80"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#10939dfe-e4a5-47dd-ab69-cd53d2f31d80');
/* Put everything inside the global mpl namespace */
window.mpl = {};

mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width);
        canvas.attr('height', height);

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'];
    var y0 = fig.canvas.height - msg['y0'];
    var x1 = msg['x1'];
    var y1 = fig.canvas.height - msg['y1'];
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x;
    var y = canvas_pos.y;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area"><div class="prompt"></div>

<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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">
</div>

</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Final Belief: [ 0.104  0.103  0.101  0.0987  0.0967  0.0959  0.0967  0.0987  0.101
  0.103]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After 100 iterations we have lost almost all information, even though we were 100% sure that we started in position 0. Feel free to play with the numbers to see the effect of differing number of updates. For example, after 100 updates a small amount of information is left, after 50 a lot is left, but by 200 iterations essentially all information is lost.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And, if you are viewing this in Github or nbviewer, here is an animation of that output.
<img src="animations/02_no_info.gif"></p>
<p>I will not generate these standalone animations through the rest of the book. Please see the preface for instructions to run this book on the web, for free, or install IPython on your computer. This will allow you to run all of the cells and see the animations. It's very important that you practice with this code, not just read passively.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Generalizing-with-Convolution">Generalizing with Convolution<a class="anchor-link" href="#Generalizing-with-Convolution">&#182;</a></h2><p>We made the assumption that the movement error is at most one position. But it is possible for the error to be two, three, or more positions. Again, as programmers we always want to generalize our code so that it works for all cases.</p>
<p>This is easily solved with <a href="https://en.wikipedia.org/wiki/Convolution"><em>convolution</em></a>. Convolution modifies one function with another function. In our case we are modifying a probability distribution with the error function of the sensor. The implementation of <code>predict_move()</code> is a convolution, though we did not call it that. Formally, convolution is defined as</p>
$$ (f \ast g) (t) = \int_0^t \!f(\tau) \, g(t-\tau) \, \mathrm{d}\tau$$<p>where $f\ast g$ is the notation for convolving f by g. It does not mean multiply.</p>
<p>Integrals are for continuous functions, but we are using discrete functions. We replace the integral with a summation, and the parenthesis with array brackets.</p>
$$ (f \ast g) [t] = \sum\limits_{\tau=0}^t \!f[\tau] \, g[t-\tau]$$<p>Comparison shows that <code>predict_move()</code> is computing this equation.</p>
<p><a href="https://www.khanacademy.org/math/differential-equations/laplace-transform/convolution-integral/v/introduction-to-the-convolution">Khan Academy</a> [4] has a good introduction to convolution, and Wikipedia has some excellent animations of convolutions [5]. But the general idea is already clear. You slide an array called the <em>kernel</em> across another array, multiplying the neighbors of the current cell with the values of the second array. In our example above we used 0.8 for the probability of moving to the correct location, 0.1 for undershooting, and 0.1 for overshooting. We make a kernel of this with the array <code>[0.1, 0.8, 0.1]</code>. All we need to do is write a loop that goes over each element of our array, multiplying by the kernel, and summing the results. To emphasize that the belief is a probability distribution I have named it <code>pdf</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">predict_move_convolution</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">kernel</span><span class="p">):</span>
    <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pdf</span><span class="p">)</span>
    <span class="n">kN</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span>
    <span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">kN</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">prior</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="n">kN</span><span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="p">(</span><span class="n">width</span><span class="o">-</span><span class="n">k</span><span class="p">)</span> <span class="o">-</span> <span class="n">offset</span><span class="p">)</span> <span class="o">%</span> <span class="n">N</span>
            <span class="n">prior</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">pdf</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*</span> <span class="n">kernel</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">prior</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This illustrates the algorithm, but it runs very slow. SciPy provides a convolution routine <code>convolve()</code> in the <code>ndimage.filters</code> module. We  need to shift the pdf by <code>offset</code> before convolution; <code>np.roll()</code> does that. The move and predict algorithm can be implemented with one line:</p>
<div class="highlight"><pre><span></span><span class="n">convolve</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">offset</span><span class="p">),</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;wrap&#39;</span><span class="p">)</span>
</pre></div>
<p>FilterPy implements this with <code>discrete_bayes</code>' <code>predict()</code> function.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">filterpy.discrete_bayes</span> <span class="k">import</span> <span class="n">predict</span>

<span class="n">belief</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">55</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">]</span>
<span class="n">prior</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">])</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_belief_vs_prior</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">prior</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.6</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All of the elements are unchanged except the middle ones. The values in position 4 and 6 should be $(0.1 \times 0.05)+ (0.8 \times 0.05) + (0.1 \times 0.55) = 0.1$. Position 5 should be $(0.1 \times 0.05) + (0.8 \times 0.55)+ (0.1 \times 0.05) = 0.45$.</p>
<p>Let's ensure that it shifts the positions correctly for movements greater than one and for asymmetric kernels.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prior</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">6</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">])</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_belief_vs_prior</span><span class="p">(</span><span class="n">belief</span><span class="p">,</span> <span class="n">prior</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.6</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
kiQ18v8APPQsGpfaoO4AAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The position was correctly shifted by 3 positions and we give more weight to the likelihood of an overshoot vs an undershoot, so this looks correct.</p>
<p>Make sure you understand what we are doing. We are making a prediction of where the dog is moving, and convolving the probabilities to get the prior.</p>
<p>If we weren't using probabilities we would use this equation that I gave earlier:</p>
$$ \bar x_{k+1} = x_k + f_{\mathbf x}(\bullet)$$<p>The prior, our prediction of where the dog will be, is the amount the dog moved plus his current position. The dog was at 10, he moved 5 meters, so he is now at 15 m. It couldn't be simpler. But we are using probabilities to model this, so our equation is:</p>
$$ \bar{ \mathbf x}_{k+1} = \mathbf x_k \ast f_{\mathbf x}(\bullet)$$<p>We are <em>convolving</em> the current probabilistic position estimate with a probabilistic estimate of how much we think the dog moved. It's the same concept, but the math is slightly different. $\mathbf x$ is bold to denote that it is an array of numbers.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Integrating-Measurements-and-Movement-Updates">Integrating Measurements and Movement Updates<a class="anchor-link" href="#Integrating-Measurements-and-Movement-Updates">&#182;</a></h2><p>The problem of losing information during a prediction may make it seem as if our system would quickly devolve into no knowledge. However, we follow a prediction with an update step where we incorporate the measurement. The update improves our knowledge. The output of the update step is fed into the next prediction. The prediction degrades our certainty. That is passed into another update, where certainty is again increased.</p>
<p>Let's think about this intuitively. Consider a simple case - you are tracking a dog while he sits still. During each prediction you predict he doesn't move. Your filter quickly <em>converges</em> on an accurate estimate of his position. Then the microwave in the kitchen turns on, and he goes streaking off. You don't know this, so at the next prediction you predict he is in the same spot. But the measurements tell a different story. As you incorporate the measurements your belief will be smeared along the hallway, leading towards the kitchen. On every epoch (cycle) your belief that he is sitting still will get smaller, and your belief that he is inbound towards the kitchen at a startling rate of speed increases.</p>
<p>That is what intuition tells us. What does the math tell us?</p>
<p>We have already programmed the update and predict steps. All we need to do is feed the result of one into the other, and we will have implemented a dog tracker!!! Let's see how it performs. We will input measurements as if the dog started at position 0 and moved right one position each epoch. As in a real world application, we will start with no knowledge of his position by assigning equal probability to all positions.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">filterpy.discrete_bayes</span> <span class="k">import</span> <span class="n">update</span>

<span class="n">hallway</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">prior</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">likelihood</span> <span class="o">=</span> <span class="n">lh_hallway</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">z_prob</span><span class="o">=.</span><span class="mi">75</span><span class="p">)</span>
<span class="n">posterior</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_prior_vs_posterior</span><span class="p">(</span><span class="n">prior</span><span class="p">,</span> <span class="n">posterior</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After the first update we have assigned a high probability to each door position, and a low probability to each wall position.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">kernel</span> <span class="o">=</span> <span class="p">(</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">)</span>
<span class="n">prior</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_prior_vs_posterior</span><span class="p">(</span><span class="n">prior</span><span class="p">,</span> <span class="n">posterior</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
4GoGK1wXV9WWJGcN7q5NSQ4FZoGDgSeSvA14UVU9vPhDkaR2zDJJkzDWe6yq6irg6HnbLhq6/g3g
uW2nJklt9ZFlg1fIu7fz/R4Ljdnp2U9by5GHHLw3pSWtQPv8m9claTmdc/39Y4wafWrifccfwpGH
LH0+kpaXf9JGkiSpEVesJEkTcdv9D3HfIwt/96qnT6fXavn3t7GSJE3EfY88PuapU/D06fRZLf/+
ngqUJElqxBWrRRpnSROWvqzZeul0UnUWW2NSdVosN0/TsvY0HYtWNzOznzotfmerhY3VIu3dkiYs
dlmz9dLppOosvcak6ix+uXmalrWn6Vi0upmZfddZ/O9stfBUoCRJUiM2VpIkSY3YWEmSJDViYyVJ
ktSIjZUkSVIjNlaSJEmN2FhJkiQ1MlZjleSkJFuT3JrkvD2M+Z0k25J8LslL2k5TkpbOLJPUt5GN
VZI1wAXAicAxwOlJXjBvzGuBI6tqPXAW8P4e5ipJi2aWSZqEcVasNgLbqurOqtoOXAacMm/MKcCH
Aarq08BMkkObzlSSlsYsk9S7cRqrw4C7hm7f3W1baMw9uxkjScvJLJPUu1TVwgOSU4ETq+rM7vab
gI1Vde7QmI8D766qv+luXwv8x6r67M4xc3NzCxeStCrMzMxkOeq2yjIwzyQN7C7PxlmxugdYN3T7
8G7b/DHPHTFGkpaTWSapd+M0VpuBo5IckeQpwGnAlfPGXAm8GSDJK4AHq+obTWcqSUtjlknq3dpR
A6pqR5KzgasZNGIXV9WWJGcN7q5NVfWJJD+e5CvAI8DPzN/Pci3/SxK0yzIwzyTt2cj3WEmSJGk8
K+6b18f5Ar8GNS5O8o0kt/Sx/67G4Un+KskXk3w+ybmjH7WoOk9N8ukkN3V13t5Hna7WmiSfTTL/
9EnLGl9NcnN3PDf2WGcmyZ8l2dL9G7288f6f3x3DZ7ufcz0+B34hyReS3JLk0u40Vx913tY9x3p7
Pk+TSWRZV2cq8mySWdbVm4o86zvLuhoTybOpybKqWjEXBo3eV4AjgP2BzwEv6KHOccBLgFt6PJa/
D7yku34Q8OU+jqXb/4Hdz/2ATzH4pFMfdX4B+EPgyh5/b7cDP9DX/ofqfAj4me76WuDpPdZaA9wL
PLeHfT+n+509pbv9J8Cbe6hzDHAL8NTueXY18Ly+/5321cuksqyrNTV5Nqks62pMRZ5NMsu6Gr3k
2TRl2UpbsRrnC/yWrKpuAB5ovd95Nb5eVZ/rrj8MbKGn78Opqke7q09l8B9W8/O7SQ4Hfhz4QOt9
zy9FzyupSZ4O/HBVXQJQVY9X1f/rseSrgduq6q6RIxdnP+BpSdYCBzIIvdZeCHy6qr5bVTuA64Gf
7KHOtJhIlsF05dkksgymJ8+WIcug3zybiixbaY3VOF/gt89J8g8YvKL8dE/7X5PkJuDrwDVVtbmH
Mr8J/CI9Bd2QAq5JsjnJGT3V+IfA/Uku6Za2NyU5oKdaAD8F/HEfO66qe4H/BnyNwdcCPFhV1/ZQ
6gvADyf5gSQHMvif0nNHPGY1m8osg37zbEJZBtOTZ5POMugpz6Ypy1ZaYzV1khwEXA68rXul11xV
PVFVP8jgO3denuRFLfef5CeAb3SvWNNd+nJsVb2UwZP93yU5rocaa4GXAhd2tR4FfqmHOiTZHzgZ
+LOe9v/9DFZCjmCwlH5Qkje0rlNVW4FfA64BPgHcBOxoXUcrW9951neWwdTl2cSyDPrNs2nKspXW
WI3zBX77jG4583LgI1V1Rd/1uiXg64CTGu/6WODkJLczeKXyo0k+3LgGAFV1X/fzm8CfMzil0trd
wF1VNdvdvpxBOPXhtcBnuuPpw6uB26vq292y9seAf9ZHoaq6pKo2VNUrgQeBW/uoMyWmKstgsnnW
Y5bBdOXZJLMM+s2zqcmyldZYjfMFfq30/UoF4IPAl6rqt/sqkOSQJDPd9QOA1wBbW9aoqvOral1V
PY/Bv8lfVdWbW9YASHJg94qYJE8DfozBsm1TNfjCx7uSPL/bdALwpdZ1OqfT02nAzteAVyT5viRh
cCxb+iiU5Fndz3XAvwD+qI86U2KSWQZTkGeTyDKYrjybcJZBv3k2NVk28gtCJ6n28AV+resk+SPg
lcAzk3wNePvON/81rHEs8Ebg8917Bgo4v6qualkHeDbwB0nWMPid/UlVfaJxjUk5FPjzJMXguXlp
VV3dU61zgUu7pe3b2cMXQS5Fd/7+1cCZrfe9U1XdmORyBsvZ27ufm3oq99Ekz+jqvHUCb5LdZ00q
y2Cq8myasgwml2e9Zxn0n2fTlGV+QagkSVIjK+1UoCRJ0j7LxkqSJKkRGytJkqRGbKwkSZIasbGS
JElqxMZKkiSpERsrSZKkRmysJEmSGvn/Gq/EVcrQAkEAAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The predict step shifted these probabilities to the right, smearing them about a bit. Now let's look at what happens at the next sense.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">likelihood</span> <span class="o">=</span> <span class="n">lh_hallway</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">z_prob</span><span class="o">=.</span><span class="mi">75</span><span class="p">)</span>
<span class="n">posterior</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_prior_vs_posterior</span><span class="p">(</span><span class="n">prior</span><span class="p">,</span> <span class="n">posterior</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
AAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notice the tall bar at position 1. This corresponds with the (correct) case of starting at position 0, sensing a door, shifting 1 to the right, and sensing another door. No other positions make this set of observations as likely. Now lets add an update and then sense the wall.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prior</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
<span class="n">likelihood</span> <span class="o">=</span> <span class="n">lh_hallway</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">z_prob</span><span class="o">=.</span><span class="mi">75</span><span class="p">)</span>
<span class="n">posterior</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_prior_vs_posterior</span><span class="p">(</span><span class="n">prior</span><span class="p">,</span> <span class="n">posterior</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
+P8AAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is exciting! We have a very prominent bar at position 2 with a value of around 35%. It is over twice the value of any other bar in the plot, and is about 4% larger than our last plot, where the tallest bar was around 31%. Let's see one more cycle.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prior</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
<span class="n">likelihood</span> <span class="o">=</span> <span class="n">lh_hallway</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">z_prob</span><span class="o">=.</span><span class="mi">75</span><span class="p">)</span>
<span class="n">posterior</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
<span class="n">book_plots</span><span class="o">.</span><span class="n">plot_prior_vs_posterior</span><span class="p">(</span><span class="n">prior</span><span class="p">,</span> <span class="n">posterior</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlYAAACcCAYAAAC9SeXkAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAFbNJREFUeJzt3XuUpHV95/H3Zxy5KGNHBV0Fh11hREV3o3ZGdzHGiAZI
suAGdwNq3MSNkLiAJ2dP1oS9mKMeb5tNjEIiExGjISEJmgWzhgVPzLJkjzKjeB9kBEVuXlDs5aaB
8bt/1DNj2Znuqun+PdXd1e/XOXX6ufzq+f6equ5vf+v3XCpVhSRJkpZvw0p3QJIkaVpYWEmSJDVi
YSVJktSIhZUkSVIjFlaSJEmNWFhJkiQ1YmGliUjy0STbVrofkrSSknw5ybkr3Q/1J97HSpOQ5EeA
B6vqnpXuiySNI8nLgPdXVbNBiCSPBu6rqvtbbVOriyNW6lWShwJU1XeWW1Tt2ZYkTUiAJqMPQ7nw
W8stqsyFq5uFlfZLd0jvwiRvTvLNJHNJLkhywND6dyd5fZLbgZu75X87fCgwycYkb0lya5LvJfl8
ktPnxfp+krOTXJzkO8D7Jrmvkla3MfLROHnml5N8Icn9Sb7V5arHJ/kJupzT5aLdSd4z9Lyzk+zs
nvfFJOcmecjQ+i8neUOS85PcCVzdLf/K8KHAJId0ff5Gku8m2Z7kRUPrj+zivzTJ/0xyD/D6nl5S
NbBxpTugNeklwCXAc4GjgfcA9wD/oVv/r4GLgRcAexLN/E99bwZ+ETgT+Ez3nD9O8rWq+uhQu/8K
vA74z/hBQNI/tFg+WjTPJHkm8Addm6uBRwDP7rb7d8BZwDuBxzIYvbofIMlvAf8WeA3waeApwLuA
Axnkqz3OBn4HeA4/+H87PxdeBDwLeClwC/CrwF8leXpV3TDU7i3Aa4FX79ero8mrKh8+xn4AHwVu
ojs/r1v2KuA+4OBu/fULPG9bN30w8F3gzHltPgh8ZGj++3ue48OHDx/zHyPy0cNG5RngxcBdwCEL
bP9lwO55yw4G7gV+at7yXwDuGpr/MnDVPrb5ZeDcbvqoLs+dMK/NJ4B3d9NHdm3OXenX28d4D0cA
tBTXVvcX3/k7Bp/UjurmPzHi+UcDDwX+z7zl/xs4dt6y7UvtpKR1YbF8dACL55mrGBQ6X0nyp0le
1Z1cvphjGRRXH0hy954HcAGwad7zrx2xracyGMGa38erMReuWR4KVB/uHaNNGm5LkuYbedJ5Vd2b
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
TkSuQmCC
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-Discrete-Bayes-Algorithm">The Discrete Bayes Algorithm<a class="anchor-link" href="#The-Discrete-Bayes-Algorithm">&#182;</a></h2><p>This chart illustrates the algorithm:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">book_plots</span><span class="o">.</span><span class="n">create_predict_update_chart</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
L77Ibt++3Whbnq43MDCQzZ49m73//vvMysqK2drask2bNrHq6mo2d+5cZmFhwVxcXNj333/PH9NY
PzTVF83th0OHDjFra+tGyzTXmjVr2NChQ9u0TkL01aLAVVtby8zMzNjChQtZVVWVxv7i4mIWEBDA
ZsyYwXJzc1lOTg5/WfXTTz+xn3/+mSUnJ7ObN2+y//qv/2Kenp5MqVQ2etzy5ctZnz592KlTp1hq
airbv38/UygU7Ndff9XZzqYCV21tLbO0tGRLlixhDx48YPfu3WP79+9nCQkJrKSkRGdbtAUuc3Nz
tnr1apaUlMQ2bNjAOI5jL7/8Mtu0aRNLTk5mK1euZCYmJuzRo0dN9oOuPqyrq2tRPyxcuJCNGTNG
5/6WiI6OZiYmJlr//glpby2e4/r555+ZtbU1MzU1Zf7+/iwiIoL99ddf/H5952fKysqYWCxmFy5c
0HlceXk5k0ql7Pz582rbFy1axMaOHauz7rCwMGZkZMQUCgX/MTMzY8uWLWOMMVZQUMBEIhE7e/as
1uN1/Q7aAldAQIBaGVtbWzZhwgT+Z6VSySQSCfvpp5+0nuvpftB2/pb2w8SJE1lYWJjati+++IK5
u7szkUjEoqKiWGhoKHNycmIzZsxgjDEWGhrKevbsqbPOGzduMJFIxFJSUnSWIaS9tPiu4qRJk/Dw
4UMcP34cr7zyCi5dugQ/Pz989tlnjR6XkpKC//7v/4anpyfMzc3h4OAAxhjS09N1HnPnzh1UVVUh
JCQEZmZm/Gfr1q1NPmQ8fPhw3Lhxg8+scO3aNURGRgJ48ujLtGnTMGbMGISGhmLjxo3IyMhofmcA
Givn7ezs4OPjw/9sZGQES0tL5ObmGrwfKisrYWpqqrYtMjISx44dg4mJCRITE8EYQ0xMDHbu3AkA
iIiIaPT3lUqlYIyhsrKy0XKEtIdWrZyXSCQYOXIkRo4ciQ8//BBvv/02Vq1a1ej/9GPHjoWLiwu2
b98OJycnGBkZoW/fvo2+m0+lUgEAjh8/jh49eqjta2o5gkwmQ8+ePXXu3717NxYvXozo6GgcO3YM
K1aswNGjRzF69OhG633a0+3gOE7rtvrfxZD9YGNjg8LCQo3t/fr1w7p16/Dee+/h008/hZeXV+O/
ZAMFBQX826cJMbQ2XcfVt29f1NbWoqqqChKJRCOjQUFBAe7du4fly5cjKCgIXl5eKC4uRm1tLV9G
23He3t4wMTFBamoq3N3d1T5Pf4FbwsfHB5GRkThz5gwCAwOxd+9enW1pC/r0g7bzt7QfBg4ciDt3
7mjdN2DAAMjlcuzduxdVVVUa+x8+fAhnZ2d89dVXattv3boFJycnClykQ7RoxFVQUIDXX38d06dP
h6+vL8zMzPCf//wH//rXvzBq1CgoFAq4ubkhLi4OaWlpUCgUsLa2hqWlJWxsbLBjxw44OzsjMzMT
S5YsURstaDtOoVAgIiICERERUKlUGDZsGMrKynD58mWIxWLMnDlTZ1urq6uRk5Ojtk0sFsPGxgap
qanYtm0bxo8fDycnJyQnJ+PGjRuYO3euzra0BX36Qdv5raysWtQPwcHBWLZsGQoLC2Fpaclvz83N
xZo1axAfHw9/f39ERkbi66+/5vczxrBjxw7s27cPw4YNU6vz3LlzCA4ObpP+IKTZWjIxVl1dzVas
WMGGDBnCrKysmFwuZ71792YRERGssLCQMcbY/fv3WUBAAJPJZGq38s+cOcN8fHyYVCplPj4+7NSp
U8zMzIzt3bu30eMYY+ybb75h/fr1Y6ampszOzo6NGTOGX/CqTVhYGBOJRBqfHj16MMYYy8nJYZMn
T2bOzs7M1NSUubq6smXLlrHa2tpG2/L05PyIESM0JvF9fHzY6tWr1bY5OjqyzZs369UPjZ2/uf3A
GGMBAQFsy5Yt/M8rVqxgvXv3Zr6+vqy0tJT16tWLicViNmnSJJadnc3+/PNPZmJiwuzs7NiZM2fU
6qqqqmLm5uYsLi6u0XMS0l5afFeRCEt0dDTr06eP3qv9//zzT9a/f3924MAB5uvrq3bc5s2bWXBw
cHs1lZAm0bOKz4jg4GDMnTsXmZmZepXfs2cPcnJyUFxcjPv37+ONN97g90kkErVLSkIMjRIJEkIE
h0ZchBDBocBFCBEcClyEEMGhwEUIERwKXIQQwaHARQgRHApchBDBocBFCBEcClyEEMGhwEUIERwK
XIQQwaHARQgRHApchBDBocBFCBEcClyEEMGhwEUIERwKXIQQwaHARQgRHApchBDBocBFCBEcClyE
EMGhwEUIERwKXIQQwaHARQgRHApchBDBocBFCBEcClyEEMGhwEUIERwKXIQQwaHARQgRHApchBDB
ocBFCBEcClyEEMGhwEUIERwKXIQQwaHARQgRHApchBDBocBFCBEcClyEEMGhwEUIERwKXIQQwaHA
RQgRHApchBDBocBFCBEcClyEEMGhwEUIERwKXIQQwaHARQgRHApchBDBocBFCBEcClyEEMGhwEUI
ERwKXIQQwaHARQgRHApchBDBocBFCBEcClyEEMGhwEUIERwKXIQQwaHARQgRHApchBDB+X/SFcVR
xSSLKAAAAABJRU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This filter is a form of the g-h filter. Here we are using the percentages for the errors to implicitly compute the $g$ and $h$ parameters. We could express the discrete Bayes algorithm as a g-h filter, but that would obscure the logic of this filter.</p>
<p>The filter equations are:</p>
$$\begin{aligned} \bar {\mathbf x} &= \mathbf x \ast f_{\mathbf x}(\bullet)\, \, &\text{Predict Step} \\
\mathbf x &= \|\mathcal L \cdot \bar{\mathbf x}\|\, \, &\text{Update Step}\end{aligned}$$<p>$\mathcal L$ is the usual way to write the likelihood function, so I use that. The $\|\bullet\|$ notation denotes the norm.</p>
<p>We can express this in pseudocode.</p>
<p><strong>Initialization</strong></p>

<pre><code>1. Initialize our belief in the state

</code></pre>
<p><strong>Predict</strong></p>

<pre><code>1. Based on the system behavior, predict state at the next time step
2.  Adjust belief to account for the uncertainty in prediction

</code></pre>
<p><strong>Update</strong></p>

<pre><code>1. Get a measurement and associated belief about its accuracy
2. Compute residual between estimated state and measurement
3. Determine whether the measurement matches each state
4. Update state belief if it matches the measurement

</code></pre>
<p>When we cover the Kalman filter we will use this exact same algorithm; only the details of the computation will differ.</p>
<p>Algorithms in this form are sometimes called <em>predictor correctors</em>. We make a prediction, then correct them.</p>
<p>Let's animate this. I've plotted the position of the doorways in black. Prior are drawn in orange, and the posterior in blue. You can see how the prior shifts the position and reduces certainty, and the posterior stays in the same position and increases certainty as it incorporates the information from the measurement. I've made the measurement perfect with the line <code>z_prob = 1.0</code>; we will explore the effect of imperfect measurements in the next section. finally, I draw a thick vertical line to indicate where Simon really is. This is not an output of the filter - we know where Simon really is only because we are simulating his movement.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">discrete_bayes_sim</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">zs</span><span class="p">,</span> <span class="n">z_prob_correct</span><span class="p">,</span> <span class="n">sleep</span><span class="o">=</span><span class="mf">0.25</span><span class="p">):</span>
    <span class="o">%</span><span class="k">matplotlib</span> notebook
    <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hallway</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zs</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="n">prior</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
        <span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
        <span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">prior</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">),</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;#ff8015&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">N</span> <span class="o">+</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleep</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="n">likelihood</span> <span class="o">=</span> <span class="n">lh_hallway</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">z_prob</span><span class="o">=</span><span class="n">z_prob_correct</span><span class="p">)</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
        <span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
        <span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">))</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">+</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleep</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="o">%</span><span class="k">matplotlib</span> inline
    <span class="n">set_figsize</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Final posterior:&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
     
<span class="c1"># change these numbers to alter the simulation</span>
<span class="n">kernel</span> <span class="o">=</span> <span class="p">(</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">)</span>
<span class="n">z_prob</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="c1"># list of perfect measurements</span>
<span class="n">hallway</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">measurements</span> <span class="o">=</span> <span class="p">[</span><span class="n">hallway</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">hallway</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">)]</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>

<span class="n">discrete_bayes_sim</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">measurements</span><span class="p">,</span> <span class="n">z_prob</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>



<div id="7f5cbcb9-fb47-4afe-b18b-4b11942b20a3"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#7f5cbcb9-fb47-4afe-b18b-4b11942b20a3');
/* Put everything inside the global mpl namespace */
window.mpl = {};

mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width);
        canvas.attr('height', height);

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'];
    var y0 = fig.canvas.height - msg['y0'];
    var x1 = msg['x1'];
    var y1 = fig.canvas.height - msg['y1'];
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x;
    var y = canvas_pos.y;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area"><div class="prompt"></div>

<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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">
</div>

</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Final posterior: [ 2.34e-19  2.92e-20  0.0089  0.144  0.605  0.215  0.0264  0.0011
  6.75e-20  3.09e-12]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-Effect-of-Bad-Sensor-Data">The Effect of Bad Sensor Data<a class="anchor-link" href="#The-Effect-of-Bad-Sensor-Data">&#182;</a></h2><p>You may be suspicious of the results above because I always passed correct sensor data into the functions. However, we are claiming that this code implements a <em>filter</em> - it should filter out bad sensor measurements. Does it do that?</p>
<p>To make this easy to program and visualize I will change the layout of the hallway to mostly alternating doors and hallways, and run the algorithm on 15 correct measurements:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hallway</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="n">kernel</span> <span class="o">=</span> <span class="p">(</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">)</span>
<span class="n">prior</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">measurements</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">z_prob</span> <span class="o">=</span> <span class="mf">0.75</span>
<span class="n">discrete_bayes_sim</span><span class="p">(</span><span class="n">prior</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">measurements</span><span class="p">,</span> <span class="n">z_prob</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>



<div id="775a5e6a-b2ce-4ed5-be94-6549af8f838a"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#775a5e6a-b2ce-4ed5-be94-6549af8f838a');
/* Put everything inside the global mpl namespace */
window.mpl = {};

mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width);
        canvas.attr('height', height);

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'];
    var y0 = fig.canvas.height - msg['y0'];
    var x1 = msg['x1'];
    var y1 = fig.canvas.height - msg['y1'];
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x;
    var y = canvas_pos.y;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area"><div class="prompt"></div>

<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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">
</div>

</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Final posterior: [ 0.0372  0.0648  0.055  0.0765  0.267  0.0372  0.0648  0.055  0.0765
  0.267]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have identified the likely cases of having started at position 0 or 5, because we saw this sequence of doors and walls: 1,0,1,0,0. Now I inject a bad measurement. The next measurement should be 1, but instead we get a 0:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">measurements</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">discrete_bayes_sim</span><span class="p">(</span><span class="n">prior</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">measurements</span><span class="p">,</span> <span class="n">z_prob</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>



<div id="cb837d84-f0ce-4437-88e6-a855b2c02d06"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#cb837d84-f0ce-4437-88e6-a855b2c02d06');
/* Put everything inside the global mpl namespace */
window.mpl = {};

mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width);
        canvas.attr('height', height);

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'];
    var y0 = fig.canvas.height - msg['y0'];
    var x1 = msg['x1'];
    var y1 = fig.canvas.height - msg['y1'];
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x;
    var y = canvas_pos.y;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area"><div class="prompt"></div>

<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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">
</div>

</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Final posterior: [ 0.121  0.102  0.0329  0.0938  0.151  0.121  0.102  0.0329  0.0938
  0.151]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That one bad measurement has significantly eroded our knowledge. Now let's continue with a series of correct measurements.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">figsize</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">5.5</span><span class="p">):</span>
    <span class="n">measurements</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">measurements</span><span class="p">):</span>
        <span class="n">likelihood</span> <span class="o">=</span> <span class="n">lh_hallway</span><span class="p">(</span><span class="n">hallway</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">z_prob</span><span class="o">=.</span><span class="mi">75</span><span class="p">)</span>
        <span class="n">posterior</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
        <span class="n">prior</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="mi">4</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;step </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
6uBvr8zOvCcAAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We quickly filtered out the bad sensor reading and converged on the most likely positions for our dog.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Drawbacks-and-Limitations">Drawbacks and Limitations<a class="anchor-link" href="#Drawbacks-and-Limitations">&#182;</a></h2><p>Do not be mislead by the simplicity of the examples I chose. This is a robust and complete filter, and you may use the code in real world solutions. If you need a multimodal, discrete filter, this filter works.</p>
<p>With that said, this filter it is not used often because it has several limitations. Getting around those limitations is the motivation behind the chapters in the rest of this book.</p>
<p>The first problem is scaling. Our dog tracking problem used only one variable, $pos$, to denote the dog's position. Most interesting problems will want to track several things in a large space. Realistically, at a minimum we would want to track our dogs $(x,y)$ coordinate, and probably his velocity $(\dot{x},\dot{y})$ as well. We have not covered the multidimensional case, but instead of an array we use a multidimensional grid to store the probabilities at each discrete location. Each <code>update()</code> and <code>predict()</code> step requires updating all values in the grid, so a simple four variable problem would require $O(n^4)$ running time <em>per time step</em>. Realistic filters can have 10 or more variables to track, leading to exorbitant computation requirements.</p>
<p>The second problem is that the filter is discrete, but we live in a continuous world. The histogram requires that you model the output of your filter as a set of discrete points. A 100 meter hallway requires 10,000 positions to model the hallway to 1cm accuracy. So each update and predict operation would entail performing calculations for 10,000 different probabilities. It gets exponentially worse as we add dimensions. A 100x100 m$^2$ courtyard requires 100,000,000 bins to get 1cm accuracy.</p>
<p>A third problem is that the filter is multimodal. In the least example we ended up with strong beliefs that the dog was in position 4 or 9. This is not always a problem. Particle filters, which we will study later, are multimodal and are often used because of this property. But imagine if the GPS in your car reported to you that it is 40% sure that you are on D street, and 30% sure you are on Willow Avenue.</p>
<p>With that said, if I had a small problem that this technique could handle I would choose to use it; it is trivial to implement, debug, and understand, all virtues.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tracking-and-Control">Tracking and Control<a class="anchor-link" href="#Tracking-and-Control">&#182;</a></h2><p>We have been passively tracking an autonomously moving object. But consider this very similar problem. I am automating a warehouse and want to use robots to collect all of the items for a customer's order. Perhaps the easiest way to do this is to have the robots travel on a train track. I want to be able to send the robot a destination and have it go there. But train tracks and robot motors are imperfect. Wheel slippage and imperfect motors means that the robot is unlikely to travel to exactly the position you command. There is more than one robot, and we need to know where they all are so we do not cause them to crash.</p>
<p>So we add sensors. Perhaps we mount magnets on the track every few feet, and use a Hall sensor to count how many magnets are passed. If we count 10 magnets then the robot should be at the 10th magnet. Of course it is possible to either miss a magnet or to count it twice, so we have to accommodate some degree of error. We can use the code from the previous section to track our robot since magnet counting is very similar to doorway sensing.</p>
<p>But we are not done. We've learned to never throw information away. If you have information you should use it to improve your estimate. What information are we leaving out? We know what control inputs we are feeding to the wheels of the robot at each moment in time. For example, let's say that once a second we send a movement command to the robot - move left 1 unit, move right 1 unit, or stand still.  If I send the command 'move left 1 unit' I expect that in one second from now the robot will be 1 unit to the left of where it is now. This is a simplification because I am not taking acceleration into account, but I am not trying to teach control theory. Wheels and motors are imperfect. The robot might end up 0.9 units away, or maybe 1.2 units.</p>
<p>Now the entire solution is clear. We assumed that the dog kept moving in whatever direction he was previously moving. That is a dubious assumption for my dog! Robots are far more predictable. Instead of making a dubious prediction based on assumption of behavior we will feed in the command that we sent to the robot! In other words, when we call <code>predict()</code> we will pass in the commanded movement that we gave the robot along with a kernel that describes the likelihood  of that movement.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Simulating-the-Train-Behavior">Simulating the Train Behavior<a class="anchor-link" href="#Simulating-the-Train-Behavior">&#182;</a></h3><p>We need to simulate an imperfect train. When we command it to move it will sometimes make a small mistake, and it's sensor will sometimes return the incorrect value.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Train</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">track_len</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">],</span> <span class="n">sensor_accuracy</span><span class="o">=.</span><span class="mi">9</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track_len</span> <span class="o">=</span> <span class="n">track_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kernel</span> <span class="o">=</span> <span class="n">kernel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sensor_accuracy</span> <span class="o">=</span> <span class="n">sensor_accuracy</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; move in the specified direction</span>
<span class="sd">        with some small chance of error&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">+=</span> <span class="n">distance</span>
        <span class="c1"># insert random movement error according to kernel</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kernel</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">k</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="n">s</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">offset</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_len</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>

    <span class="k">def</span> <span class="nf">sense</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
         <span class="c1"># insert random sensor error</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_accuracy</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                <span class="n">pos</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pos</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">pos</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With that we are ready to write the filter. We will put it in a function so that we can run it with different assumptions. I will assume that the robot always starts at the beginning of the track. The track is implemented as being 10 units long, but think of it as a track of length, say 10,000, with the magnet pattern repeated every 10 units. 10 makes it easier to plot and inspect.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">train_filter</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">sensor_accuracy</span><span class="p">,</span> 
             <span class="n">move_distance</span><span class="p">,</span> <span class="n">do_print</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">track</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>

    <span class="n">prior</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">9</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">]</span><span class="o">*</span><span class="mi">9</span><span class="p">)</span>
    <span class="n">normalize</span><span class="p">(</span><span class="n">belief</span><span class="p">)</span>
    
    <span class="n">robot</span> <span class="o">=</span> <span class="n">Train</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">track</span><span class="p">),</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">sensor_accuracy</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
        <span class="n">robot</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">distance</span><span class="o">=</span><span class="n">move_distance</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">sense</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">do_print</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;time </span><span class="si">{}</span><span class="s1">: pos </span><span class="si">{}</span><span class="s1">, sensed </span><span class="si">{}</span><span class="s1">, &#39;&#39;&#39;</span>
                  <span class="sd">&#39;&#39;&#39;at position {}&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">i</span><span class="p">,</span> <span class="n">robot</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">track</span><span class="p">[</span><span class="n">robot</span><span class="o">.</span><span class="n">pos</span><span class="p">]))</span>

        <span class="n">likelihood</span> <span class="o">=</span> <span class="n">lh_hallway</span><span class="p">(</span><span class="n">track</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">sensor_accuracy</span><span class="p">)</span>
        <span class="n">posterior</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">posterior</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">iterations</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">prior</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="n">move_distance</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>       

        <span class="k">if</span> <span class="n">do_print</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;        predicted position is </span><span class="si">{}</span><span class="s1">&#39;&#39;&#39;</span>
                  <span class="sd">&#39;&#39;&#39; with confidence {:.4f}%:&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                  <span class="n">index</span><span class="p">,</span> <span class="n">posterior</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">))</span>            

    <span class="n">book_plots</span><span class="o">.</span><span class="n">bar_plot</span><span class="p">(</span><span class="n">posterior</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">do_print</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final position is&#39;</span><span class="p">,</span> <span class="n">robot</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">posterior</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;predicted position is </span><span class="si">{}</span><span class="s1"> with &#39;&#39;&#39;</span>
              <span class="sd">&#39;&#39;&#39;confidence {:.4f}%:&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">index</span><span class="p">,</span> <span class="n">posterior</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Read the code and make sure you understand it. Now let's do a run with no sensor or movement error. If the code is correct it should be able to locate the robot with no error. The output is a bit tedious to read, but if you are at all unsure of how the update/predict cycle works make sure you read through it carefully to solidify your understanding.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">suppress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">train_filter</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">],</span> <span class="n">sensor_accuracy</span><span class="o">=.</span><span class="mi">999</span><span class="p">,</span>
             <span class="n">move_distance</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">do_print</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>time 0: pos 4, sensed 4, at position 4
        predicted position is 4 with confidence 91.0665%:
time 1: pos 8, sensed 8, at position 8
        predicted position is 8 with confidence 99.9902%:
time 2: pos 2, sensed 2, at position 2
        predicted position is 2 with confidence 100.0000%:
time 3: pos 6, sensed 6, at position 6
        predicted position is 6 with confidence 100.0000%:

final position is 6
predicted position is 6 with confidence 100.0000%:
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the code was able to perfectly track the robot so we should feel reasonably confident that the code is working. Now let's see how it fairs with some errors.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">train_filter</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">],</span> <span class="n">sensor_accuracy</span><span class="o">=.</span><span class="mi">9</span><span class="p">,</span>
         <span class="n">move_distance</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">do_print</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>time 0: pos 4, sensed 4, at position 4
        predicted position is 0 with confidence 84.1121%:
time 1: pos 8, sensed 9, at position 8
        predicted position is 4 with confidence 59.4728%:
time 2: pos 3, sensed 3, at position 3
        predicted position is 3 with confidence 53.5807%:
time 3: pos 7, sensed 8, at position 7
        predicted position is 8 with confidence 37.5836%:

final position is 7
predicted position is 8 with confidence 37.5836%:
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
jqr6yr4+vV5v8SeSJEmaIDMzM1l4bJgZq13AmoH26u7Ywj7PXqKPJEnSVBsmWG0FTkhyXJInAGcD
Vy/oczXwBoAkLwEeqKr7mlYqSZI05pbcbqGq9ia5ALiOH2+3sC3J+f3TtaWqrklyZpI76G+38KaF
1znQdJkkSdI0WXKNlSRJkoYz8W9pk2RDku1Jbk9y4ajraS3JpUnuS3LbqGtZDklWJ/l8km8k+VqS
zUt/1eRIcniSm5Lc0o3vXaOuabkkWZHkK0kWLhWYeEn+K8lXu+/jzaOuZzkkmUny8STbun+Pp466
plaSnNh9777Sfe5N4WvN25N8PcltST7cLd2ZKkne1r2OjvXviomeseo2L70dOA24l/56sLOravtI
C2soycuB7wOXV9VzR11Pa0meATyjqm5N8iTgy8DGKfseHllVP0hyGPBFYHNVTd0v5yRvB14EPLmq
XjvqelpKchfwoqpanvd7GQNJPgT8a1VdlmQlcGRV/c+Iy2qu+72xEzi1qnYs1X8SJHkWcCNwclX9
b5KPAf9SVZePuLRmkpwCfBR4MfAw8Bng96rqrpEWdgCTPmM1zOalE62qbgSm9sW8qr617+2Pqur7
wDambA+0qvpB9/Bw+usaJ/d/MweRZDVwJvB3o65lmYTJf708qCRPBl5RVZcBVNXD0xiqOqcDd05L
qBpwGHDUvlBMf7JhmvwScFNV/aiq9gI3AK8bcU0HNOkvFMNsXqoJkeTngecDN422kra6W2S3AN8C
rq+qraOuaRn8BfCHTGFo7BRwfZKtSd486mKWwS8A9ye5rLtdtiXJE0dd1DL5LfozH1Ojqu4F3gfc
Q3+roweq6nOjraq5rwOvSPJzSY6k/x+5Zy/xNSMx6cFKU6K7DXgl8LZu5mpqVNX/VdUL6O/vdmqS
54y6ppaS/DpwXzfzmO5j2rysql5I/8X8Ld0t+mmyEngh8IFunD8A/mi0JbWX5GeA1wIfH3UtLSX5
Wfp3a44DngU8Kck5o62qrW55yHuA64FrgFuAvSMt6iAmPVgNs3mpxlw3dX0l8I9V9alR17Nculsr
XwA2jLqWxl4GvLZbh/RR4NVJpmZtB0BV7e4+fwf4JP1lCNNkJ7Cjqua69pX0g9a0OQP4cvd9nCan
A3dV1Xe722SfAF464pqaq6rLqmq2ql4FPEB/jfXYmfRgNczmpdNgWmcB9vl74JtV9VejLqS1JKuS
zHSPnwj8GjA1C/MBquqdVbWmqn6R/r/Bz1fVG0ZdVytJjuxmVElyFPAa+rclpka3ofOOJCd2h04D
vjnCkpbLJqbsNmDnHuAlSY5IEvrfv20jrqm5JE/rPq8BfhP4yGgrOrAlNwgdZwfbvHTEZTWV5CPA
q4CnJrkHeNe+BabTIMnLgN8GvtatQyrgnVV17Wgra+aZwD90f4m0AvhYVV0z4pr0yBwDfDJJ0X/N
/HBVXTfimpbDZuDD3e2yuzjARs+TrFuXczpw3qhraa2qbk5yJf3bY3u6z1tGW9WyuCrJU+iP8ffH
9Q8sJnq7BUmSpHEy6bcCJUmSxobBSpIkqRGDlSRJUiMGK0mSpEYMVpIkSY0YrCRJkhoxWEmSJDVi
sJIkSWrk/wH6VtqRdxfEiQAAAABJRU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There was a sensing error at time 1, but we are still quite confident in our position.</p>
<p>Now lets run a very long simulation and see how the filter responds to errors.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">figsize</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">5.5</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">221</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
        <span class="n">train_filter</span><span class="p">(</span><span class="mi">148</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">],</span> 
                     <span class="n">sensor_accuracy</span><span class="o">=.</span><span class="mi">8</span><span class="p">,</span>
                     <span class="n">move_distance</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">do_print</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span> <span class="p">(</span><span class="s1">&#39;iteration </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">148</span><span class="o">+</span><span class="n">i</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that there was a problem on iteration 149 as the confidence degrades. But within a few iterations the filter is able to correct itself and regain confidence in the estimated position.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Bayes-Theorem">Bayes Theorem<a class="anchor-link" href="#Bayes-Theorem">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We developed the math in this chapter merely by reasoning about the information we have at each moment. In the process we discovered <a href="https://en.wikipedia.org/wiki/Bayes%27_theorem"><em>Bayes Theorem</em></a>. Bayes theorem tells us how to compute the probability of an event given previous information. That is exactly what we have been doing in this chapter. With luck our code should match the Bayes Theorem equation!</p>
<p>We implemented the <code>update()</code> function with this probability calculation:</p>
$$ \mathtt{posterior} = \frac{\mathtt{likelihood}\times \mathtt{prior}}{\mathtt{normalization}}$$<p></p>
<p>To review, the <em>prior</em> is the probability of something happening before we include the probability of the measurement (the <em>likelihood</em>) and the <em>posterior</em> is the probability we compute after incorporating the information from the measurement.</p>
<p>Bayes theorem is</p>
$$P(A \mid B) = \frac{P(B \mid A)\, P(A)}{P(B)}$$<p>If you are not familiar with this notation, let's review. $P(A)$ means the probability of event $A$. If $A$ is the event of a fair coin landing heads, then $P(A) = 0.5$.</p>
<p>$P(A \mid B)$ is called a <a href="https://en.wikipedia.org/wiki/Conditional_probability"><em>conditional probability</em></a>. That is, it represents the probability of $A$ happening <em>if</em> $B$ happened. For example, it is more likely to rain today if it also rained yesterday because rain systems usually last more than one day. We'd write the probability of it raining today given that it rained yesterday as $P(\mathtt{rain\_today} \mid \mathtt{rain\_yesterday})$.</p>
<p>In the Bayes theorem equation above $B$ is the <em>evidence</em>, $P(A)$ is the <em>prior</em>, $P(B \mid A)$ is the <em>likelihood</em>, and $P(A \mid B)$ is the <em>posterior</em>. By substituting the mathematical terms with the corresponding words  you can see that Bayes theorem matches out update equation. Let's rewrite the equation in terms of our problem. We will use $x_i$ for the position at <em>i</em>, and $Z$ for the measurement. Hence, we want to know $P(x_i \mid Z)$, that is, the probability of the dog being at $x_i$ given the measurement $Z$.</p>
<p>So, let's plug that into the equation and solve it.</p>
$$P(x_i \mid Z) = \frac{P(Z \mid x_i) P(x_i)}{P(Z)}$$<p>That looks ugly, but it is actually quite simple. Let's figure out what each term on the right means. First is $P(Z \mid x_i)$. This is the the likelihood, or the probability for the measurement at every cell $x_i$. $P(x_i)$ is the <em>prior</em> - our belief before incorporating the measurements. We multiply those together. This is just the unnormalized multiplication in the <code>update()</code> function:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">likelihood</span><span class="p">,</span> <span class="n">prior</span><span class="p">):</span>
    <span class="n">posterior</span> <span class="o">=</span> <span class="n">prior</span> <span class="o">*</span> <span class="n">likelihood</span>   <span class="c1"># P(Z|x)*P(x)</span>
    <span class="k">return</span> <span class="n">normalize</span><span class="p">(</span><span class="n">posterior</span><span class="p">)</span>
</pre></div>
<p>The last term to consider is the denominator $P(Z)$. This is the probability of getting the measurement $Z$ without taking the location into account. We compute that by taking the sum of $x$, or <code>sum(belief)</code> in the code. That is how we compute the normalization! So, the <code>update()</code> function is doing nothing more than computing Bayes theorem.</p>
<p>The literature often gives you these equations in the form of integrals. After all, an integral is just a sum over a continuous function. So, you might see Bayes' theorem written as</p>
$$P(A \mid B) = \frac{P(B \mid A)\, P(A)}{\int P(B \mid A) P(B) \mathtt{d}y}\cdot$$<p>In practice the denominator can be fiendishly difficult to solve analytically (a recent opinion piece for the Royal Statistical Society <a href="http://www.statslife.org.uk/opinion/2405-we-need-to-rethink-how-we-teach-statistics-from-the-ground-up">called it</a> a "dog's breakfast" [8].  Filtering textbooks are filled with integral laden equations which you cannot be expected to solve. We will learn more techniques to handle this in the <strong>Particle Filters</strong> chapter. Until then, recognize that in practice it is just a normalization term over which we can sum. What I'm trying to say is that when you are faced with a page of integrals, just think of them of sums, and relate them back to this chapter, and often the difficulties will fade. Ask yourself "why are we summing these values", and "why am I dividing by this term". Surprisingly often the answer is readily apparent.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Total-Probability-Theorem">Total Probability Theorem<a class="anchor-link" href="#Total-Probability-Theorem">&#182;</a></h2><p>We know now the formal mathematics behind the <code>update()</code> function; what about the <code>predict()</code> function? <code>predict()</code> implements the <a href="https://en.wikipedia.org/wiki/Law_of_total_probability"><em>total probability theorem</em></a>. Let's recall what <code>predict()</code> computed. It computed the probability of being at any given position given the probability of all the possible movement events. Let's express that as an equation. The probability of being at any position $i$ at time $t$ can be written as $P(X_i^t)$. We computed that as the sum of the prior at time $t-1$ $P(X_j^{t-1})$ multiplied by the probability of moving from cell $x_j$ to $x_i$. That is</p>
$$P(X_i^t) = \sum_j P(X_j^{t-1})  P(x_i | x_j)$$<p>That equation is called the <em>total probability theorem</em>. Quoting from Wikipedia [6] "It expresses the total probability of an outcome which can be realized via several distinct events". I could have given you that equation and implemented <code>predict()</code>, but your chances of understanding why the equation works would be slim. As a reminder, here is the code that computes this equation</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="n">kN</span><span class="p">):</span>
        <span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="p">(</span><span class="n">width</span><span class="o">-</span><span class="n">k</span><span class="p">)</span> <span class="o">-</span> <span class="n">offset</span><span class="p">)</span> <span class="o">%</span> <span class="n">N</span>
        <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">prob_dist</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*</span> <span class="n">kernel</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Summary">Summary<a class="anchor-link" href="#Summary">&#182;</a></h2><p>The code is very short, but the result is impressive! We have implemented a form of a Bayesian filter. We have learned how to start with no information and derive information from noisy sensors. Even though the sensors in this chapter are very noisy (most sensors are more than 80% accurate, for example) we quickly converge on the most likely position for our dog. We have learned how the predict step always degrades our knowledge, but the addition of another measurement, even when it might have noise in it, improves our knowledge, allowing us to converge on the most likely result.</p>
<p>This book is mostly about the Kalman filter. The math it uses is different, but the logic is exactly the same as used in this chapter. It uses Bayesian reasoning to form estimates from a combination of measurements and process models.</p>
<p><strong>If you can understand this chapter you will be able to understand and implement Kalman filters.</strong> I cannot stress this enough. If anything is murky, go back and reread this chapter and play with the code. The rest of this book will build on the algorithms that we use here. If you don't understand why this filter works you will have little success with the rest of the material. However, if you grasp the fundamental insight - multiplying probabilities when we measure, and shifting probabilities when we update leads to a converging solution - then after learning a bit of math you are ready to implement a Kalman filter.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="References">References<a class="anchor-link" href="#References">&#182;</a></h2><ul>
<li><p>[1] D. Fox, W. Burgard, and S. Thrun. "Monte carlo localization: Efficient position estimation for mobile robots." In <em>Journal of Artifical Intelligence Research</em>, 1999.</p>
<p><a href="http://www.cs.cmu.edu/afs/cs/project/jair/pub/volume11/fox99a-html/jair-localize.html">http://www.cs.cmu.edu/afs/cs/project/jair/pub/volume11/fox99a-html/jair-localize.html</a></p>
</li>
</ul>
<ul>
<li><p>[2] Dieter Fox, et. al. "Bayesian Filters for Location Estimation". In <em>IEEE Pervasive Computing</em>, September 2003.</p>
<p><a href="http://swarmlab.unimaas.nl/wp-content/uploads/2012/07/fox2003bayesian.pdf">http://swarmlab.unimaas.nl/wp-content/uploads/2012/07/fox2003bayesian.pdf</a></p>
</li>
</ul>
<ul>
<li><p>[3] Sebastian Thrun. "Artificial Intelligence for Robotics".</p>
<p><a href="https://www.udacity.com/course/cs373">https://www.udacity.com/course/cs373</a></p>
</li>
</ul>
<ul>
<li><p>[4] Khan Acadamy. "Introduction to the Convolution"</p>
<p><a href="https://www.khanacademy.org/math/differential-equations/laplace-transform/convolution-integral/v/introduction-to-the-convolution">https://www.khanacademy.org/math/differential-equations/laplace-transform/convolution-integral/v/introduction-to-the-convolution</a></p>
</li>
</ul>
<ul>
<li><p>[5] Wikipedia. "Convolution"</p>
<p><a href="http://en.wikipedia.org/wiki/Convolution">http://en.wikipedia.org/wiki/Convolution</a></p>
</li>
<li><p>[6] Wikipedia. "Law of total probability"</p>
<p><a href="http://en.wikipedia.org/wiki/Law_of_total_probability">http://en.wikipedia.org/wiki/Law_of_total_probability</a></p>
</li>
<li><p>[7] Wikipedia. "Time Evolution"</p>
<p><a href="https://en.wikipedia.org/wiki/Time_evolution">https://en.wikipedia.org/wiki/Time_evolution</a></p>
</li>
<li><p>[8] We need to rethink how we teach statistics from the ground up</p>
<p><a href="http://www.statslife.org.uk/opinion/2405-we-need-to-rethink-how-we-teach-statistics-from-the-ground-up">http://www.statslife.org.uk/opinion/2405-we-need-to-rethink-how-we-teach-statistics-from-the-ground-up</a></p>
</li>
</ul>

</div>
</div>
</div>
    </div>
  </div>
</body>
</html>
